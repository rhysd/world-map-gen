(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1:function(t,n,e){"use strict";e.r(n);var r=e(2),i=e(30);class o{constructor(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}render(t){const n=window.devicePixelRatio||1,e=this.canvas.getBoundingClientRect();this.canvas.width=e.width*n,this.canvas.height=e.height*n,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath();const r=t.width(),i=t.height(),o=this.canvas.width/r,s=this.canvas.height/i,c=o>s?s:o,u=new Map,d=new Map;for(let n=0;n<r;n++)for(let e=0;e<i;e++){const r=t.at(n,e),i=r.kind;let o=u.get(i);if(void 0===o&&void 0!==(o=r.color_code())&&u.set(i,o),this.ctx.fillStyle=o,this.ctx.fillRect(n*c,e*c,c,c),!d.has(i)){const t=r.legend();d.set(i,{text:t,color:o})}}return this.ctx.stroke(),{legends:d}}}var s=e(32);class c{constructor(t){this.canvas=t}determineCellSize(t,n){const e=n+t,r=(this.canvas.height-200)/e*2,i=this.canvas.width/e*2/Math.sqrt(3);let o=Math.floor(r>i?i:r);return console.log({fromHeight:r,fromWidth:i,cellSize:o}),o%2==1&&o--,o>6?o:6}render(t){const n=window.devicePixelRatio||1,e=this.canvas.getBoundingClientRect();this.canvas.width=e.width*n,this.canvas.height=e.height*n;const i=t.width(),o=t.height(),c=this.determineCellSize(i,o),u=new s.Point(this.canvas.width/2,c+198),d=new s.PixelView(this.canvas,u),a=new Map,h=new Map,l=new Map;let f=null;function w(t,n,e){const r=function(t,n){const e=h.get(t);if(void 0!==e)return e;let r=n.rgb_color();void 0===r&&(r=16777215);const i=(new s.CubeColor).getByHorizontalColor(r);return h.set(t,i),l.set(t,{text:n.legend(),color:n.color_code()}),i}(t,e),i=c+2*n,o=new s.CubeDimension(c,c,i);return new s.Cube(o,r,!1)}function g(t){const n=t.kind,e=t.altitude;if(l.has(n)||l.set(n,{text:t.legend(),color:t.color_code()}),n===r.b.Top)return null===f&&(f=w(n,e,t)),f;if(n===r.b.Town||n===r.b.Path)return w(n,e,t);const i=a.get(e);if(void 0!==i)return i;const o=w(n,e,t);return a.set(e,o),o}for(let n=0;n<i;n++)for(let e=0;e<o;e++){const r=g(t.at(n,e)),i=new s.Point3D(n*c,e*c,0);d.renderObject(r,i)}return{legends:l}}}(new class{constructor(){this.generator=r.a.new(),this.currentBoard=null,this.screen=null;const t=document.getElementById("dimension-selector"),n=t[t.selectedIndex];this.dim=n.value,t.addEventListener("change",this.onVisualizationChange.bind(this)),this.widthInput=document.getElementById("width-input"),this.heightInput=document.getElementById("height-input"),this.screenRoot=document.getElementById("screen-root"),this.initRenderer(),this.paintButton=document.getElementById("paint-button"),this.paintButton.addEventListener("click",()=>{this.render()}),this.legends=document.getElementById("legends"),this.downloadJSONButton=document.getElementById("download-json-button"),this.downloadJSONButton.addEventListener("click",this.onDownloadJSON.bind(this)),this.downloadPNGButton=document.getElementById("download-png-button"),this.downloadPNGButton.addEventListener("click",this.onDownloadPNG.bind(this))}getSize(){const t=parseInt(this.widthInput.value,10),n=parseInt(this.heightInput.value,10);if(!isNaN(t)&&!isNaN(n))return[t,n];if("3d"===this.dim)return[120,120];const e=this.screenRoot.getBoundingClientRect();if(isNaN(t)){if(isNaN(n)){const t=(e.height>e.width?e.height:e.width)/200;return[Math.floor(e.width/t),Math.floor(e.height/t)]}{const t=e.height/n;return[Math.floor(e.width/t),n]}}{const n=e.width/t;return[t,Math.floor(e.height/n)]}}initRenderer(){const t=this.screenRoot.firstChild;switch(null!==t&&this.screenRoot.removeChild(t),this.currentBoard=null,this.screen=document.createElement("canvas"),this.screen.className="screen",this.screenRoot.appendChild(this.screen),this.dim){case"2d":this.renderer=new o(this.screen);break;case"3d":this.renderer=new c(this.screen);break;default:throw new Error(`Unknown context ${this.dim}`)}}onDownloadJSON(t){if(null===this.currentBoard)return;const n=new Blob([this.currentBoard.as_json()],{type:"text/plain;charset=utf-8"});Object(i.saveAs)(n,"board.json")}onDownloadPNG(t){null!==this.screen&&this.screen.toBlob(t=>Object(i.saveAs)(t,"board.png"))}onVisualizationChange(t){const n=t.target,e=n[n.selectedIndex].value;this.dim!==e&&(this.dim=e,this.initRenderer(),this.render())}render(){this.paintButton.textContent="Painting...";for(const t of[this.paintButton,this.downloadJSONButton,this.downloadPNGButton])t.classList.add("disabled");window.setTimeout(()=>{const t=Date.now(),[n,e]=this.getSize(),r=this.generator.gen_auto(n,e),i=this.renderer.render(r);this.legends.innerHTML="";for(const t of i.legends.values()){const n=document.createElement("div");n.className="legend";const e=document.createElement("div");e.className="legend-color",e.style.backgroundColor=t.color||"none",n.appendChild(e);const r=document.createElement("div");r.className="legend-name",r.textContent=t.text,n.appendChild(r),this.legends.appendChild(n)}this.currentBoard=r;for(const t of[this.paintButton,this.downloadJSONButton,this.downloadPNGButton])t.classList.remove("disabled");this.paintButton.textContent="Generate",console.log("Consumed:",Date.now()-t)},0)}}).render()},2:function(t,n,e){"use strict";e.d(n,"b",function(){return l}),e.d(n,"g",function(){return p}),e.d(n,"c",function(){return m}),e.d(n,"j",function(){return b}),e.d(n,"d",function(){return B}),e.d(n,"e",function(){return N}),e.d(n,"f",function(){return C}),e.d(n,"i",function(){return x}),e.d(n,"h",function(){return y}),e.d(n,"m",function(){return E}),e.d(n,"k",function(){return k}),e.d(n,"l",function(){return O}),e.d(n,"a",function(){return P}),e.d(n,"n",function(){return M});var r=e(45);let i=new TextDecoder("utf-8"),o=null;function s(){return null!==o&&o.buffer===r.t.buffer||(o=new Uint8Array(r.t.buffer)),o}function c(t,n){return i.decode(s().subarray(t,t+n))}let u=null;function d(){return null===u&&(u=r.i()),u}let a=null;function h(){return null!==a&&a.buffer===r.t.buffer||(a=new Uint32Array(r.t.buffer)),a}Object.freeze({Low:0,Middle:1,High:2});const l=Object.freeze({Sea:0,Mountain:1,Forest:2,Plain:3,Town:4,Top:5,Highland:6,DeepSea:7,Path:8}),f=new Array(32);f.fill(void 0),f.push(void 0,null,!0,!1);let w=f.length;function g(t){w===f.length&&f.push(f.length+1);const n=w;return w=f[n],f[n]=t,n}function p(t,n){let e=c(t,n);return g(new Function(e))}function v(t){return f[t]}function m(t,n){return g(v(t).call(v(n)))}function b(t){return g(v(t).self)}function B(t){return g(v(t).crypto)}function N(t){return g(v(t).getRandomValues)}function _(t,n){return s().subarray(t/1,t/1+n)}function C(t,n,e){let r=_(n,e);v(t).getRandomValues(r)}function x(t,n){let r=c(t,n);return g(e(46)(r))}function y(t,n,e){let r=_(n,e);v(t).randomFillSync(r)}function E(t){var n;(n=t)<36||(f[n]=w,w=n)}function k(t){return void 0===v(t)?1:0}function O(t,n){return v(t)===v(n)?1:0}class R{static __wrap(t){const n=Object.create(R.prototype);return n.ptr=t,n}free(){const t=this.ptr;this.ptr=0,function(t){r.a(t)}(t)}width(){return r.m(this.ptr)}height(){return r.l(this.ptr)}at(t,n){return I.__wrap(r.k(this.ptr,t,n))}as_json(){const t=d();r.j(t,this.ptr);const n=h(),e=n[t/4],i=n[t/4+1];if(0===e)return;const o=c(e,i).slice();return r.h(e,1*i),o}}class I{static __wrap(t){const n=Object.create(I.prototype);return n.ptr=t,n}free(){const t=this.ptr;this.ptr=0,function(t){r.b(t)}(t)}get kind(){return r.e(this.ptr)}set kind(t){return r.g(this.ptr,t)}get altitude(){return r.d(this.ptr)}set altitude(t){return r.f(this.ptr,t)}color_code(){const t=d();r.n(t,this.ptr);const n=h(),e=n[t/4],i=n[t/4+1];if(0===e)return;const o=c(e,i).slice();return r.h(e,1*i),o}rgb_color(){const t=d();r.p(t,this.ptr);const n=h()[t/4],e=h()[t/4+1];return 0===n?void 0:e}legend(){const t=d();r.o(t,this.ptr);const n=h(),e=n[t/4],i=n[t/4+1],o=c(e,i).slice();return r.h(e,1*i),o}}class P{static __wrap(t){const n=Object.create(P.prototype);return n.ptr=t,n}free(){const t=this.ptr;this.ptr=0,function(t){r.c(t)}(t)}static new(){return P.__wrap(r.s())}gen_auto(t,n){return R.__wrap(r.r(this.ptr,t,n))}gen(t,n,e){return R.__wrap(r.q(this.ptr,t,n,e))}}function M(t,n){throw new Error(c(t,n))}},45:function(t,n,e){"use strict";var r=e.w[t.i];t.exports=r;e(2);r.u()},46:function(t,n){function e(t){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id=46}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi8yZC50cyIsIndlYnBhY2s6Ly8vLi8zZC50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi4vcGtnL3dvcmxkX21hcF9nZW4uanMiLCJ3ZWJwYWNrOi8vLy4uL3BrZyBzeW5jIl0sIm5hbWVzIjpbIlJlbmRlcmVyMkQiLCJbb2JqZWN0IE9iamVjdF0iLCJjYW52YXMiLCJ0aGlzIiwiY3R4IiwiZ2V0Q29udGV4dCIsImJvYXJkIiwiZHByIiwid2luZG93IiwiZGV2aWNlUGl4ZWxSYXRpbyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImNsZWFyUmVjdCIsImJlZ2luUGF0aCIsImNlbGxXaWR0aCIsImNlbGxIZWlnaHQiLCJjZWxsU2l6ZSIsImNvbG9ycyIsIk1hcCIsImxlZ2VuZHMiLCJ4IiwieSIsImNlbGwiLCJhdCIsImtpbmQiLCJjb2xvciIsImdldCIsInVuZGVmaW5lZCIsImNvbG9yX2NvZGUiLCJzZXQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImhhcyIsInRleHQiLCJsZWdlbmQiLCJzdHJva2UiLCJfM2RfUmVuZGVyZXIzRCIsImJvdGgiLCJmcm9tSGVpZ2h0IiwiZnJvbVdpZHRoIiwiTWF0aCIsInNxcnQiLCJmbG9vciIsImNvbnNvbGUiLCJsb2ciLCJkZXRlcm1pbmVDZWxsU2l6ZSIsInBvaW50Iiwib2JlbGlzayIsInBpeGVsVmlldyIsImNhY2hlIiwidG9wQ3ViZSIsImNhbGNDdWJlIiwiYWx0IiwiY2FjaGVkIiwicmdiIiwicmdiX2NvbG9yIiwiZ2V0QnlIb3Jpem9udGFsQ29sb3IiLCJraW5kQ29sb3IiLCJkaW0iLCJjdWJlQXQiLCJhbHRpdHVkZSIsIndvcmxkX21hcF9nZW4iLCJUb3AiLCJUb3duIiwiUGF0aCIsImN1YmUiLCJwdCIsInJlbmRlck9iamVjdCIsImdlbmVyYXRvciIsIm5ldyIsImN1cnJlbnRCb2FyZCIsInNjcmVlbiIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9wdGlvbiIsInNlbGVjdGVkSW5kZXgiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblZpc3VhbGl6YXRpb25DaGFuZ2UiLCJiaW5kIiwid2lkdGhJbnB1dCIsImhlaWdodElucHV0Iiwic2NyZWVuUm9vdCIsImluaXRSZW5kZXJlciIsInBhaW50QnV0dG9uIiwicmVuZGVyIiwiZG93bmxvYWRKU09OQnV0dG9uIiwib25Eb3dubG9hZEpTT04iLCJkb3dubG9hZFBOR0J1dHRvbiIsIm9uRG93bmxvYWRQTkciLCJwYXJzZUludCIsImlzTmFOIiwiY2VsbFBpeCIsInByZXYiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJyZW5kZXJlciIsIkVycm9yIiwiXyIsImJsb2IiLCJCbG9iIiwiYXNfanNvbiIsInR5cGUiLCJPYmplY3QiLCJGaWxlU2F2ZXJfbWluIiwidG9CbG9iIiwiYiIsImV2ZW50IiwidGFyZ2V0IiwidGV4dENvbnRlbnQiLCJidG4iLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRUaW1lb3V0Iiwic3RhcnQiLCJEYXRlIiwibm93IiwiZ2V0U2l6ZSIsImdlbl9hdXRvIiwicmVuZGVyZWQiLCJpbm5lckhUTUwiLCJ2YWx1ZXMiLCJpdGVtIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJuYW1lIiwicmVtb3ZlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiTGFuZEtpbmQiLCJfX3diZ19uZXdfYmM4OTBkZjNlNWU2YTkxZCIsIl9fd2JnX2NhbGxfZTE1YjZhYTBjNmQzYzkzZiIsIl9fd2JnX3NlbGZfOTVhZDNmMWNkZGQ1YWNjYyIsIl9fd2JnX2NyeXB0b19jOTNjYzVhMTQ3ZTM1NDIyIiwiX193YmdfZ2V0UmFuZG9tVmFsdWVzXzU4YjQ2NDE2ZWE3YTMzYTIiLCJfX3diZ19nZXRSYW5kb21WYWx1ZXNfYTNhM2MyZGQ1NDk0ZmQzOSIsIl9fd2JnX3JlcXVpcmVfMzZhODk1ZjBhNGVhMDUyOSIsIl9fd2JnX3JhbmRvbUZpbGxTeW5jX2Y5Y2I3NTMxZDljMGIxNDQiLCJfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZiIsIl9fd2JpbmRnZW5faXNfdW5kZWZpbmVkIiwiX193YmluZGdlbl9qc3ZhbF9lcSIsIkdlbmVyYXRvciIsIl9fd2JpbmRnZW5fdGhyb3ciLCJfd29ybGRfbWFwX2dlbl9iZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiY2FjaGVkVGV4dERlY29kZXIiLCJUZXh0RGVjb2RlciIsImNhY2hlZ2V0VWludDhNZW1vcnkiLCJnZXRVaW50OE1lbW9yeSIsImJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJnZXRTdHJpbmdGcm9tV2FzbSIsInB0ciIsImxlbiIsImRlY29kZSIsInN1YmFycmF5IiwiY2FjaGVkR2xvYmFsQXJndW1lbnRQdHIiLCJnbG9iYWxBcmd1bWVudFB0ciIsImNhY2hlZ2V0VWludDMyTWVtb3J5IiwiZ2V0VWludDMyTWVtb3J5IiwiVWludDMyQXJyYXkiLCJmcmVlemUiLCJMb3ciLCJNaWRkbGUiLCJIaWdoIiwiU2VhIiwiTW91bnRhaW4iLCJGb3Jlc3QiLCJQbGFpbiIsIkhpZ2hsYW5kIiwiRGVlcFNlYSIsImhlYXAiLCJBcnJheSIsImZpbGwiLCJwdXNoIiwiaGVhcF9uZXh0IiwibGVuZ3RoIiwiYWRkSGVhcE9iamVjdCIsIm9iaiIsImlkeCIsImFyZzAiLCJhcmcxIiwidmFyZzAiLCJGdW5jdGlvbiIsImdldE9iamVjdCIsImNhbGwiLCJzZWxmIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiZ2V0QXJyYXlVOEZyb21XYXNtIiwiYXJnMiIsInZhcmcxIiwicmFuZG9tRmlsbFN5bmMiLCJpIiwiYSIsIkJvYXJkIiwiY3JlYXRlIiwicHJvdG90eXBlIiwiZnJlZUJvYXJkIiwiQ2VsbCIsIl9fd3JhcCIsInJldHB0ciIsIm1lbSIsInJ1c3RwdHIiLCJydXN0bGVuIiwicmVhbFJldCIsInNsaWNlIiwiZnJlZUNlbGwiLCJwcmVzZW50IiwiZnJlZUdlbmVyYXRvciIsIndlYnBhY2tFbXB0eUNvbnRleHQiLCJyZXEiLCJlIiwiY29kZSIsImtleXMiLCJyZXNvbHZlIiwibW9kdWxlIiwiZXhwb3J0cyIsImlkIl0sIm1hcHBpbmdzIjoia0hBR2UsTUFBTUEsRUFJakJDLFlBQVlDLEdBQ1JDLEtBQUtELE9BQVNBLEVBQ2RDLEtBQUtDLElBQU1ELEtBQUtELE9BQU9HLFdBQVcsTUFHdENKLE9BQU9LLEdBQ0gsTUFBTUMsRUFBTUMsT0FBT0Msa0JBQW9CLEVBQ2pDQyxFQUFPUCxLQUFLRCxPQUFPUyx3QkFDekJSLEtBQUtELE9BQU9VLE1BQVFGLEVBQUtFLE1BQVFMLEVBQ2pDSixLQUFLRCxPQUFPVyxPQUFTSCxFQUFLRyxPQUFTTixFQUduQ0osS0FBS0MsSUFBSVUsVUFBVSxFQUFHLEVBQUdYLEtBQUtELE9BQU9VLE1BQU9ULEtBQUtELE9BQU9XLFFBRXhEVixLQUFLQyxJQUFJVyxZQUVULE1BQU1ILEVBQVFOLEVBQU1NLFFBQ2RDLEVBQVNQLEVBQU1PLFNBQ2ZHLEVBQVliLEtBQUtELE9BQU9VLE1BQVFBLEVBQ2hDSyxFQUFhZCxLQUFLRCxPQUFPVyxPQUFTQSxFQUNsQ0ssRUFBV0YsRUFBWUMsRUFBYUEsRUFBYUQsRUFFakRHLEVBQVMsSUFBSUMsSUFDYkMsRUFBVSxJQUFJRCxJQUNwQixJQUFLLElBQUlFLEVBQUksRUFBR0EsRUFBSVYsRUFBT1UsSUFDdkIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlWLEVBQVFVLElBQUssQ0FDN0IsTUFBTUMsRUFBT2xCLEVBQU1tQixHQUFHSCxFQUFHQyxHQUNuQkcsRUFBT0YsRUFBS0UsS0FDbEIsSUFBSUMsRUFBUVIsRUFBT1MsSUFBSUYsR0FTdkIsUUFSY0csSUFBVkYsUUFFY0UsS0FEZEYsRUFBUUgsRUFBS00sZUFFVFgsRUFBT1ksSUFBSUwsRUFBTUMsR0FHekJ4QixLQUFLQyxJQUFJNEIsVUFBWUwsRUFDckJ4QixLQUFLQyxJ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RUFDQU0sRUFBQUMsUUFBQVAsRUFDQUEsRUFBQVEsR0FBQSIsImZpbGUiOiIyLmJvb3RzdHJhcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvYXJkIH0gZnJvbSAnd29ybGQtbWFwLWdlbic7XG5pbXBvcnQgeyBSZW5kZXJlciwgUmVuZGVyZWQsIExlZ2VuZCB9IGZyb20gJy4vcmVuZGVyZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgUmVuZGVyZXIge1xuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuICAgIH1cblxuICAgIHJlbmRlcihib2FyZDogQm9hcmQpOiBSZW5kZXJlZCB7XG4gICAgICAgIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSByZWN0LndpZHRoICogZHByO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSByZWN0LmhlaWdodCAqIGRwcjtcblxuICAgICAgICAvLyBDbGVhciBhdCBmaXJzdFxuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBib2FyZC53aWR0aCgpO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBib2FyZC5oZWlnaHQoKTtcbiAgICAgICAgY29uc3QgY2VsbFdpZHRoID0gdGhpcy5jYW52YXMud2lkdGggLyB3aWR0aDtcbiAgICAgICAgY29uc3QgY2VsbEhlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodCAvIGhlaWdodDtcbiAgICAgICAgY29uc3QgY2VsbFNpemUgPSBjZWxsV2lkdGggPiBjZWxsSGVpZ2h0ID8gY2VsbEhlaWdodCA6IGNlbGxXaWR0aDtcblxuICAgICAgICBjb25zdCBjb2xvcnMgPSBuZXcgTWFwPG51bWJlciwgc3RyaW5nPigpO1xuICAgICAgICBjb25zdCBsZWdlbmRzID0gbmV3IE1hcDxudW1iZXIsIExlZ2VuZD4oKTtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGJvYXJkLmF0KHgsIHkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtpbmQgPSBjZWxsLmtpbmQ7XG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gY29sb3JzLmdldChraW5kKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IGNlbGwuY29sb3JfY29kZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzLnNldChraW5kLCBjb2xvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCAqIGNlbGxTaXplLCB5ICogY2VsbFNpemUsIGNlbGxTaXplLCBjZWxsU2l6ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFsZWdlbmRzLmhhcyhraW5kKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gY2VsbC5sZWdlbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kcy5zZXQoa2luZCwgeyB0ZXh0LCBjb2xvciB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcblxuICAgICAgICByZXR1cm4geyBsZWdlbmRzIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUG9pbnQzRCwgUG9pbnQsIEN1YmVEaW1lbnNpb24sIEN1YmVDb2xvciwgQ3ViZSwgUGl4ZWxWaWV3IH0gZnJvbSAnb2JlbGlzay5qcyc7XG5pbXBvcnQgeyBMYW5kS2luZCwgQm9hcmQsIENlbGwgfSBmcm9tICd3b3JsZC1tYXAtZ2VuJztcbmltcG9ydCB7IFJlbmRlcmVyLCBSZW5kZXJlZCwgTGVnZW5kIH0gZnJvbSAnLi9yZW5kZXJlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVyM0QgaW1wbGVtZW50cyBSZW5kZXJlciB7XG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5lQ2VsbFNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgYm90aCA9IGhlaWdodCArIHdpZHRoO1xuICAgICAgICBjb25zdCBmcm9tSGVpZ2h0ID0gKCh0aGlzLmNhbnZhcy5oZWlnaHQgLSAyMDApIC8gYm90aCkgKiAyO1xuICAgICAgICBjb25zdCBmcm9tV2lkdGggPSAoKHRoaXMuY2FudmFzLndpZHRoIC8gYm90aCkgKiAyKSAvIE1hdGguc3FydCgzKTtcbiAgICAgICAgbGV0IGNlbGxTaXplID0gTWF0aC5mbG9vcihmcm9tSGVpZ2h0ID4gZnJvbVdpZHRoID8gZnJvbVdpZHRoIDogZnJvbUhlaWdodCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHsgZnJvbUhlaWdodCwgZnJvbVdpZHRoLCBjZWxsU2l6ZSB9KTtcbiAgICAgICAgaWYgKGNlbGxTaXplICUgMiA9PT0gMSkge1xuICAgICAgICAgICAgY2VsbFNpemUtLTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VsbFNpemUgPiA2ID8gY2VsbFNpemUgOiA2O1xuICAgIH1cblxuICAgIHJlbmRlcihib2FyZDogQm9hcmQpOiBSZW5kZXJlZCB7XG4gICAgICAgIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSByZWN0LndpZHRoICogZHByO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSByZWN0LmhlaWdodCAqIGRwcjtcblxuICAgICAgICBjb25zdCB3aWR0aCA9IGJvYXJkLndpZHRoKCk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGJvYXJkLmhlaWdodCgpO1xuICAgICAgICBjb25zdCBjZWxsU2l6ZSA9IHRoaXMuZGV0ZXJtaW5lQ2VsbFNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgY29uc3QgcG9pbnQgPSBuZXcgUG9pbnQodGhpcy5jYW52YXMud2lkdGggLyAyLCBjZWxsU2l6ZSArIDk5ICogMik7XG4gICAgICAgIGNvbnN0IHBpeGVsVmlldyA9IG5ldyBQaXhlbFZpZXcodGhpcy5jYW52YXMsIHBvaW50KTtcblxuICAgICAgICBjb25zdCBjYWNoZSA9IG5ldyBNYXA8bnVtYmVyLCBDdWJlPigpOyAvLyBBbHRpdHVkZSAtPiBDdWJlXG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IG5ldyBNYXA8bnVtYmVyLCBDdWJlQ29sb3I+KCk7IC8vIGtpbmQgLT4gQ3ViZUNvbG9yXG4gICAgICAgIGNvbnN0IGxlZ2VuZHMgPSBuZXcgTWFwPG51bWJlciwgTGVnZW5kPigpOyAvLyBraW5kIC0+IExlZ2VuZFxuICAgICAgICBsZXQgdG9wQ3ViZTogQ3ViZSB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgIGZ1bmN0aW9uIGtpbmRDb2xvcihraW5kOiBMYW5kS2luZCwgY2VsbDogQ2VsbCk6IEN1YmVDb2xvciB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWQgPSBjb2xvcnMuZ2V0KGtpbmQpO1xuICAgICAgICAgICAgaWYgKGNhY2hlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByZ2IgPSBjZWxsLnJnYl9jb2xvcigpO1xuICAgICAgICAgICAgaWYgKHJnYiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmdiID0gMHhmZmZmZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IG5ldyBDdWJlQ29sb3IoKS5nZXRCeUhvcml6b250YWxDb2xvcihyZ2IpO1xuICAgICAgICAgICAgY29sb3JzLnNldChraW5kLCBjb2xvcik7XG5cbiAgICAgICAgICAgIC8vIFJlbWVtYmVyIGxlZ2VuZCBvZiB0aGUga2luZCBhbHNvXG4gICAgICAgICAgICBsZWdlbmRzLnNldChraW5kLCB7IHRleHQ6IGNlbGwubGVnZW5kKCksIGNvbG9yOiBjZWxsLmNvbG9yX2NvZGUoKSB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY0N1YmUoa2luZDogTGFuZEtpbmQsIGFsdDogbnVtYmVyLCBjZWxsOiBDZWxsKTogQ3ViZSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IGtpbmRDb2xvcihraW5kLCBjZWxsKTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGNlbGxTaXplICsgYWx0ICogMjtcbiAgICAgICAgICAgIGNvbnN0IGRpbSA9IG5ldyBDdWJlRGltZW5zaW9uKGNlbGxTaXplLCBjZWxsU2l6ZSwgaGVpZ2h0KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ3ViZShkaW0sIGNvbG9yLCAvKmJvcmRlcjoqLyBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjdWJlQXQoY2VsbDogQ2VsbCk6IEN1YmUge1xuICAgICAgICAgICAgY29uc3Qga2luZCA9IGNlbGwua2luZDtcbiAgICAgICAgICAgIGNvbnN0IGFsdCA9IGNlbGwuYWx0aXR1ZGU7XG5cbiAgICAgICAgICAgIGlmICghbGVnZW5kcy5oYXMoa2luZCkpIHtcbiAgICAgICAgICAgICAgICAvLyBSZW1lbWJlciBsZWdlbmQgb2YgdGhlIGtpbmQgYWxzb1xuICAgICAgICAgICAgICAgIGxlZ2VuZHMuc2V0KGtpbmQsIHsgdGV4dDogY2VsbC5sZWdlbmQoKSwgY29sb3I6IGNlbGwuY29sb3JfY29kZSgpIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gTGFuZEtpbmQuVG9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRvcEN1YmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wQ3ViZSA9IGNhbGNDdWJlKGtpbmQsIGFsdCwgY2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0b3BDdWJlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gTGFuZEtpbmQuVG93biB8fCBraW5kID09PSBMYW5kS2luZC5QYXRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGNDdWJlKGtpbmQsIGFsdCwgY2VsbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChhbHQpO1xuICAgICAgICAgICAgaWYgKGNhY2hlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY3ViZSA9IGNhbGNDdWJlKGtpbmQsIGFsdCwgY2VsbCk7XG4gICAgICAgICAgICBjYWNoZS5zZXQoYWx0LCBjdWJlKTtcbiAgICAgICAgICAgIHJldHVybiBjdWJlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3ViZSA9IGN1YmVBdChib2FyZC5hdCh4LCB5KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHQgPSBuZXcgUG9pbnQzRCh4ICogY2VsbFNpemUsIHkgKiBjZWxsU2l6ZSwgMCk7XG4gICAgICAgICAgICAgICAgcGl4ZWxWaWV3LnJlbmRlck9iamVjdChjdWJlLCBwdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVnZW5kcyxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBHZW5lcmF0b3IsIEJvYXJkIH0gZnJvbSAnd29ybGQtbWFwLWdlbic7XG5pbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJztcbmltcG9ydCBSZW5kZXJlcjJEIGZyb20gJy4vMmQnO1xuaW1wb3J0IFJlbmRlcmVyM0QgZnJvbSAnLi8zZCc7XG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXInO1xuXG5jb25zdCBhcHAgPSBuZXcgY2xhc3Mge1xuICAgIHByaXZhdGUgZ2VuZXJhdG9yOiBHZW5lcmF0b3I7XG4gICAgcHJpdmF0ZSBkaW06IHN0cmluZztcbiAgICBwcml2YXRlIGN1cnJlbnRCb2FyZDogQm9hcmQgfCBudWxsO1xuICAgIHByaXZhdGUgd2lkdGhJbnB1dDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwcml2YXRlIGhlaWdodElucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgc2NyZWVuUm9vdDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBwYWludEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsZWdlbmRzOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjtcbiAgICBwcml2YXRlIGRvd25sb2FkSlNPTkJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBkb3dubG9hZFBOR0J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzY3JlZW46IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdlbmVyYXRvciA9IEdlbmVyYXRvci5uZXcoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50Qm9hcmQgPSBudWxsO1xuICAgICAgICB0aGlzLnNjcmVlbiA9IG51bGw7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGltZW5zaW9uLXNlbGVjdG9yJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdG9yW3NlbGVjdG9yLnNlbGVjdGVkSW5kZXhdIGFzIEhUTUxPcHRpb25FbGVtZW50O1xuICAgICAgICB0aGlzLmRpbSA9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgc2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vblZpc3VhbGl6YXRpb25DaGFuZ2UuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy53aWR0aElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZHRoLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgdGhpcy5oZWlnaHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWlnaHQtaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLnNjcmVlblJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuLXJvb3QnKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICB0aGlzLmluaXRSZW5kZXJlcigpO1xuXG4gICAgICAgIHRoaXMucGFpbnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFpbnQtYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHRoaXMucGFpbnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmxlZ2VuZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVnZW5kcycpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIHRoaXMuZG93bmxvYWRKU09OQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLWpzb24tYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZG93bmxvYWRKU09OQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkRvd25sb2FkSlNPTi5iaW5kKHRoaXMpKTtcblxuICAgICAgICB0aGlzLmRvd25sb2FkUE5HQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLXBuZy1idXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgdGhpcy5kb3dubG9hZFBOR0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25Eb3dubG9hZFBORy5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBnZXRTaXplKCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHBhcnNlSW50KHRoaXMud2lkdGhJbnB1dC52YWx1ZSwgMTApO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBwYXJzZUludCh0aGlzLmhlaWdodElucHV0LnZhbHVlLCAxMCk7XG4gICAgICAgIGlmICghaXNOYU4od2lkdGgpICYmICFpc05hTihoZWlnaHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGltID09PSAnM2QnKSB7XG4gICAgICAgICAgICByZXR1cm4gWzEyMCwgMTIwXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnNjcmVlblJvb3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgaWYgKCFpc05hTih3aWR0aCkpIHtcbiAgICAgICAgICAgIC8vIE5vdGU6IGhlaWdodCBpcyBOYU5cbiAgICAgICAgICAgIGNvbnN0IGNlbGxQaXggPSByZWN0LndpZHRoIC8gd2lkdGg7XG4gICAgICAgICAgICByZXR1cm4gW3dpZHRoLCBNYXRoLmZsb29yKHJlY3QuaGVpZ2h0IC8gY2VsbFBpeCldO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihoZWlnaHQpKSB7XG4gICAgICAgICAgICAvLyBOb3RlOiB3aWR0aCBpcyBOYU5cbiAgICAgICAgICAgIGNvbnN0IGNlbGxQaXggPSByZWN0LmhlaWdodCAvIGhlaWdodDtcbiAgICAgICAgICAgIHJldHVybiBbTWF0aC5mbG9vcihyZWN0LndpZHRoIC8gY2VsbFBpeCksIGhlaWdodF07XG4gICAgICAgIH0gLyogbG9uZ2VyIHNpZGUgbGVuZ3RoIGlzIDIwMCBjZWxscyBieSBkZWZhdWx0ICovIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbWF4ID0gcmVjdC5oZWlnaHQgPiByZWN0LndpZHRoID8gcmVjdC5oZWlnaHQgOiByZWN0LndpZHRoO1xuICAgICAgICAgICAgY29uc3QgY2VsbFBpeCA9IG1heCAvIDIwMDtcbiAgICAgICAgICAgIHJldHVybiBbTWF0aC5mbG9vcihyZWN0LndpZHRoIC8gY2VsbFBpeCksIE1hdGguZmxvb3IocmVjdC5oZWlnaHQgLyBjZWxsUGl4KV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbml0UmVuZGVyZXIoKSB7XG4gICAgICAgIGNvbnN0IHByZXYgPSB0aGlzLnNjcmVlblJvb3QuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKHByZXYgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuUm9vdC5yZW1vdmVDaGlsZChwcmV2KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRCb2FyZCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2NyZWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIHRoaXMuc2NyZWVuLmNsYXNzTmFtZSA9ICdzY3JlZW4nO1xuICAgICAgICB0aGlzLnNjcmVlblJvb3QuYXBwZW5kQ2hpbGQodGhpcy5zY3JlZW4pO1xuXG4gICAgICAgIHN3aXRjaCAodGhpcy5kaW0pIHtcbiAgICAgICAgICAgIGNhc2UgJzJkJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyMkQodGhpcy5zY3JlZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnM2QnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIzRCh0aGlzLnNjcmVlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBjb250ZXh0ICR7dGhpcy5kaW19YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkRvd25sb2FkSlNPTihfOiBFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50Qm9hcmQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3RoaXMuY3VycmVudEJvYXJkLmFzX2pzb24oKV0sIHsgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcgfSk7XG4gICAgICAgIHNhdmVBcyhibG9iLCAnYm9hcmQuanNvbicpO1xuICAgIH1cblxuICAgIG9uRG93bmxvYWRQTkcoXzogRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2NyZWVuID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY3JlZW4udG9CbG9iKChiOiBCbG9iKSA9PiBzYXZlQXMoYiwgJ2JvYXJkLnBuZycpKTtcbiAgICB9XG5cbiAgICBvblZpc3VhbGl6YXRpb25DaGFuZ2UoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RvcltzZWxlY3Rvci5zZWxlY3RlZEluZGV4XSBhcyBIVE1MT3B0aW9uRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGltID0gb3B0aW9uLnZhbHVlO1xuICAgICAgICBpZiAodGhpcy5kaW0gPT09IGRpbSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGltID0gZGltO1xuICAgICAgICB0aGlzLmluaXRSZW5kZXJlcigpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgLy8gVE9ETzogTG9hZGluZyBpbmRpY2F0b3IgY2Fubm90IGJlIGRpc3BsYXllZCBzaW5jZSBtYXAgZ2VuZXJhdGlvbiBpcyBydW4gaW4gbWFpbiB0aHJlYWQuXG4gICAgICAgIC8vIFdoZW4gbWFwIHNpemUgaXMgdmVyeSBsYXJnZSBhbmQgaXQgY29uc3VtZXMgdGltZSwgQ1BVIGNvcmUgaXMgYWxzbyBjb25zdW1lZCBmb3IgbWFpbiB0aHJlYWQuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlLCBubyBhbmltYXRpb24gaXMgYWN0dWFsbHkgcmVuZGVyZWQuXG4gICAgICAgIC8vIFRvIHByZXZlbnQgdGhpcywgbWFwIGdlbmVyYXRpb24gbXVzdCBiZSBydW4gaW4gYW5vdGhlciB0aHJlYWQgYW5kIFJ1c3QgY2FuIGRvIGl0LlxuXG4gICAgICAgIC8vIHRoaXMucGFpbnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuICAgICAgICB0aGlzLnBhaW50QnV0dG9uLnRleHRDb250ZW50ID0gJ1BhaW50aW5nLi4uJztcbiAgICAgICAgZm9yIChjb25zdCBidG4gb2YgW3RoaXMucGFpbnRCdXR0b24sIHRoaXMuZG93bmxvYWRKU09OQnV0dG9uLCB0aGlzLmRvd25sb2FkUE5HQnV0dG9uXSkge1xuICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXYWl0IG5leHQgdGljayB0byBjaGFuZ2UgdGV4dFxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPSB0aGlzLmdldFNpemUoKTtcbiAgICAgICAgICAgIGNvbnN0IGJvYXJkID0gdGhpcy5nZW5lcmF0b3IuZ2VuX2F1dG8od2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBjb25zdCByZW5kZXJlZCA9IHRoaXMucmVuZGVyZXIucmVuZGVyKGJvYXJkKTtcblxuICAgICAgICAgICAgdGhpcy5sZWdlbmRzLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsZWdlbmQgb2YgcmVuZGVyZWQubGVnZW5kcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTmFtZSA9ICdsZWdlbmQnO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb2xvci5jbGFzc05hbWUgPSAnbGVnZW5kLWNvbG9yJztcbiAgICAgICAgICAgICAgICBjb2xvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBsZWdlbmQuY29sb3IgfHwgJ25vbmUnO1xuICAgICAgICAgICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoY29sb3IpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIG5hbWUuY2xhc3NOYW1lID0gJ2xlZ2VuZC1uYW1lJztcbiAgICAgICAgICAgICAgICBuYW1lLnRleHRDb250ZW50ID0gbGVnZW5kLnRleHQ7XG4gICAgICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChuYW1lKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubGVnZW5kcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJvYXJkID0gYm9hcmQ7XG5cbiAgICAgICAgICAgIC8vIHRoaXMucGFpbnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBidG4gb2YgW3RoaXMucGFpbnRCdXR0b24sIHRoaXMuZG93bmxvYWRKU09OQnV0dG9uLCB0aGlzLmRvd25sb2FkUE5HQnV0dG9uXSkge1xuICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWludEJ1dHRvbi50ZXh0Q29udGVudCA9ICdHZW5lcmF0ZSc7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29uc3VtZWQ6JywgRGF0ZS5ub3coKSAtIHN0YXJ0KTtcbiAgICAgICAgfSwgMCk7XG4gICAgfVxufSgpO1xuXG5hcHAucmVuZGVyKCk7XG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuaW1wb3J0ICogYXMgd2FzbSBmcm9tICcuL3dvcmxkX21hcF9nZW5fYmcnO1xuXG5sZXQgY2FjaGVkVGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi04Jyk7XG5cbmxldCBjYWNoZWdldFVpbnQ4TWVtb3J5ID0gbnVsbDtcbmZ1bmN0aW9uIGdldFVpbnQ4TWVtb3J5KCkge1xuICAgIGlmIChjYWNoZWdldFVpbnQ4TWVtb3J5ID09PSBudWxsIHx8IGNhY2hlZ2V0VWludDhNZW1vcnkuYnVmZmVyICE9PSB3YXNtLm1lbW9yeS5idWZmZXIpIHtcbiAgICAgICAgY2FjaGVnZXRVaW50OE1lbW9yeSA9IG5ldyBVaW50OEFycmF5KHdhc20ubWVtb3J5LmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWdldFVpbnQ4TWVtb3J5O1xufVxuXG5mdW5jdGlvbiBnZXRTdHJpbmdGcm9tV2FzbShwdHIsIGxlbikge1xuICAgIHJldHVybiBjYWNoZWRUZXh0RGVjb2Rlci5kZWNvZGUoZ2V0VWludDhNZW1vcnkoKS5zdWJhcnJheShwdHIsIHB0ciArIGxlbikpO1xufVxuXG5sZXQgY2FjaGVkR2xvYmFsQXJndW1lbnRQdHIgPSBudWxsO1xuZnVuY3Rpb24gZ2xvYmFsQXJndW1lbnRQdHIoKSB7XG4gICAgaWYgKGNhY2hlZEdsb2JhbEFyZ3VtZW50UHRyID09PSBudWxsKSB7XG4gICAgICAgIGNhY2hlZEdsb2JhbEFyZ3VtZW50UHRyID0gd2FzbS5fX3diaW5kZ2VuX2dsb2JhbF9hcmd1bWVudF9wdHIoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZEdsb2JhbEFyZ3VtZW50UHRyO1xufVxuXG5sZXQgY2FjaGVnZXRVaW50MzJNZW1vcnkgPSBudWxsO1xuZnVuY3Rpb24gZ2V0VWludDMyTWVtb3J5KCkge1xuICAgIGlmIChjYWNoZWdldFVpbnQzMk1lbW9yeSA9PT0gbnVsbCB8fCBjYWNoZWdldFVpbnQzMk1lbW9yeS5idWZmZXIgIT09IHdhc20ubWVtb3J5LmJ1ZmZlcikge1xuICAgICAgICBjYWNoZWdldFVpbnQzMk1lbW9yeSA9IG5ldyBVaW50MzJBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVnZXRVaW50MzJNZW1vcnk7XG59XG4vKipcbiogUmVzb2x1dGlvbiBvZiB0aGUgYm9hcmQuXG4qL1xuZXhwb3J0IGNvbnN0IFJlc29sdXRpb24gPSBPYmplY3QuZnJlZXplKHsgTG93OjAsTWlkZGxlOjEsSGlnaDoyLCB9KTtcbi8qKlxuKiBSZXByZXNlbnRzIHRoZSBraW5kIG9mIGNlbGwuIGBwcmVzZXQoKWAgbWV0aG9kIHJldHVybnMgYSBwcmVzZXQgY2VsbCBjb25zdGFudHMgZm9yXG4qIHRoZSBraW5kLlxuKi9cbmV4cG9ydCBjb25zdCBMYW5kS2luZCA9IE9iamVjdC5mcmVlemUoeyBTZWE6MCxNb3VudGFpbjoxLEZvcmVzdDoyLFBsYWluOjMsVG93bjo0LFRvcDo1LEhpZ2hsYW5kOjYsRGVlcFNlYTo3LFBhdGg6OCwgfSk7XG5cbmNvbnN0IGhlYXAgPSBuZXcgQXJyYXkoMzIpO1xuXG5oZWFwLmZpbGwodW5kZWZpbmVkKTtcblxuaGVhcC5wdXNoKHVuZGVmaW5lZCwgbnVsbCwgdHJ1ZSwgZmFsc2UpO1xuXG5sZXQgaGVhcF9uZXh0ID0gaGVhcC5sZW5ndGg7XG5cbmZ1bmN0aW9uIGFkZEhlYXBPYmplY3Qob2JqKSB7XG4gICAgaWYgKGhlYXBfbmV4dCA9PT0gaGVhcC5sZW5ndGgpIGhlYXAucHVzaChoZWFwLmxlbmd0aCArIDEpO1xuICAgIGNvbnN0IGlkeCA9IGhlYXBfbmV4dDtcbiAgICBoZWFwX25leHQgPSBoZWFwW2lkeF07XG5cbiAgICBoZWFwW2lkeF0gPSBvYmo7XG4gICAgcmV0dXJuIGlkeDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX25ld19iYzg5MGRmM2U1ZTZhOTFkKGFyZzAsIGFyZzEpIHtcbiAgICBsZXQgdmFyZzAgPSBnZXRTdHJpbmdGcm9tV2FzbShhcmcwLCBhcmcxKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChuZXcgRnVuY3Rpb24odmFyZzApKTtcbn1cblxuZnVuY3Rpb24gZ2V0T2JqZWN0KGlkeCkgeyByZXR1cm4gaGVhcFtpZHhdOyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19jYWxsX2UxNWI2YWEwYzZkM2M5M2YoYXJnMCwgYXJnMSkge1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KGdldE9iamVjdChhcmcwKS5jYWxsKGdldE9iamVjdChhcmcxKSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193Ymdfc2VsZl85NWFkM2YxY2RkZDVhY2NjKGFyZzApIHtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChnZXRPYmplY3QoYXJnMCkuc2VsZik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19jcnlwdG9fYzkzY2M1YTE0N2UzNTQyMihhcmcwKSB7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QoZ2V0T2JqZWN0KGFyZzApLmNyeXB0byk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19nZXRSYW5kb21WYWx1ZXNfNThiNDY0MTZlYTdhMzNhMihhcmcwKSB7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QoZ2V0T2JqZWN0KGFyZzApLmdldFJhbmRvbVZhbHVlcyk7XG59XG5cbmZ1bmN0aW9uIGdldEFycmF5VThGcm9tV2FzbShwdHIsIGxlbikge1xuICAgIHJldHVybiBnZXRVaW50OE1lbW9yeSgpLnN1YmFycmF5KHB0ciAvIDEsIHB0ciAvIDEgKyBsZW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfZ2V0UmFuZG9tVmFsdWVzX2EzYTNjMmRkNTQ5NGZkMzkoYXJnMCwgYXJnMSwgYXJnMikge1xuICAgIGxldCB2YXJnMSA9IGdldEFycmF5VThGcm9tV2FzbShhcmcxLCBhcmcyKTtcbiAgICBnZXRPYmplY3QoYXJnMCkuZ2V0UmFuZG9tVmFsdWVzKHZhcmcxKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX3JlcXVpcmVfMzZhODk1ZjBhNGVhMDUyOShhcmcwLCBhcmcxKSB7XG4gICAgbGV0IHZhcmcwID0gZ2V0U3RyaW5nRnJvbVdhc20oYXJnMCwgYXJnMSk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmVxdWlyZSh2YXJnMCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfcmFuZG9tRmlsbFN5bmNfZjljYjc1MzFkOWMwYjE0NChhcmcwLCBhcmcxLCBhcmcyKSB7XG4gICAgbGV0IHZhcmcxID0gZ2V0QXJyYXlVOEZyb21XYXNtKGFyZzEsIGFyZzIpO1xuICAgIGdldE9iamVjdChhcmcwKS5yYW5kb21GaWxsU3luYyh2YXJnMSk7XG59XG5cbmZ1bmN0aW9uIGRyb3BPYmplY3QoaWR4KSB7XG4gICAgaWYgKGlkeCA8IDM2KSByZXR1cm47XG4gICAgaGVhcFtpZHhdID0gaGVhcF9uZXh0O1xuICAgIGhlYXBfbmV4dCA9IGlkeDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmKGkpIHsgZHJvcE9iamVjdChpKTsgfVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl9pc191bmRlZmluZWQoaWR4KSB7XG4gICAgcmV0dXJuIGdldE9iamVjdChpZHgpID09PSB1bmRlZmluZWQgPyAxIDogMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fanN2YWxfZXEoYSwgYikge1xuICAgIHJldHVybiBnZXRPYmplY3QoYSkgPT09IGdldE9iamVjdChiKSA/IDEgOiAwO1xufVxuXG5mdW5jdGlvbiBmcmVlQm9hcmQocHRyKSB7XG5cbiAgICB3YXNtLl9fd2JnX2JvYXJkX2ZyZWUocHRyKTtcbn1cbi8qKlxuKiBSZXByZXNlbnRzIG9uZSBib2FyZCBnZW5lcmF0ZWQgYnkgcmFuZG9tIG1hcCBnZW5lcmF0b3IuXG4qL1xuZXhwb3J0IGNsYXNzIEJvYXJkIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoQm9hcmQucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG4gICAgICAgIGZyZWVCb2FyZChwdHIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogUmV0dXJucyB3aWR0aCBhcyBudW1iZXIgb2YgY2VsbHMgaW4gbnVtYmVyXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB3YXNtLmJvYXJkX3dpZHRoKHRoaXMucHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIGhlaWdodCBhcyBudW1iZXIgb2YgY2VsbHMgaW4gbnVtYmVyXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgaGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gd2FzbS5ib2FyZF9oZWlnaHQodGhpcy5wdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgY2VsbCBhdCBwb3NpdGlvbiAoeCwgeSkuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYXJnMFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFyZzFcbiAgICAqIEByZXR1cm5zIHtDZWxsfVxuICAgICovXG4gICAgYXQoYXJnMCwgYXJnMSkge1xuICAgICAgICByZXR1cm4gQ2VsbC5fX3dyYXAod2FzbS5ib2FyZF9hdCh0aGlzLnB0ciwgYXJnMCwgYXJnMSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgYSBib2FyZCBieSBzZXJpYWxpemluZyBhcyBKU09OLiBPbiBmYWlsdXJlLCBpdCByZXR1cm5zIGBOb25lYCAoYHVuZGVmaW5lZGAgaW5cbiAgICAqIEphdmFTY3JpcHQpXG4gICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICovXG4gICAgYXNfanNvbigpIHtcbiAgICAgICAgY29uc3QgcmV0cHRyID0gZ2xvYmFsQXJndW1lbnRQdHIoKTtcbiAgICAgICAgd2FzbS5ib2FyZF9hc19qc29uKHJldHB0ciwgdGhpcy5wdHIpO1xuICAgICAgICBjb25zdCBtZW0gPSBnZXRVaW50MzJNZW1vcnkoKTtcbiAgICAgICAgY29uc3QgcnVzdHB0ciA9IG1lbVtyZXRwdHIgLyA0XTtcbiAgICAgICAgY29uc3QgcnVzdGxlbiA9IG1lbVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgIGlmIChydXN0cHRyID09PSAwKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlYWxSZXQgPSBnZXRTdHJpbmdGcm9tV2FzbShydXN0cHRyLCBydXN0bGVuKS5zbGljZSgpO1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShydXN0cHRyLCBydXN0bGVuICogMSk7XG4gICAgICAgIHJldHVybiByZWFsUmV0O1xuXG4gICAgfVxufVxuXG5mdW5jdGlvbiBmcmVlQ2VsbChwdHIpIHtcblxuICAgIHdhc20uX193YmdfY2VsbF9mcmVlKHB0cik7XG59XG4vKipcbiogUmVwcmVzZW50cyBvbmUgY2VsbCBpbiBib2FyZC4gSW4gY29udHJhc3QgdG8gYGxhbmQ6OkxhbmRgLCBpdCBvbmx5IGNvbnRhaW5zIGl0cyBsYW5kIGtpbmQgYW5kXG4qIGFsdGl0dWRlIGluIG9yZGVyIHRvIHJlZHVjZSB0b3RhbCBtZW1vcnkgc2l6ZS5cbiovXG5leHBvcnQgY2xhc3MgQ2VsbCB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKENlbGwucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG4gICAgICAgIGZyZWVDZWxsKHB0cik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgZ2V0IGtpbmQoKSB7XG4gICAgICAgIHJldHVybiB3YXNtLl9fd2JnX2dldF9jZWxsX2tpbmQodGhpcy5wdHIpO1xuICAgIH1cbiAgICBzZXQga2luZChhcmcwKSB7XG4gICAgICAgIHJldHVybiB3YXNtLl9fd2JnX3NldF9jZWxsX2tpbmQodGhpcy5wdHIsIGFyZzApO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgYWx0aXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB3YXNtLl9fd2JnX2dldF9jZWxsX2FsdGl0dWRlKHRoaXMucHRyKTtcbiAgICB9XG4gICAgc2V0IGFsdGl0dWRlKGFyZzApIHtcbiAgICAgICAgcmV0dXJuIHdhc20uX193Ymdfc2V0X2NlbGxfYWx0aXR1ZGUodGhpcy5wdHIsIGFyZzApO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgY29sb3IgY29kZSBvZiBsYW5kIGFzIGAjcnJnZ2JiYCBmb3JtYXQgc3RyaW5nIGZyb20gbGFuZCBraW5kLlxuICAgICogV2hlbiBubyBjb2xvciBpcyBzZXQsIHJldHVybnMgYE5vbmVgLiBJdCBtZWFucyBgdW5kZWZpbmVkYCBpbiBKYXZhU2NyaXB0IHNpZGUuXG4gICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICovXG4gICAgY29sb3JfY29kZSgpIHtcbiAgICAgICAgY29uc3QgcmV0cHRyID0gZ2xvYmFsQXJndW1lbnRQdHIoKTtcbiAgICAgICAgd2FzbS5jZWxsX2NvbG9yX2NvZGUocmV0cHRyLCB0aGlzLnB0cik7XG4gICAgICAgIGNvbnN0IG1lbSA9IGdldFVpbnQzMk1lbW9yeSgpO1xuICAgICAgICBjb25zdCBydXN0cHRyID0gbWVtW3JldHB0ciAvIDRdO1xuICAgICAgICBjb25zdCBydXN0bGVuID0gbWVtW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgaWYgKHJ1c3RwdHIgPT09IDApIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVhbFJldCA9IGdldFN0cmluZ0Zyb21XYXNtKHJ1c3RwdHIsIHJ1c3RsZW4pLnNsaWNlKCk7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHJ1c3RwdHIsIHJ1c3RsZW4gKiAxKTtcbiAgICAgICAgcmV0dXJuIHJlYWxSZXQ7XG5cbiAgICB9XG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIFJHQiBjb2xvciBhcyB1MzIuIDB+OCBiaXRzIGZvciBCLCA5fjE2IGJpdHMgZm9yIEcsIDE3fjI0IGJpdHMgZm9yIFIuXG4gICAgKiBXaGVuIG5vIGNvbG9yIGlzIHNldCwgcmV0dXJucyBgTm9uZWAuIEl0IG1lYW5zIGB1bmRlZmluZWRgIGluIEphdmFTY3JpcHQgc2lkZS5cbiAgICAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICByZ2JfY29sb3IoKSB7XG4gICAgICAgIGNvbnN0IHJldHB0ciA9IGdsb2JhbEFyZ3VtZW50UHRyKCk7XG5cbiAgICAgICAgd2FzbS5jZWxsX3JnYl9jb2xvcihyZXRwdHIsIHRoaXMucHRyKTtcbiAgICAgICAgY29uc3QgcHJlc2VudCA9IGdldFVpbnQzMk1lbW9yeSgpW3JldHB0ciAvIDRdO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGdldFVpbnQzMk1lbW9yeSgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgcmV0dXJuIHByZXNlbnQgPT09IDAgPyB1bmRlZmluZWQgOiB2YWx1ZTtcblxuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgbGVnZW5kIG9mIGxhbmQgYXMgc3RyaW5nIGZyb20gbGFuZCBraW5kLlxuICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAqL1xuICAgIGxlZ2VuZCgpIHtcbiAgICAgICAgY29uc3QgcmV0cHRyID0gZ2xvYmFsQXJndW1lbnRQdHIoKTtcbiAgICAgICAgd2FzbS5jZWxsX2xlZ2VuZChyZXRwdHIsIHRoaXMucHRyKTtcbiAgICAgICAgY29uc3QgbWVtID0gZ2V0VWludDMyTWVtb3J5KCk7XG4gICAgICAgIGNvbnN0IHJ1c3RwdHIgPSBtZW1bcmV0cHRyIC8gNF07XG4gICAgICAgIGNvbnN0IHJ1c3RsZW4gPSBtZW1bcmV0cHRyIC8gNCArIDFdO1xuXG4gICAgICAgIGNvbnN0IHJlYWxSZXQgPSBnZXRTdHJpbmdGcm9tV2FzbShydXN0cHRyLCBydXN0bGVuKS5zbGljZSgpO1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShydXN0cHRyLCBydXN0bGVuICogMSk7XG4gICAgICAgIHJldHVybiByZWFsUmV0O1xuXG4gICAgfVxufVxuXG5mdW5jdGlvbiBmcmVlR2VuZXJhdG9yKHB0cikge1xuXG4gICAgd2FzbS5fX3diZ19nZW5lcmF0b3JfZnJlZShwdHIpO1xufVxuLyoqXG4qIFJlcHJlc2VudHMgcmFuZG9tIG1hcCBnZW5lcmF0b3IuIEluIGNvbnRyYXN0IHRvIGBnZW46OlJhbmRvbUJvYXJkR2VuYCwgaXQgb25seSBwcm92aWRlcyBsaW1pdGVkXG4qIGZ1bmN0aW9uYWxpdHkuIEl0IGNhbm5vdCBiZSBpbml0aWFsaXplZCB3aXRoIHNwZWNpZmljIHNlZWQuIEFuZCBtYXAgcmVzb2x1dGlvbiBpcyBhbHdheXMgZGV0ZWN0ZWRcbiogZnJvbSBpdHMgc2l6ZS5cbiovXG5leHBvcnQgY2xhc3MgR2VuZXJhdG9yIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLnB0cjtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuICAgICAgICBmcmVlR2VuZXJhdG9yKHB0cik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7R2VuZXJhdG9yfVxuICAgICovXG4gICAgc3RhdGljIG5ldygpIHtcbiAgICAgICAgcmV0dXJuIEdlbmVyYXRvci5fX3dyYXAod2FzbS5nZW5lcmF0b3JfbmV3KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEdlbmVyYXRlcyByYW5kb20gbWFwIGJvYXJkIHdpdGggZ2l2ZW4gd2lkdGggYW5kIGhlaWdodC4gUGFyYW1ldGVycyBhcmUgaW4gbnVtYmVyIG9mIGNlbGxzLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFyZzBcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhcmcxXG4gICAgKiBAcmV0dXJucyB7Qm9hcmR9XG4gICAgKi9cbiAgICBnZW5fYXV0byhhcmcwLCBhcmcxKSB7XG4gICAgICAgIHJldHVybiBCb2FyZC5fX3dyYXAod2FzbS5nZW5lcmF0b3JfZ2VuX2F1dG8odGhpcy5wdHIsIGFyZzAsIGFyZzEpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBHZW5lcmF0ZXMgcmFuZG9tIG1hcCBib2FyZCB3aXRoIGdpdmVuIHJlc29sdXRpb24sIHdpZHRoIGFuZCBoZWlnaHQuIFdpZHRoIGFuZCBoZWlnaHQgYXJlXG4gICAgKiBpbiBudW1iZXIgb2YgY2VsbHMuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYXJnMFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFyZzFcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhcmcyXG4gICAgKiBAcmV0dXJucyB7Qm9hcmR9XG4gICAgKi9cbiAgICBnZW4oYXJnMCwgYXJnMSwgYXJnMikge1xuICAgICAgICByZXR1cm4gQm9hcmQuX193cmFwKHdhc20uZ2VuZXJhdG9yX2dlbih0aGlzLnB0ciwgYXJnMCwgYXJnMSwgYXJnMikpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fdGhyb3cocHRyLCBsZW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0U3RyaW5nRnJvbVdhc20ocHRyLCBsZW4pKTtcbn1cblxuIiwiZnVuY3Rpb24gd2VicGFja0VtcHR5Q29udGV4dChyZXEpIHtcblx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdHRocm93IGU7XG59XG53ZWJwYWNrRW1wdHlDb250ZXh0LmtleXMgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFtdOyB9O1xud2VicGFja0VtcHR5Q29udGV4dC5yZXNvbHZlID0gd2VicGFja0VtcHR5Q29udGV4dDtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0VtcHR5Q29udGV4dDtcbndlYnBhY2tFbXB0eUNvbnRleHQuaWQgPSA0NjsiXSwic291cmNlUm9vdCI6IiJ9