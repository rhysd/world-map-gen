(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1:function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(30);class o{constructor(t){this.canvas=document.createElement("canvas"),this.canvas.className="screen",t.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d")}render(t){const e=window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect();this.canvas.width=n.width*e,this.canvas.height=n.height*e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath();const r=t.width(),i=t.height(),o=this.canvas.width/r,s=this.canvas.height/i,c=o>s?s:o,a=new Map,u=new Map;for(let e=0;e<r;e++)for(let n=0;n<i;n++){const r=t.at(e,n),i=r.kind;let o=a.get(i);if(void 0===o&&void 0!==(o=r.color_code())&&a.set(i,o),this.ctx.fillStyle=o,this.ctx.fillRect(e*c,n*c,c,c),!u.has(i)){const t=r.legend();u.set(i,{text:t,color:o})}}return this.ctx.stroke(),{legends:u}}}var s=n(32);class c{constructor(t){this.canvas=document.createElement("canvas"),this.canvas.className="screen",t.appendChild(this.canvas)}determineCellSize(t,e){const n=e+t,r=(this.canvas.height-200)/n*2,i=this.canvas.width/n*2/Math.sqrt(3);let o=Math.floor(r>i?i:r);return o%2==1&&o--,o>6?o:6}render(t){const e=window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect();this.canvas.width=n.width*e,this.canvas.height=n.height*e;const i=t.width(),o=t.height(),c=this.determineCellSize(i,o),a=new s.Point(this.canvas.width/2,c+198),u=new s.PixelView(this.canvas,a),d=new Map,h=new Map,l=new Map;let f=null;function w(t,e,n){const r=function(t,e){const n=h.get(t);if(void 0!==n)return n;let r=e.rgb_color();void 0===r&&(r=16777215);const i=(new s.CubeColor).getByHorizontalColor(r);return h.set(t,i),l.set(t,{text:e.legend(),color:e.color_code()}),i}(t,n),i=c+2*e,o=new s.CubeDimension(c,c,i);return new s.Cube(o,r,!1)}function p(t){const e=t.kind,n=t.altitude;if(l.has(e)||l.set(e,{text:t.legend(),color:t.color_code()}),e===r.b.Top)return null===f&&(f=w(e,n,t)),f;if(e===r.b.Town||e===r.b.Path)return w(e,n,t);const i=d.get(n);if(void 0!==i)return i;const o=w(e,n,t);return d.set(n,o),o}for(let e=0;e<i;e++)for(let n=0;n<o;n++){const r=p(t.at(e,n)),i=new s.Point3D(e*c,n*c,0);u.renderObject(r,i)}return{legends:l}}}(new class{constructor(){this.generator=r.a.new(),this.currentBoard=null;const t=document.getElementById("dimension-selector"),e=t[t.selectedIndex];this.dim=e.value,t.addEventListener("change",this.onVisualizationChange.bind(this)),this.widthInput=document.getElementById("width-input"),this.heightInput=document.getElementById("height-input"),this.screenRoot=document.getElementById("screen-root"),this.initRenderer(),this.paintButton=document.getElementById("paint-button"),this.paintButton.addEventListener("click",()=>{this.render()}),this.legends=document.getElementById("legends"),this.downloadJSONButton=document.getElementById("download-json-button"),this.downloadJSONButton.addEventListener("click",this.onDownloadJSON.bind(this))}getSize(){const t=parseInt(this.widthInput.value,10),e=parseInt(this.heightInput.value,10);if(!isNaN(t)&&!isNaN(e))return[t,e];if("3d"===this.dim)return[120,120];const n=this.screenRoot.getBoundingClientRect();if(isNaN(t)){if(isNaN(e)){const t=(n.height>n.width?n.height:n.width)/200;return[Math.floor(n.width/t),Math.floor(n.height/t)]}{const t=n.height/e;return[Math.floor(n.width/t),e]}}{const e=n.width/t;return[t,Math.floor(n.height/e)]}}initRenderer(){const t=this.screenRoot.firstChild;switch(null!==t&&this.screenRoot.removeChild(t),this.currentBoard=null,this.dim){case"2d":this.renderer=new o(this.screenRoot);break;case"3d":this.renderer=new c(this.screenRoot);break;default:throw new Error(`Unknown context ${this.dim}`)}}onDownloadJSON(t){if(null===this.currentBoard)return;const e=new Blob([this.currentBoard.as_json()],{type:"text/plain;charset=utf-8"});Object(i.saveAs)(e,"board.json")}onVisualizationChange(t){const e=t.target,n=e[e.selectedIndex].value;this.dim!==n&&(this.dim=n,this.initRenderer(),this.render())}render(){this.paintButton.textContent="Painting...",this.paintButton.classList.add("disabled"),this.downloadJSONButton.classList.add("disabled"),window.setTimeout(()=>{const t=Date.now(),[e,n]=this.getSize(),r=this.generator.gen_auto(e,n),i=this.renderer.render(r);this.legends.innerHTML="";for(const t of i.legends.values()){const e=document.createElement("div");e.className="legend";const n=document.createElement("div");n.className="legend-color",n.style.backgroundColor=t.color||"none",e.appendChild(n);const r=document.createElement("div");r.className="legend-name",r.textContent=t.text,e.appendChild(r),this.legends.appendChild(e)}this.currentBoard=r,this.paintButton.classList.remove("disabled"),this.paintButton.textContent="Generate",this.downloadJSONButton.classList.remove("disabled"),console.log("Consumed:",Date.now()-t)},0)}}).render()},2:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"g",function(){return g}),n.d(e,"c",function(){return m}),n.d(e,"j",function(){return b}),n.d(e,"d",function(){return B}),n.d(e,"e",function(){return C}),n.d(e,"f",function(){return x}),n.d(e,"i",function(){return y}),n.d(e,"h",function(){return N}),n.d(e,"m",function(){return E}),n.d(e,"k",function(){return R}),n.d(e,"l",function(){return k}),n.d(e,"a",function(){return O}),n.d(e,"n",function(){return S});var r=n(45);let i=new TextDecoder("utf-8"),o=null;function s(){return null!==o&&o.buffer===r.t.buffer||(o=new Uint8Array(r.t.buffer)),o}function c(t,e){return i.decode(s().subarray(t,t+e))}let a=null;function u(){return null===a&&(a=r.i()),a}let d=null;function h(){return null!==d&&d.buffer===r.t.buffer||(d=new Uint32Array(r.t.buffer)),d}Object.freeze({Low:0,Middle:1,High:2});const l=Object.freeze({Sea:0,Mountain:1,Forest:2,Plain:3,Town:4,Top:5,Highland:6,DeepSea:7,Path:8}),f=new Array(32);f.fill(void 0),f.push(void 0,null,!0,!1);let w=f.length;function p(t){w===f.length&&f.push(f.length+1);const e=w;return w=f[e],f[e]=t,e}function g(t,e){let n=c(t,e);return p(new Function(n))}function v(t){return f[t]}function m(t,e){return p(v(t).call(v(e)))}function b(t){return p(v(t).self)}function B(t){return p(v(t).crypto)}function C(t){return p(v(t).getRandomValues)}function _(t,e){return s().subarray(t/1,t/1+e)}function x(t,e,n){let r=_(e,n);v(t).getRandomValues(r)}function y(t,e){let r=c(t,e);return p(n(46)(r))}function N(t,e,n){let r=_(e,n);v(t).randomFillSync(r)}function E(t){var e;(e=t)<36||(f[e]=w,w=e)}function R(t){return void 0===v(t)?1:0}function k(t,e){return v(t)===v(e)?1:0}class O{static __wrap(t){const e=Object.create(O.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,function(t){r.c(t)}(t)}static new(){return O.__wrap(r.s())}gen_auto(t,e){return I.__wrap(r.r(this.ptr,t,e))}gen(t,e,n){return I.__wrap(r.q(this.ptr,t,e,n))}}class I{static __wrap(t){const e=Object.create(I.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,function(t){r.a(t)}(t)}width(){return r.m(this.ptr)}height(){return r.l(this.ptr)}at(t,e){return M.__wrap(r.k(this.ptr,t,e))}as_json(){const t=u();r.j(t,this.ptr);const e=h(),n=e[t/4],i=e[t/4+1];if(0===n)return;const o=c(n,i).slice();return r.h(n,1*i),o}}class M{static __wrap(t){const e=Object.create(M.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,function(t){r.b(t)}(t)}get kind(){return r.e(this.ptr)}set kind(t){return r.g(this.ptr,t)}get altitude(){return r.d(this.ptr)}set altitude(t){return r.f(this.ptr,t)}color_code(){const t=u();r.n(t,this.ptr);const e=h(),n=e[t/4],i=e[t/4+1];if(0===n)return;const o=c(n,i).slice();return r.h(n,1*i),o}rgb_color(){const t=u();r.p(t,this.ptr);const e=h()[t/4],n=h()[t/4+1];return 0===e?void 0:n}legend(){const t=u();r.o(t,this.ptr);const e=h(),n=e[t/4],i=e[t/4+1],o=c(n,i).slice();return r.h(n,1*i),o}}function S(t,e){throw new Error(c(t,e))}},45:function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(2);r.u()},46:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=46}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi8yZC50cyIsIndlYnBhY2s6Ly8vLi8zZC50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi4vcGtnL3dvcmxkX21hcF9nZW4uanMiLCJ3ZWJwYWNrOi8vLy4uL3BrZyBzeW5jIl0sIm5hbWVzIjpbIlJlbmRlcmVyMkQiLCJbb2JqZWN0IE9iamVjdF0iLCJyb290IiwidGhpcyIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZENoaWxkIiwiY3R4IiwiZ2V0Q29udGV4dCIsImJvYXJkIiwiZHByIiwid2luZG93IiwiZGV2aWNlUGl4ZWxSYXRpbyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImNsZWFyUmVjdCIsImJlZ2luUGF0aCIsImNlbGxXaWR0aCIsImNlbGxIZWlnaHQiLCJjZWxsU2l6ZSIsImNvbG9ycyIsIk1hcCIsImxlZ2VuZHMiLCJ4IiwieSIsImNlbGwiLCJhdCIsImtpbmQiLCJjb2xvciIsImdldCIsInVuZGVmaW5lZCIsImNvbG9yX2NvZGUiLCJzZXQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImhhcyIsInRleHQiLCJsZWdlbmQiLCJzdHJva2UiLCJfM2RfUmVuZGVyZXIzRCIsImJvdGgiLCJmcm9tSGVpZ2h0IiwiZnJvbVdpZHRoIiwiTWF0aCIsInNxcnQiLCJmbG9vciIsImRldGVybWluZUNlbGxTaXplIiwicG9pbnQiLCJvYmVsaXNrIiwicGl4ZWxWaWV3IiwiY2FjaGUiLCJ0b3BDdWJlIiwiY2FsY0N1YmUiLCJhbHQiLCJjYWNoZWQiLCJyZ2IiLCJyZ2JfY29sb3IiLCJnZXRCeUhvcml6b250YWxDb2xvciIsImtpbmRDb2xvciIsImRpbSIsImN1YmVBdCIsImFsdGl0dWRlIiwid29ybGRfbWFwX2dlbiIsIlRvcCIsIlRvd24iLCJQYXRoIiwiY3ViZSIsInB0IiwicmVuZGVyT2JqZWN0IiwiZ2VuZXJhdG9yIiwibmV3IiwiY3VycmVudEJvYXJkIiwic2VsZWN0b3IiLCJnZXRFbGVtZW50QnlJZCIsIm9wdGlvbiIsInNlbGVjdGVkSW5kZXgiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblZpc3VhbGl6YXRpb25DaGFuZ2UiLCJiaW5kIiwid2lkdGhJbnB1dCIsImhlaWdodElucHV0Iiwic2NyZWVuUm9vdCIsImluaXRSZW5kZXJlciIsInBhaW50QnV0dG9uIiwicmVuZGVyIiwiZG93bmxvYWRKU09OQnV0dG9uIiwib25Eb3dubG9hZEpTT04iLCJwYXJzZUludCIsImlzTmFOIiwiY2VsbFBpeCIsInByZXYiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJyZW5kZXJlciIsIkVycm9yIiwiXyIsImJsb2IiLCJCbG9iIiwiYXNfanNvbiIsInR5cGUiLCJPYmplY3QiLCJGaWxlU2F2ZXJfbWluIiwiZXZlbnQiLCJ0YXJnZXQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldFRpbWVvdXQiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJnZXRTaXplIiwiZ2VuX2F1dG8iLCJyZW5kZXJlZCIsImlubmVySFRNTCIsInZhbHVlcyIsIml0ZW0iLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsIm5hbWUiLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiTGFuZEtpbmQiLCJfX3diZ19uZXdfYmM4OTBkZjNlNWU2YTkxZCIsIl9fd2JnX2NhbGxfZTE1YjZhYTBjNmQzYzkzZiIsIl9fd2JnX3NlbGZfOTVhZDNmMWNkZGQ1YWNjYyIsIl9fd2JnX2NyeXB0b19jOTNjYzVhMTQ3ZTM1NDIyIiwiX193YmdfZ2V0UmFuZG9tVmFsdWVzXzU4YjQ2NDE2ZWE3YTMzYTIiLCJfX3diZ19nZXRSYW5kb21WYWx1ZXNfYTNhM2MyZGQ1NDk0ZmQzOSIsIl9fd2JnX3JlcXVpcmVfMzZhODk1ZjBhNGVhMDUyOSIsIl9fd2JnX3JhbmRvbUZpbGxTeW5jX2Y5Y2I3NTMxZDljMGIxNDQiLCJfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZiIsIl9fd2JpbmRnZW5faXNfdW5kZWZpbmVkIiwiX193YmluZGdlbl9qc3ZhbF9lcSIsIkdlbmVyYXRvciIsIl9fd2JpbmRnZW5fdGhyb3ciLCJfd29ybGRfbWFwX2dlbl9iZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiY2FjaGVkVGV4dERlY29kZXIiLCJUZXh0RGVjb2RlciIsImNhY2hlZ2V0VWludDhNZW1vcnkiLCJnZXRVaW50OE1lbW9yeSIsImJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJnZXRTdHJpbmdGcm9tV2FzbSIsInB0ciIsImxlbiIsImRlY29kZSIsInN1YmFycmF5IiwiY2FjaGVkR2xvYmFsQXJndW1lbnRQdHIiLCJnbG9iYWxBcmd1bWVudFB0ciIsImNhY2hlZ2V0VWludDMyTWVtb3J5IiwiZ2V0VWludDMyTWVtb3J5IiwiVWludDMyQXJyYXkiLCJmcmVlemUiLCJMb3ciLCJNaWRkbGUiLCJIaWdoIiwiU2VhIiwiTW91bnRhaW4iLCJGb3Jlc3QiLCJQbGFpbiIsIkhpZ2hsYW5kIiwiRGVlcFNlYSIsImhlYXAiLCJBcnJheSIsImZpbGwiLCJwdXNoIiwiaGVhcF9uZXh0IiwibGVuZ3RoIiwiYWRkSGVhcE9iamVjdCIsIm9iaiIsImlkeCIsImFyZzAiLCJhcmcxIiwidmFyZzAiLCJGdW5jdGlvbiIsImdldE9iamVjdCIsImNhbGwiLCJzZWxmIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiZ2V0QXJyYXlVOEZyb21XYXNtIiwiYXJnMiIsInZhcmcxIiwicmFuZG9tRmlsbFN5bmMiLCJpIiwiYSIsImIiLCJjcmVhdGUiLCJwcm90b3R5cGUiLCJmcmVlR2VuZXJhdG9yIiwiX193cmFwIiwiQm9hcmQiLCJmcmVlQm9hcmQiLCJDZWxsIiwicmV0cHRyIiwibWVtIiwicnVzdHB0ciIsInJ1c3RsZW4iLCJyZWFsUmV0Iiwic2xpY2UiLCJmcmVlQ2VsbCIsInByZXNlbnQiLCJ3ZWJwYWNrRW1wdHlDb250ZXh0IiwicmVxIiwiZSIsImNvZGUiLCJrZXlzIiwicmVzb2x2ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJpZCJdLCJtYXBwaW5ncyI6ImtIQUdlLE1BQU1BLEVBSWpCQyxZQUFZQyxHQUNSQyxLQUFLQyxPQUFTQyxTQUFTQyxjQUFjLFVBQ3JDSCxLQUFLQyxPQUFPRyxVQUFZLFNBQ3hCTCxFQUFLTSxZQUFZTCxLQUFLQyxRQUV0QkQsS0FBS00sSUFBTU4sS0FBS0MsT0FBT00sV0FBVyxNQUd0Q1QsT0FBT1UsR0FDSCxNQUFNQyxFQUFNQyxPQUFPQyxrQkFBb0IsRUFDakNDLEVBQU9aLEtBQUtDLE9BQU9ZLHdCQUN6QmIsS0FBS0MsT0FBT2EsTUFBUUYsRUFBS0UsTUFBUUwsRUFDakNULEtBQUtDLE9BQU9jLE9BQVNILEVBQUtHLE9BQVNOLEVBR25DVCxLQUFLTSxJQUFJVSxVQUFVLEVBQUcsRUFBR2hCLEtBQUtDLE9BQU9hLE1BQU9kLEtBQUtDLE9BQU9jLFFBRXhEZixLQUFLTSxJQUFJVyxZQUVULE1BQU1ILEVBQVFOLEVBQU1NLFFBQ2RDLEVBQVNQLEVBQU1PLFNBQ2ZHLEVBQVlsQixLQUFLQyxPQUFPYSxNQUFRQSxFQUNoQ0ssRUFBYW5CLEtBQUtDLE9BQU9jLE9BQVNBLEVBQ2xDSyxFQUFXRixFQUFZQyxFQUFhQSxFQUFhRCxFQUVqREcsRUFBUyxJQUFJQyxJQUNiQyxFQUFVLElBQUlELElBQ3BCLElBQUssSUFBSUUsRUFBSSxFQUFHQSxFQUFJVixFQUFPVSxJQUN2QixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSVYsRUFBUVUsSUFBSyxDQUM3QixNQUFNQyxFQUFPbEIsRUFBTW1CLEdBQUdILEVBQUdDLEdBQ25CRyxFQUFPRixFQUFLRSxLQUNsQixJQUFJQyxFQUFRUixFQUFPUyxJQUFJRixHQVN2QixRQVJjRyxJQUFWRixRQUVjRSxLQURkRixFQUFRSCxFQUFLTSxlQUVUWCxFQUFPWSxJQUFJTCxFQUFNQyxHQUd6QjdCLEtBQUtNLElBQUk0QixVQUFZTCxFQUNyQjdCLEtBQUtNLElBQUk2QixTQUFTWCxFQUFJSixFQUFVSyxFQUFJTCxFQUFVQSxFQUFVQSxJQUNuREcsRUFBUWEsSUFBSVIsR0FBTyxDQUNwQixNQUFNUyxFQUFPWCxFQUFLWSxTQUNsQmYsRUFBUVUsSUFBSUwsRUFBTSxDQUFFUyxPQUFNUixXQU90QyxPQUZBN0IsS0FBS00sSUFBSWlDLFNBRUYsQ0FBRWhCLHdCQ3BERixNQUFNaUIsRUFHakIxQyxZQUFZQyxHQUNSQyxLQUFLQyxPQUFTQyxTQUFTQyxjQUFjLFVBQ3JDSCxLQUFLQyxPQUFPRyxVQUFZLFNBQ3hCTCxFQUFLTSxZQUFZTCxLQUFLQyxRQUcxQkgsa0JBQWtCZ0IsRUFBZUMsR0FDN0IsTUFBTTBCLEVBQU8xQixFQUFTRCxFQUNoQjRCLEdBQWUxQyxLQUFLQyxPQUFPYyxPQUFTLEtBQU8wQixFQUFRLEVBQ25ERSxFQUFjM0MsS0FBS0MsT0FBT2EsTUFBUTJCLEVBQVEsRUFBS0csS0FBS0MsS0FBSyxHQUMvRCxJQUFJekIsRUFBV3dCLEtBQUtFLE1BQU1KLEVBQWFDLEVBQVlBLEVBQVlELEdBSS9ELE9BSEl0QixFQUFXLEdBQU0sR0FDakJBLElBRUdBLEVBQVcsRUFBSUEsRUFBVyxFQUdyQ3RCLE9BQU9VLEdBQ0gsTUFBTUMsRUFBTUMsT0FBT0Msa0JBQW9CLEVBQ2pDQyxFQUFPWixLQUFLQyxPQUFPWSx3QkFDekJiLEtBQUtDLE9BQU9hLE1BQVFGLEVBQUtFLE1BQVFMLEVBQ2pDVCxLQUFLQyxPQUFPYyxPQUFTSCxFQUFLRyxPQUFTTixFQUVuQyxNQUFNSyxFQUFRTixFQUFNTSxRQUNkQyxFQUFTUCxFQUFNTyxTQUNmSyxFQUFXcEIsS0FBSytDLGtCQUFrQmpDLEVBQU9DLEdBRXpDaUMsRUFBUSxJQUFJQyxFQUFBLE1BQU1qRCxLQUFLQyxPQUFPYSxNQUFRLEVBQUdNLEVBQVcsS0FDcEQ4QixFQUFZLElBQUlELEVBQUEsVUFBVWpELEtBQUtDLE9BQVErQyxHQUV2Q0csRUFBUSxJQUFJN0IsSUFDWkQsRUFBUyxJQUFJQyxJQUNiQyxFQUFVLElBQUlELElBQ3BCLElBQUk4QixFQUF1QixLQW9CM0IsU0FBU0MsRUFBU3pCLEVBQWdCMEIsRUFBYTVCLEdBQzNDLE1BQU1HLEVBbkJWLFNBQW1CRCxFQUFnQkYsR0FDL0IsTUFBTTZCLEVBQVNsQyxFQUFPUyxJQUFJRixHQUMxQixRQUFlRyxJQUFYd0IsRUFDQSxPQUFPQSxFQUVYLElBQUlDLEVBQU05QixFQUFLK0IsaUJBQ0gxQixJQUFSeUIsSUFDQUEsRUFBTSxVQUVWLE1BQU0zQixHQUFRLElBQUlvQixFQUFBLFdBQVlTLHFCQUFxQkYsR0FNbkQsT0FMQW5DLEVBQU9ZLElBQUlMLEVBQU1DLEdBR2pCTixFQUFRVSxJQUFJTCxFQUFNLENBQUVTLEtBQU1YLEVBQUtZLFNBQVVULE1BQU9ILEVBQUtNLGVBRTlDSCxFQUlPOEIsQ0FBVS9CLEVBQU1GLEdBQ3hCWCxFQUFTSyxFQUFpQixFQUFOa0MsRUFDcEJNLEVBQU0sSUFBSVgsRUFBQSxjQUFjN0IsRUFBVUEsRUFBVUwsR0FDbEQsT0FBTyxJQUFJa0MsRUFBQSxLQUFLVyxFQUFLL0IsR0FBbUIsR0FHNUMsU0FBU2dDLEVBQU9uQyxHQUNaLE1BQU1FLEVBQU9GLEVBQUtFLEtBQ1owQixFQUFNNUIsRUFBS29DLFNBT2pCLEdBTEt2QyxFQUFRYSxJQUFJUixJQUViTCxFQUFRVSxJQUFJTCxFQUFNLENBQUVTLEtBQU1YLEVBQUtZLFNBQVVULE1BQU9ILEVBQUtNLGVBR3JESixJQUFTbUMsRUFBQSxFQUFTQyxJQUlsQixPQUhnQixPQUFaWixJQUNBQSxFQUFVQyxFQUFTekIsRUFBTTBCLEVBQUs1QixJQUUzQjBCLEVBR1gsR0FBSXhCLElBQVNtQyxFQUFBLEVBQVNFLE1BQVFyQyxJQUFTbUMsRUFBQSxFQUFTRyxLQUM1QyxPQUFPYixFQUFTekIsRUFBTTBCLEVBQUs1QixHQUcvQixNQUFNNkIsRUFBU0osRUFBTXJCLElBQUl3QixHQUN6QixRQUFldkIsSUFBWHdCLEVBQ0EsT0FBT0EsRUFHWCxNQUFNWSxFQUFPZCxFQUFTekIsRUFBTTBCLEVBQUs1QixHQUVqQyxPQURBeUIsRUFBTWxCLElBQUlxQixFQUFLYSxHQUNSQSxFQUdYLElBQUssSUFBSTNDLEVBQUksRUFBR0EsRUFBSVYsRUFBT1UsSUFDdkIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlWLEVBQVFVLElBQUssQ0FDN0IsTUFBTTBDLEVBQU9OLEVBQU9yRCxFQUFNbUIsR0FBR0gsRUFBR0MsSUFDMUIyQyxFQUFLLElBQUluQixFQUFBLFFBQVF6QixFQUFJSixFQUFVSyxFQUFJTCxFQUFVLEdBQ25EOEIsRUFBVW1CLGFBQWFGLEVBQU1DLEdBSXJDLE1BQU8sQ0FDSDdDLGFDcEdBLElBQUksTUFZWnpCLGNBQ0lFLEtBQUtzRSxVQUFZUCxFQUFBLEVBQVVRLE1BQzNCdkUsS0FBS3dFLGFBQWUsS0FFcEIsTUFBTUMsRUFBV3ZFLFNBQVN3RSxlQUFlLHNCQUNuQ0MsRUFBU0YsRUFBU0EsRUFBU0csZUFDakM1RSxLQUFLNEQsSUFBTWUsRUFBT0UsTUFDbEJKLEVBQVNLLGlCQUFpQixTQUFVOUUsS0FBSytFLHNCQUFzQkMsS0FBS2hGLE9BRXBFQSxLQUFLaUYsV0FBYS9FLFNBQVN3RSxlQUFlLGVBQzFDMUUsS0FBS2tGLFlBQWNoRixTQUFTd0UsZUFBZSxnQkFDM0MxRSxLQUFLbUYsV0FBYWpGLFNBQVN3RSxlQUFlLGVBRTFDMUUsS0FBS29GLGVBRUxwRixLQUFLcUYsWUFBY25GLFNBQVN3RSxlQUFlLGdCQUMzQzFFLEtBQUtxRixZQUFZUCxpQkFBaUIsUUFBUyxLQUN2QzlFLEtBQUtzRixXQUdUdEYsS0FBS3VCLFFBQVVyQixTQUFTd0UsZUFBZSxXQUV2QzFFLEtBQUt1RixtQkFBcUJyRixTQUFTd0UsZUFBZSx3QkFDbEQxRSxLQUFLdUYsbUJBQW1CVCxpQkFBaUIsUUFBUzlFLEtBQUt3RixlQUFlUixLQUFLaEYsT0FHL0VGLFVBQ0ksTUFBTWdCLEVBQVEyRSxTQUFTekYsS0FBS2lGLFdBQVdKLE1BQU8sSUFDeEM5RCxFQUFTMEUsU0FBU3pGLEtBQUtrRixZQUFZTCxNQUFPLElBQ2hELElBQUthLE1BQU01RSxLQUFXNEUsTUFBTTNFLEdBQ3hCLE1BQU8sQ0FBQ0QsRUFBT0MsR0FHbkIsR0FBaUIsT0FBYmYsS0FBSzRELElBQ0wsTUFBTyxDQUFDLElBQUssS0FHakIsTUFBTWhELEVBQU9aLEtBQUttRixXQUFXdEUsd0JBRTdCLEdBQUs2RSxNQUFNNUUsR0FJSixJQUFLNEUsTUFBTTNFLEdBSXNDLENBQ3BELE1BQ000RSxHQURNL0UsRUFBS0csT0FBU0gsRUFBS0UsTUFBUUYsRUFBS0csT0FBU0gsRUFBS0UsT0FDcEMsSUFDdEIsTUFBTyxDQUFDOEIsS0FBS0UsTUFBTWxDLEVBQUtFLE1BQVE2RSxHQUFVL0MsS0FBS0UsTUFBTWxDLEVBQUtHLE9BQVM0RSxJQVA1QyxDQUV2QixNQUFNQSxFQUFVL0UsRUFBS0csT0FBU0EsRUFDOUIsTUFBTyxDQUFDNkIsS0FBS0UsTUFBTWxDLEVBQUtFLE1BQVE2RSxHQUFVNUUsSUFQM0IsQ0FFZixNQUFNNEUsRUFBVS9FLEVBQUtFLE1BQVFBLEVBQzdCLE1BQU8sQ0FBQ0EsRUFBTzhCLEtBQUtFLE1BQU1sQyxFQUFLRyxPQUFTNEUsS0FZaEQ3RixlQUNJLE1BQU04RixFQUFPNUYsS0FBS21GLFdBQVdVLFdBTTdCLE9BTGEsT0FBVEQsR0FDQTVGLEtBQUttRixXQUFXVyxZQUFZRixHQUVoQzVGLEtBQUt3RSxhQUFlLEtBRVp4RSxLQUFLNEQsS0FDVCxJQUFLLEtBQ0Q1RCxLQUFLK0YsU0FBVyxJQUFJbEcsRUFBV0csS0FBS21GLFlBQ3BDLE1BQ0osSUFBSyxLQUNEbkYsS0FBSytGLFNBQVcsSUFBSXZELEVBQVd4QyxLQUFLbUYsWUFDcEMsTUFDSixRQUNJLE1BQU0sSUFBSWEseUJBQXlCaEcsS0FBSzRELFFBSXBEOUQsZUFBZW1HLEdBQ1gsR0FBMEIsT0FBdEJqRyxLQUFLd0UsYUFDTCxPQUVKLE1BQU0wQixFQUFPLElBQUlDLEtBQUssQ0FBQ25HLEtBQUt3RSxhQUFhNEIsV0FBWSxDQUFFQyxLQUFNLDZCQUM3REMsT0FBQUMsRUFBQSxPQUFBRCxDQUFPSixFQUFNLGNBR2pCcEcsc0JBQXNCMEcsR0FDbEIsTUFBTS9CLEVBQVcrQixFQUFNQyxPQUVqQjdDLEVBRFNhLEVBQVNBLEVBQVNHLGVBQ2RDLE1BQ2Y3RSxLQUFLNEQsTUFBUUEsSUFHakI1RCxLQUFLNEQsSUFBTUEsRUFDWDVELEtBQUtvRixlQUNMcEYsS0FBS3NGLFVBR1R4RixTQU9JRSxLQUFLcUYsWUFBWXFCLFlBQWMsY0FDL0IxRyxLQUFLcUYsWUFBWXNCLFVBQVVDLElBQUksWUFDL0I1RyxLQUFLdUYsbUJBQW1Cb0IsVUFBVUMsSUFBSSxZQUV0Q2xHLE9BQU9tRyxXQUFXLEtBQ2QsTUFBTUMsRUFBUUMsS0FBS0MsT0FDWmxHLEVBQU9DLEdBQVVmLEtBQUtpSCxVQUN2QnpHLEVBQVFSLEtBQUtzRSxVQUFVNEMsU0FBU3BHLEVBQU9DLEdBQ3ZDb0csRUFBV25ILEtBQUsrRixTQUFTVCxPQUFPOUUsR0FFdENSLEtBQUt1QixRQUFRNkYsVUFBWSxHQUN6QixJQUFLLE1BQU05RSxLQUFVNkUsRUFBUzVGLFFBQVE4RixTQUFVLENBQzVDLE1BQU1DLEVBQU9wSCxTQUFTQyxjQUFjLE9BQ3BDbUgsRUFBS2xILFVBQVksU0FFakIsTUFBTXlCLEVBQVEzQixTQUFTQyxjQUFjLE9BQ3JDMEIsRUFBTXpCLFVBQVksZUFDbEJ5QixFQUFNMEYsTUFBTUMsZ0JBQWtCbEYsRUFBT1QsT0FBUyxPQUM5Q3lGLEVBQUtqSCxZQUFZd0IsR0FFakIsTUFBTTRGLEVBQU92SCxTQUFTQyxjQUFjLE9BQ3BDc0gsRUFBS3JILFVBQVksY0FDakJxSCxFQUFLZixZQUFjcEUsRUFBT0QsS0FDMUJpRixFQUFLakgsWUFBWW9ILEdBRWpCekgsS0FBS3VCLFFBQVFsQixZQUFZaUgsR0FFN0J0SCxLQUFLd0UsYUFBZWhFLEVBR3BCUixLQUFLcUYsWUFBWXNCLFVBQVVlLE9BQU8sWUFDbEMxSCxLQUFLcUYsWUFBWXFCLFlBQWMsV0FDL0IxRyxLQUFLdUYsbUJBQW1Cb0IsVUFBVWUsT0FBTyxZQUN6Q0MsUUFBUUMsSUFBSSxZQUFhYixLQUFLQyxNQUFRRixJQUN2QyxNQUlQeEIseUNDNUpKdUMsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQUMsSUFBQUgsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQUUsSUFBQUosRUFBQUMsRUFBQUMsRUFBQSxzQkFBQUcsSUFBQUwsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQUksSUFBQU4sRUFBQUMsRUFBQUMsRUFBQSxzQkFBQUssSUFBQVAsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQU0sSUFBQVIsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQU8sSUFBQVQsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQVEsSUFBQVYsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQVMsSUFBQVgsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQVUsSUFBQVosRUFBQUMsRUFBQUMsRUFBQSxzQkFBQVcsSUFBQWIsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQVksSUFBQWQsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQWEsSUFBQWYsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQWMsSUFBQSxJQUFBQyxFQUFBakIsRUFBQSxJQUdBLElBQUFrQixFQUFBLElBQUFDLFlBQUEsU0FFQUMsRUFBQSxLQUNBLFNBQUFDLElBSUEsT0FIQSxPQUFBRCxLQUFBRSxTQUF1RUwsRUFBQSxFQUFXSyxTQUNsRkYsRUFBQSxJQUFBRyxXQUE2Q04sRUFBQSxFQUFXSyxTQUV4REYsRUFHQSxTQUFBSSxFQUFBQyxFQUFBQyxHQUNBLE9BQUFSLEVBQUFTLE9BQUFOLElBQUFPLFNBQUFILElBQUFDLElBR0EsSUFBQUcsRUFBQSxLQUNBLFNBQUFDLElBSUEsT0FIQSxPQUFBRCxJQUNBQSxFQUFrQ1osRUFBQSxLQUVsQ1ksRUFHQSxJQUFBRSxFQUFBLEtBQ0EsU0FBQUMsSUFJQSxPQUhBLE9BQUFELEtBQUFULFNBQXlFTCxFQUFBLEVBQVdLLFNBQ3BGUyxFQUFBLElBQUFFLFlBQStDaEIsRUFBQSxFQUFXSyxTQUUxRFMsRUFLT3RELE9BQUF5RCxPQUFBLENBQWtDQyxJQUFBLEVBQUFDLE9BQUEsRUFBQUMsS0FBQSxJQUFsQyxNQUtBbEMsRUFBQTFCLE9BQUF5RCxPQUFBLENBQWdDSSxJQUFBLEVBQUFDLFNBQUEsRUFBQUMsT0FBQSxFQUFBQyxNQUFBLEVBQUFyRyxLQUFBLEVBQUFELElBQUEsRUFBQXVHLFNBQUEsRUFBQUMsUUFBQSxFQUFBdEcsS0FBQSxJQUV2Q3VHLEVBQUEsSUFBQUMsTUFBQSxJQUVBRCxFQUFBRSxVQUFBNUksR0FFQTBJLEVBQUFHLFVBQUE3SSxFQUFBLFlBRUEsSUFBQThJLEVBQUFKLEVBQUFLLE9BRUEsU0FBQUMsRUFBQUMsR0FDQUgsSUFBQUosRUFBQUssUUFBQUwsRUFBQUcsS0FBQUgsRUFBQUssT0FBQSxHQUNBLE1BQUFHLEVBQUFKLEVBSUEsT0FIQUEsRUFBQUosRUFBQVEsR0FFQVIsRUFBQVEsR0FBQUQsRUFDQUMsRUFHTyxTQUFBaEQsRUFBQWlELEVBQUFDLEdBQ1AsSUFBQUMsRUFBQS9CLEVBQUE2QixFQUFBQyxHQUNBLE9BQUFKLEVBQUEsSUFBQU0sU0FBQUQsSUFHQSxTQUFBRSxFQUFBTCxHQUF5QixPQUFBUixFQUFBUSxHQUVsQixTQUFBL0MsRUFBQWdELEVBQUFDLEdBQ1AsT0FBQUosRUFBQU8sRUFBQUosR0FBQUssS0FBQUQsRUFBQUgsS0FHTyxTQUFBaEQsRUFBQStDLEdBQ1AsT0FBQUgsRUFBQU8sRUFBQUosR0FBQU0sTUFHTyxTQUFBcEQsRUFBQThDLEdBQ1AsT0FBQUgsRUFBQU8sRUFBQUosR0FBQU8sUUFHTyxTQUFBcEQsRUFBQTZDLEdBQ1AsT0FBQUgsRUFBQU8sRUFBQUosR0FBQVEsaUJBR0EsU0FBQUMsRUFBQXJDLEVBQUFDLEdBQ0EsT0FBQUwsSUFBQU8sU0FBQUgsRUFBQSxFQUFBQSxFQUFBLEVBQUFDLEdBR08sU0FBQWpCLEVBQUE0QyxFQUFBQyxFQUFBUyxHQUNQLElBQUFDLEVBQUFGLEVBQUFSLEVBQUFTLEdBQ0FOLEVBQUFKLEdBQUFRLGdCQUFBRyxHQUdPLFNBQUF0RCxFQUFBMkMsRUFBQUMsR0FDUCxJQUFBQyxFQUFBL0IsRUFBQTZCLEVBQUFDLEdBQ0EsT0FBQUosRUFBeUJsRCxFQUFBLEdBQUFBLENBQVF1RCxJQUcxQixTQUFBNUMsRUFBQTBDLEVBQUFDLEVBQUFTLEdBQ1AsSUFBQUMsRUFBQUYsRUFBQVIsRUFBQVMsR0FDQU4sRUFBQUosR0FBQVksZUFBQUQsR0FTTyxTQUFBcEQsRUFBQXNELEdBTlAsSUFBQWQsS0FNK0NjLEdBTC9DLEtBQ0F0QixFQUFBUSxHQUFBSixFQUNBQSxFQUFBSSxHQUtPLFNBQUF2QyxFQUFBdUMsR0FDUCxZQUFBbEosSUFBQXVKLEVBQUFMLEdBQUEsSUFHTyxTQUFBdEMsRUFBQXFELEVBQUFDLEdBQ1AsT0FBQVgsRUFBQVUsS0FBQVYsRUFBQVcsR0FBQSxJQVlPLE1BQUFyRCxFQUVQOUksY0FBQXdKLEdBQ0EsTUFBQTBCLEVBQUExRSxPQUFBNEYsT0FBQXRELEVBQUF1RCxXQUdBLE9BRkFuQixFQUFBMUIsTUFFQTBCLEVBR0FsTCxPQUNBLE1BQUF3SixFQUFBdEosS0FBQXNKLElBQ0F0SixLQUFBc0osSUFBQSxFQXBCQSxTQUFBQSxHQUVJUixFQUFBLEVBQXlCUSxHQW1CN0I4QyxDQUFBOUMsR0FNQXhKLGFBQ0EsT0FBQThJLEVBQUF5RCxPQUFnQ3ZELEVBQUEsS0FRaENoSixTQUFBb0wsRUFBQUMsR0FDQSxPQUFBbUIsRUFBQUQsT0FBNEJ2RCxFQUFBLEVBQXVCOUksS0FBQXNKLElBQUE0QixFQUFBQyxJQVVuRHJMLElBQUFvTCxFQUFBQyxFQUFBUyxHQUNBLE9BQUFVLEVBQUFELE9BQTRCdkQsRUFBQSxFQUFrQjlJLEtBQUFzSixJQUFBNEIsRUFBQUMsRUFBQVMsS0FXdkMsTUFBQVUsRUFFUHhNLGNBQUF3SixHQUNBLE1BQUEwQixFQUFBMUUsT0FBQTRGLE9BQUFJLEVBQUFILFdBR0EsT0FGQW5CLEVBQUExQixNQUVBMEIsRUFHQWxMLE9BQ0EsTUFBQXdKLEVBQUF0SixLQUFBc0osSUFDQXRKLEtBQUFzSixJQUFBLEVBbEJBLFNBQUFBLEdBRUlSLEVBQUEsRUFBcUJRLEdBaUJ6QmlELENBQUFqRCxHQU9BeEosUUFDQSxPQUFlZ0osRUFBQSxFQUFnQjlJLEtBQUFzSixLQU0vQnhKLFNBQ0EsT0FBZWdKLEVBQUEsRUFBaUI5SSxLQUFBc0osS0FRaEN4SixHQUFBb0wsRUFBQUMsR0FDQSxPQUFBcUIsRUFBQUgsT0FBMkJ2RCxFQUFBLEVBQWE5SSxLQUFBc0osSUFBQTRCLEVBQUFDLElBT3hDckwsVUFDQSxNQUFBMk0sRUFBQTlDLElBQ1FiLEVBQUEsRUFBa0IyRCxFQUFBek0sS0FBQXNKLEtBQzFCLE1BQUFvRCxFQUFBN0MsSUFDQThDLEVBQUFELEVBQUFELEVBQUEsR0FDQUcsRUFBQUYsRUFBQUQsRUFBQSxLQUNBLE9BQUFFLEVBQUEsT0FDQSxNQUFBRSxFQUFBeEQsRUFBQXNELEVBQUFDLEdBQUFFLFFBRUEsT0FEUWhFLEVBQUEsRUFBb0I2RCxFQUFBLEVBQUFDLEdBQzVCQyxHQWFPLE1BQUFMLEVBRVAxTSxjQUFBd0osR0FDQSxNQUFBMEIsRUFBQTFFLE9BQUE0RixPQUFBTSxFQUFBTCxXQUdBLE9BRkFuQixFQUFBMUIsTUFFQTBCLEVBR0FsTCxPQUNBLE1BQUF3SixFQUFBdEosS0FBQXNKLElBQ0F0SixLQUFBc0osSUFBQSxFQW5CQSxTQUFBQSxHQUVJUixFQUFBLEVBQW9CUSxHQWtCeEJ5RCxDQUFBekQsR0FNQTFILFdBQ0EsT0FBZWtILEVBQUEsRUFBd0I5SSxLQUFBc0osS0FFdkMxSCxTQUFBc0osR0FDQSxPQUFlcEMsRUFBQSxFQUF3QjlJLEtBQUFzSixJQUFBNEIsR0FLdkNwSCxlQUNBLE9BQWVnRixFQUFBLEVBQTRCOUksS0FBQXNKLEtBRTNDeEYsYUFBQW9ILEdBQ0EsT0FBZXBDLEVBQUEsRUFBNEI5SSxLQUFBc0osSUFBQTRCLEdBTzNDcEwsYUFDQSxNQUFBMk0sRUFBQTlDLElBQ1FiLEVBQUEsRUFBb0IyRCxFQUFBek0sS0FBQXNKLEtBQzVCLE1BQUFvRCxFQUFBN0MsSUFDQThDLEVBQUFELEVBQUFELEVBQUEsR0FDQUcsRUFBQUYsRUFBQUQsRUFBQSxLQUNBLE9BQUFFLEVBQUEsT0FDQSxNQUFBRSxFQUFBeEQsRUFBQXNELEVBQUFDLEdBQUFFLFFBRUEsT0FEUWhFLEVBQUEsRUFBb0I2RCxFQUFBLEVBQUFDLEdBQzVCQyxFQVFBL00sWUFDQSxNQUFBMk0sRUFBQTlDLElBRVFiLEVBQUEsRUFBbUIyRCxFQUFBek0sS0FBQXNKLEtBQzNCLE1BQUEwRCxFQUFBbkQsSUFBQTRDLEVBQUEsR0FDQTVILEVBQUFnRixJQUFBNEMsRUFBQSxLQUNBLFdBQUFPLE9BQUFqTCxFQUFBOEMsRUFPQS9FLFNBQ0EsTUFBQTJNLEVBQUE5QyxJQUNRYixFQUFBLEVBQWdCMkQsRUFBQXpNLEtBQUFzSixLQUN4QixNQUFBb0QsRUFBQTdDLElBQ0E4QyxFQUFBRCxFQUFBRCxFQUFBLEdBQ0FHLEVBQUFGLEVBQUFELEVBQUEsS0FFQUksRUFBQXhELEVBQUFzRCxFQUFBQyxHQUFBRSxRQUVBLE9BRFFoRSxFQUFBLEVBQW9CNkQsRUFBQSxFQUFBQyxHQUM1QkMsR0FLTyxTQUFBaEUsRUFBQVMsRUFBQUMsR0FDUCxVQUFBdkQsTUFBQXFELEVBQUFDLEVBQUFDLDhGQ3BVQSxTQUFBMEQsRUFBQUMsR0FDQSxJQUFBQyxFQUFBLElBQUFuSCxNQUFBLHVCQUFBa0gsRUFBQSxLQUVBLE1BREFDLEVBQUFDLEtBQUEsbUJBQ0FELEVBRUFGLEVBQUFJLEtBQUEsV0FBdUMsVUFDdkNKLEVBQUFLLFFBQUFMLEVBQ0FNLEVBQUFDLFFBQUFQLEVBQ0FBLEVBQUFRLEdBQUEiLCJmaWxlIjoiMi5ib290c3RyYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2FyZCB9IGZyb20gJ3dvcmxkLW1hcC1nZW4nO1xuaW1wb3J0IHsgUmVuZGVyZXIsIFJlbmRlcmVkLCBMZWdlbmQgfSBmcm9tICcuL3JlbmRlcmVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIyRCBpbXBsZW1lbnRzIFJlbmRlcmVyIHtcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gICAgY29uc3RydWN0b3Iocm9vdDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdGhpcy5jYW52YXMuY2xhc3NOYW1lID0gJ3NjcmVlbic7XG4gICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xuXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XG4gICAgfVxuXG4gICAgcmVuZGVyKGJvYXJkOiBCb2FyZCk6IFJlbmRlcmVkIHtcbiAgICAgICAgY29uc3QgZHByID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHJlY3Qud2lkdGggKiBkcHI7XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogZHByO1xuXG4gICAgICAgIC8vIENsZWFyIGF0IGZpcnN0XG4gICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcblxuICAgICAgICBjb25zdCB3aWR0aCA9IGJvYXJkLndpZHRoKCk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGJvYXJkLmhlaWdodCgpO1xuICAgICAgICBjb25zdCBjZWxsV2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aCAvIHdpZHRoO1xuICAgICAgICBjb25zdCBjZWxsSGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0IC8gaGVpZ2h0O1xuICAgICAgICBjb25zdCBjZWxsU2l6ZSA9IGNlbGxXaWR0aCA+IGNlbGxIZWlnaHQgPyBjZWxsSGVpZ2h0IDogY2VsbFdpZHRoO1xuXG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IG5ldyBNYXA8bnVtYmVyLCBzdHJpbmc+KCk7XG4gICAgICAgIGNvbnN0IGxlZ2VuZHMgPSBuZXcgTWFwPG51bWJlciwgTGVnZW5kPigpO1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gYm9hcmQuYXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgY29uc3Qga2luZCA9IGNlbGwua2luZDtcbiAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSBjb2xvcnMuZ2V0KGtpbmQpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gY2VsbC5jb2xvcl9jb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnMuc2V0KGtpbmQsIGNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4ICogY2VsbFNpemUsIHkgKiBjZWxsU2l6ZSwgY2VsbFNpemUsIGNlbGxTaXplKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxlZ2VuZHMuaGFzKGtpbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBjZWxsLmxlZ2VuZCgpO1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRzLnNldChraW5kLCB7IHRleHQsIGNvbG9yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIHJldHVybiB7IGxlZ2VuZHMgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQb2ludDNELCBQb2ludCwgQ3ViZURpbWVuc2lvbiwgQ3ViZUNvbG9yLCBDdWJlLCBQaXhlbFZpZXcgfSBmcm9tICdvYmVsaXNrLmpzJztcbmltcG9ydCB7IExhbmRLaW5kLCBCb2FyZCwgQ2VsbCB9IGZyb20gJ3dvcmxkLW1hcC1nZW4nO1xuaW1wb3J0IHsgUmVuZGVyZXIsIFJlbmRlcmVkLCBMZWdlbmQgfSBmcm9tICcuL3JlbmRlcmVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIzRCBpbXBsZW1lbnRzIFJlbmRlcmVyIHtcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3Iocm9vdDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdGhpcy5jYW52YXMuY2xhc3NOYW1lID0gJ3NjcmVlbic7XG4gICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgIH1cblxuICAgIGRldGVybWluZUNlbGxTaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGJvdGggPSBoZWlnaHQgKyB3aWR0aDtcbiAgICAgICAgY29uc3QgZnJvbUhlaWdodCA9ICgodGhpcy5jYW52YXMuaGVpZ2h0IC0gMjAwKSAvIGJvdGgpICogMjtcbiAgICAgICAgY29uc3QgZnJvbVdpZHRoID0gKCh0aGlzLmNhbnZhcy53aWR0aCAvIGJvdGgpICogMikgLyBNYXRoLnNxcnQoMyk7XG4gICAgICAgIGxldCBjZWxsU2l6ZSA9IE1hdGguZmxvb3IoZnJvbUhlaWdodCA+IGZyb21XaWR0aCA/IGZyb21XaWR0aCA6IGZyb21IZWlnaHQpO1xuICAgICAgICBpZiAoY2VsbFNpemUgJSAyID09PSAxKSB7XG4gICAgICAgICAgICBjZWxsU2l6ZS0tO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjZWxsU2l6ZSA+IDYgPyBjZWxsU2l6ZSA6IDY7XG4gICAgfVxuXG4gICAgcmVuZGVyKGJvYXJkOiBCb2FyZCk6IFJlbmRlcmVkIHtcbiAgICAgICAgY29uc3QgZHByID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHJlY3Qud2lkdGggKiBkcHI7XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogZHByO1xuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gYm9hcmQud2lkdGgoKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gYm9hcmQuaGVpZ2h0KCk7XG4gICAgICAgIGNvbnN0IGNlbGxTaXplID0gdGhpcy5kZXRlcm1pbmVDZWxsU2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBjb25zdCBwb2ludCA9IG5ldyBQb2ludCh0aGlzLmNhbnZhcy53aWR0aCAvIDIsIGNlbGxTaXplICsgOTkgKiAyKTtcbiAgICAgICAgY29uc3QgcGl4ZWxWaWV3ID0gbmV3IFBpeGVsVmlldyh0aGlzLmNhbnZhcywgcG9pbnQpO1xuXG4gICAgICAgIGNvbnN0IGNhY2hlID0gbmV3IE1hcDxudW1iZXIsIEN1YmU+KCk7IC8vIEFsdGl0dWRlIC0+IEN1YmVcbiAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IE1hcDxudW1iZXIsIEN1YmVDb2xvcj4oKTsgLy8ga2luZCAtPiBDdWJlQ29sb3JcbiAgICAgICAgY29uc3QgbGVnZW5kcyA9IG5ldyBNYXA8bnVtYmVyLCBMZWdlbmQ+KCk7IC8vIGtpbmQgLT4gTGVnZW5kXG4gICAgICAgIGxldCB0b3BDdWJlOiBDdWJlIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgZnVuY3Rpb24ga2luZENvbG9yKGtpbmQ6IExhbmRLaW5kLCBjZWxsOiBDZWxsKTogQ3ViZUNvbG9yIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IGNvbG9ycy5nZXQoa2luZCk7XG4gICAgICAgICAgICBpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJnYiA9IGNlbGwucmdiX2NvbG9yKCk7XG4gICAgICAgICAgICBpZiAocmdiID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZ2IgPSAweGZmZmZmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gbmV3IEN1YmVDb2xvcigpLmdldEJ5SG9yaXpvbnRhbENvbG9yKHJnYik7XG4gICAgICAgICAgICBjb2xvcnMuc2V0KGtpbmQsIGNvbG9yKTtcblxuICAgICAgICAgICAgLy8gUmVtZW1iZXIgbGVnZW5kIG9mIHRoZSBraW5kIGFsc29cbiAgICAgICAgICAgIGxlZ2VuZHMuc2V0KGtpbmQsIHsgdGV4dDogY2VsbC5sZWdlbmQoKSwgY29sb3I6IGNlbGwuY29sb3JfY29kZSgpIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYWxjQ3ViZShraW5kOiBMYW5kS2luZCwgYWx0OiBudW1iZXIsIGNlbGw6IENlbGwpOiBDdWJlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0ga2luZENvbG9yKGtpbmQsIGNlbGwpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gY2VsbFNpemUgKyBhbHQgKiAyO1xuICAgICAgICAgICAgY29uc3QgZGltID0gbmV3IEN1YmVEaW1lbnNpb24oY2VsbFNpemUsIGNlbGxTaXplLCBoZWlnaHQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDdWJlKGRpbSwgY29sb3IsIC8qYm9yZGVyOiovIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGN1YmVBdChjZWxsOiBDZWxsKTogQ3ViZSB7XG4gICAgICAgICAgICBjb25zdCBraW5kID0gY2VsbC5raW5kO1xuICAgICAgICAgICAgY29uc3QgYWx0ID0gY2VsbC5hbHRpdHVkZTtcblxuICAgICAgICAgICAgaWYgKCFsZWdlbmRzLmhhcyhraW5kKSkge1xuICAgICAgICAgICAgICAgIC8vIFJlbWVtYmVyIGxlZ2VuZCBvZiB0aGUga2luZCBhbHNvXG4gICAgICAgICAgICAgICAgbGVnZW5kcy5zZXQoa2luZCwgeyB0ZXh0OiBjZWxsLmxlZ2VuZCgpLCBjb2xvcjogY2VsbC5jb2xvcl9jb2RlKCkgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChraW5kID09PSBMYW5kS2luZC5Ub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAodG9wQ3ViZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BDdWJlID0gY2FsY0N1YmUoa2luZCwgYWx0LCBjZWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvcEN1YmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChraW5kID09PSBMYW5kS2luZC5Ub3duIHx8IGtpbmQgPT09IExhbmRLaW5kLlBhdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsY0N1YmUoa2luZCwgYWx0LCBjZWxsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGFsdCk7XG4gICAgICAgICAgICBpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjdWJlID0gY2FsY0N1YmUoa2luZCwgYWx0LCBjZWxsKTtcbiAgICAgICAgICAgIGNhY2hlLnNldChhbHQsIGN1YmUpO1xuICAgICAgICAgICAgcmV0dXJuIGN1YmU7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdWJlID0gY3ViZUF0KGJvYXJkLmF0KHgsIHkpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwdCA9IG5ldyBQb2ludDNEKHggKiBjZWxsU2l6ZSwgeSAqIGNlbGxTaXplLCAwKTtcbiAgICAgICAgICAgICAgICBwaXhlbFZpZXcucmVuZGVyT2JqZWN0KGN1YmUsIHB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsZWdlbmRzLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEdlbmVyYXRvciwgQm9hcmQgfSBmcm9tICd3b3JsZC1tYXAtZ2VuJztcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xuaW1wb3J0IFJlbmRlcmVyMkQgZnJvbSAnLi8yZCc7XG5pbXBvcnQgUmVuZGVyZXIzRCBmcm9tICcuLzNkJztcbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcic7XG5cbmNvbnN0IGFwcCA9IG5ldyBjbGFzcyB7XG4gICAgcHJpdmF0ZSBnZW5lcmF0b3I6IEdlbmVyYXRvcjtcbiAgICBwcml2YXRlIGRpbTogc3RyaW5nO1xuICAgIHByaXZhdGUgY3VycmVudEJvYXJkOiBCb2FyZCB8IG51bGw7XG4gICAgcHJpdmF0ZSB3aWR0aElucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgaGVpZ2h0SW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzY3JlZW5Sb290OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHBhaW50QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIGxlZ2VuZHM6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyO1xuICAgIHByaXZhdGUgZG93bmxvYWRKU09OQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdlbmVyYXRvciA9IEdlbmVyYXRvci5uZXcoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50Qm9hcmQgPSBudWxsO1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpbWVuc2lvbi1zZWxlY3RvcicpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RvcltzZWxlY3Rvci5zZWxlY3RlZEluZGV4XSBhcyBIVE1MT3B0aW9uRWxlbWVudDtcbiAgICAgICAgdGhpcy5kaW0gPSBvcHRpb24udmFsdWU7XG4gICAgICAgIHNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25WaXN1YWxpemF0aW9uQ2hhbmdlLmJpbmQodGhpcykpO1xuXG4gICAgICAgIHRoaXMud2lkdGhJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aWR0aC1pbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuaGVpZ2h0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVpZ2h0LWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgdGhpcy5zY3JlZW5Sb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbi1yb290JykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgdGhpcy5pbml0UmVuZGVyZXIoKTtcblxuICAgICAgICB0aGlzLnBhaW50QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhaW50LWJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICB0aGlzLnBhaW50QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5sZWdlbmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZ2VuZHMnKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICB0aGlzLmRvd25sb2FkSlNPTkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZC1qc29uLWJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICB0aGlzLmRvd25sb2FkSlNPTkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25Eb3dubG9hZEpTT04uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgZ2V0U2l6ZSgpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBwYXJzZUludCh0aGlzLndpZHRoSW5wdXQudmFsdWUsIDEwKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gcGFyc2VJbnQodGhpcy5oZWlnaHRJbnB1dC52YWx1ZSwgMTApO1xuICAgICAgICBpZiAoIWlzTmFOKHdpZHRoKSAmJiAhaXNOYU4oaGVpZ2h0KSkge1xuICAgICAgICAgICAgcmV0dXJuIFt3aWR0aCwgaGVpZ2h0XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRpbSA9PT0gJzNkJykge1xuICAgICAgICAgICAgcmV0dXJuIFsxMjAsIDEyMF07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5zY3JlZW5Sb290LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIGlmICghaXNOYU4od2lkdGgpKSB7XG4gICAgICAgICAgICAvLyBOb3RlOiBoZWlnaHQgaXMgTmFOXG4gICAgICAgICAgICBjb25zdCBjZWxsUGl4ID0gcmVjdC53aWR0aCAvIHdpZHRoO1xuICAgICAgICAgICAgcmV0dXJuIFt3aWR0aCwgTWF0aC5mbG9vcihyZWN0LmhlaWdodCAvIGNlbGxQaXgpXTtcbiAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oaGVpZ2h0KSkge1xuICAgICAgICAgICAgLy8gTm90ZTogd2lkdGggaXMgTmFOXG4gICAgICAgICAgICBjb25zdCBjZWxsUGl4ID0gcmVjdC5oZWlnaHQgLyBoZWlnaHQ7XG4gICAgICAgICAgICByZXR1cm4gW01hdGguZmxvb3IocmVjdC53aWR0aCAvIGNlbGxQaXgpLCBoZWlnaHRdO1xuICAgICAgICB9IC8qIGxvbmdlciBzaWRlIGxlbmd0aCBpcyAyMDAgY2VsbHMgYnkgZGVmYXVsdCAqLyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IHJlY3QuaGVpZ2h0ID4gcmVjdC53aWR0aCA/IHJlY3QuaGVpZ2h0IDogcmVjdC53aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGNlbGxQaXggPSBtYXggLyAyMDA7XG4gICAgICAgICAgICByZXR1cm4gW01hdGguZmxvb3IocmVjdC53aWR0aCAvIGNlbGxQaXgpLCBNYXRoLmZsb29yKHJlY3QuaGVpZ2h0IC8gY2VsbFBpeCldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5pdFJlbmRlcmVyKCkge1xuICAgICAgICBjb25zdCBwcmV2ID0gdGhpcy5zY3JlZW5Sb290LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNjcmVlblJvb3QucmVtb3ZlQ2hpbGQocHJldik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50Qm9hcmQgPSBudWxsO1xuXG4gICAgICAgIHN3aXRjaCAodGhpcy5kaW0pIHtcbiAgICAgICAgICAgIGNhc2UgJzJkJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyMkQodGhpcy5zY3JlZW5Sb290KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzNkJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyM0QodGhpcy5zY3JlZW5Sb290KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGNvbnRleHQgJHt0aGlzLmRpbX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uRG93bmxvYWRKU09OKF86IEV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCb2FyZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbdGhpcy5jdXJyZW50Qm9hcmQuYXNfanNvbigpXSwgeyB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04JyB9KTtcbiAgICAgICAgc2F2ZUFzKGJsb2IsICdib2FyZC5qc29uJyk7XG4gICAgfVxuXG4gICAgb25WaXN1YWxpemF0aW9uQ2hhbmdlKGV2ZW50OiBFdmVudCkge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IGV2ZW50LnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0b3Jbc2VsZWN0b3Iuc2VsZWN0ZWRJbmRleF0gYXMgSFRNTE9wdGlvbkVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGRpbSA9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMuZGltID09PSBkaW0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpbSA9IGRpbTtcbiAgICAgICAgdGhpcy5pbml0UmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIC8vIFRPRE86IExvYWRpbmcgaW5kaWNhdG9yIGNhbm5vdCBiZSBkaXNwbGF5ZWQgc2luY2UgbWFwIGdlbmVyYXRpb24gaXMgcnVuIGluIG1haW4gdGhyZWFkLlxuICAgICAgICAvLyBXaGVuIG1hcCBzaXplIGlzIHZlcnkgbGFyZ2UgYW5kIGl0IGNvbnN1bWVzIHRpbWUsIENQVSBjb3JlIGlzIGFsc28gY29uc3VtZWQgZm9yIG1haW4gdGhyZWFkLlxuICAgICAgICAvLyBJbiB0aGUgY2FzZSwgbm8gYW5pbWF0aW9uIGlzIGFjdHVhbGx5IHJlbmRlcmVkLlxuICAgICAgICAvLyBUbyBwcmV2ZW50IHRoaXMsIG1hcCBnZW5lcmF0aW9uIG11c3QgYmUgcnVuIGluIGFub3RoZXIgdGhyZWFkIGFuZCBSdXN0IGNhbiBkbyBpdC5cblxuICAgICAgICAvLyB0aGlzLnBhaW50QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcbiAgICAgICAgdGhpcy5wYWludEJ1dHRvbi50ZXh0Q29udGVudCA9ICdQYWludGluZy4uLic7XG4gICAgICAgIHRoaXMucGFpbnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgdGhpcy5kb3dubG9hZEpTT05CdXR0b24uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgLy8gV2FpdCBuZXh0IHRpY2sgdG8gY2hhbmdlIHRleHRcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgW3dpZHRoLCBoZWlnaHRdID0gdGhpcy5nZXRTaXplKCk7XG4gICAgICAgICAgICBjb25zdCBib2FyZCA9IHRoaXMuZ2VuZXJhdG9yLmdlbl9hdXRvKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgcmVuZGVyZWQgPSB0aGlzLnJlbmRlcmVyLnJlbmRlcihib2FyZCk7XG5cbiAgICAgICAgICAgIHRoaXMubGVnZW5kcy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGVnZW5kIG9mIHJlbmRlcmVkLmxlZ2VuZHMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc05hbWUgPSAnbGVnZW5kJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY29sb3IuY2xhc3NOYW1lID0gJ2xlZ2VuZC1jb2xvcic7XG4gICAgICAgICAgICAgICAgY29sb3Iuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbGVnZW5kLmNvbG9yIHx8ICdub25lJztcbiAgICAgICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGNvbG9yKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBuYW1lLmNsYXNzTmFtZSA9ICdsZWdlbmQtbmFtZSc7XG4gICAgICAgICAgICAgICAgbmFtZS50ZXh0Q29udGVudCA9IGxlZ2VuZC50ZXh0O1xuICAgICAgICAgICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZHMuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCb2FyZCA9IGJvYXJkO1xuXG4gICAgICAgICAgICAvLyB0aGlzLnBhaW50QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvYWRpbmcnKTtcbiAgICAgICAgICAgIHRoaXMucGFpbnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIHRoaXMucGFpbnRCdXR0b24udGV4dENvbnRlbnQgPSAnR2VuZXJhdGUnO1xuICAgICAgICAgICAgdGhpcy5kb3dubG9hZEpTT05CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25zdW1lZDonLCBEYXRlLm5vdygpIC0gc3RhcnQpO1xuICAgICAgICB9LCAwKTtcbiAgICB9XG59KCk7XG5cbmFwcC5yZW5kZXIoKTtcbiIsIi8qIHRzbGludDpkaXNhYmxlICovXG5pbXBvcnQgKiBhcyB3YXNtIGZyb20gJy4vd29ybGRfbWFwX2dlbl9iZyc7XG5cbmxldCBjYWNoZWRUZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcblxubGV0IGNhY2hlZ2V0VWludDhNZW1vcnkgPSBudWxsO1xuZnVuY3Rpb24gZ2V0VWludDhNZW1vcnkoKSB7XG4gICAgaWYgKGNhY2hlZ2V0VWludDhNZW1vcnkgPT09IG51bGwgfHwgY2FjaGVnZXRVaW50OE1lbW9yeS5idWZmZXIgIT09IHdhc20ubWVtb3J5LmJ1ZmZlcikge1xuICAgICAgICBjYWNoZWdldFVpbnQ4TWVtb3J5ID0gbmV3IFVpbnQ4QXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZ2V0VWludDhNZW1vcnk7XG59XG5cbmZ1bmN0aW9uIGdldFN0cmluZ0Zyb21XYXNtKHB0ciwgbGVuKSB7XG4gICAgcmV0dXJuIGNhY2hlZFRleHREZWNvZGVyLmRlY29kZShnZXRVaW50OE1lbW9yeSgpLnN1YmFycmF5KHB0ciwgcHRyICsgbGVuKSk7XG59XG5cbmxldCBjYWNoZWRHbG9iYWxBcmd1bWVudFB0ciA9IG51bGw7XG5mdW5jdGlvbiBnbG9iYWxBcmd1bWVudFB0cigpIHtcbiAgICBpZiAoY2FjaGVkR2xvYmFsQXJndW1lbnRQdHIgPT09IG51bGwpIHtcbiAgICAgICAgY2FjaGVkR2xvYmFsQXJndW1lbnRQdHIgPSB3YXNtLl9fd2JpbmRnZW5fZ2xvYmFsX2FyZ3VtZW50X3B0cigpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVkR2xvYmFsQXJndW1lbnRQdHI7XG59XG5cbmxldCBjYWNoZWdldFVpbnQzMk1lbW9yeSA9IG51bGw7XG5mdW5jdGlvbiBnZXRVaW50MzJNZW1vcnkoKSB7XG4gICAgaWYgKGNhY2hlZ2V0VWludDMyTWVtb3J5ID09PSBudWxsIHx8IGNhY2hlZ2V0VWludDMyTWVtb3J5LmJ1ZmZlciAhPT0gd2FzbS5tZW1vcnkuYnVmZmVyKSB7XG4gICAgICAgIGNhY2hlZ2V0VWludDMyTWVtb3J5ID0gbmV3IFVpbnQzMkFycmF5KHdhc20ubWVtb3J5LmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWdldFVpbnQzMk1lbW9yeTtcbn1cbi8qKlxuKiBSZXNvbHV0aW9uIG9mIHRoZSBib2FyZC5cbiovXG5leHBvcnQgY29uc3QgUmVzb2x1dGlvbiA9IE9iamVjdC5mcmVlemUoeyBMb3c6MCxNaWRkbGU6MSxIaWdoOjIsIH0pO1xuLyoqXG4qIFJlcHJlc2VudHMgdGhlIGtpbmQgb2YgY2VsbC4gYHByZXNldCgpYCBtZXRob2QgcmV0dXJucyBhIHByZXNldCBjZWxsIGNvbnN0YW50cyBmb3JcbiogdGhlIGtpbmQuXG4qL1xuZXhwb3J0IGNvbnN0IExhbmRLaW5kID0gT2JqZWN0LmZyZWV6ZSh7IFNlYTowLE1vdW50YWluOjEsRm9yZXN0OjIsUGxhaW46MyxUb3duOjQsVG9wOjUsSGlnaGxhbmQ6NixEZWVwU2VhOjcsUGF0aDo4LCB9KTtcblxuY29uc3QgaGVhcCA9IG5ldyBBcnJheSgzMik7XG5cbmhlYXAuZmlsbCh1bmRlZmluZWQpO1xuXG5oZWFwLnB1c2godW5kZWZpbmVkLCBudWxsLCB0cnVlLCBmYWxzZSk7XG5cbmxldCBoZWFwX25leHQgPSBoZWFwLmxlbmd0aDtcblxuZnVuY3Rpb24gYWRkSGVhcE9iamVjdChvYmopIHtcbiAgICBpZiAoaGVhcF9uZXh0ID09PSBoZWFwLmxlbmd0aCkgaGVhcC5wdXNoKGhlYXAubGVuZ3RoICsgMSk7XG4gICAgY29uc3QgaWR4ID0gaGVhcF9uZXh0O1xuICAgIGhlYXBfbmV4dCA9IGhlYXBbaWR4XTtcblxuICAgIGhlYXBbaWR4XSA9IG9iajtcbiAgICByZXR1cm4gaWR4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfbmV3X2JjODkwZGYzZTVlNmE5MWQoYXJnMCwgYXJnMSkge1xuICAgIGxldCB2YXJnMCA9IGdldFN0cmluZ0Zyb21XYXNtKGFyZzAsIGFyZzEpO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KG5ldyBGdW5jdGlvbih2YXJnMCkpO1xufVxuXG5mdW5jdGlvbiBnZXRPYmplY3QoaWR4KSB7IHJldHVybiBoZWFwW2lkeF07IH1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX2NhbGxfZTE1YjZhYTBjNmQzYzkzZihhcmcwLCBhcmcxKSB7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QoZ2V0T2JqZWN0KGFyZzApLmNhbGwoZ2V0T2JqZWN0KGFyZzEpKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19zZWxmXzk1YWQzZjFjZGRkNWFjY2MoYXJnMCkge1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KGdldE9iamVjdChhcmcwKS5zZWxmKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX2NyeXB0b19jOTNjYzVhMTQ3ZTM1NDIyKGFyZzApIHtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChnZXRPYmplY3QoYXJnMCkuY3J5cHRvKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX2dldFJhbmRvbVZhbHVlc181OGI0NjQxNmVhN2EzM2EyKGFyZzApIHtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChnZXRPYmplY3QoYXJnMCkuZ2V0UmFuZG9tVmFsdWVzKTtcbn1cblxuZnVuY3Rpb24gZ2V0QXJyYXlVOEZyb21XYXNtKHB0ciwgbGVuKSB7XG4gICAgcmV0dXJuIGdldFVpbnQ4TWVtb3J5KCkuc3ViYXJyYXkocHRyIC8gMSwgcHRyIC8gMSArIGxlbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19nZXRSYW5kb21WYWx1ZXNfYTNhM2MyZGQ1NDk0ZmQzOShhcmcwLCBhcmcxLCBhcmcyKSB7XG4gICAgbGV0IHZhcmcxID0gZ2V0QXJyYXlVOEZyb21XYXNtKGFyZzEsIGFyZzIpO1xuICAgIGdldE9iamVjdChhcmcwKS5nZXRSYW5kb21WYWx1ZXModmFyZzEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfcmVxdWlyZV8zNmE4OTVmMGE0ZWEwNTI5KGFyZzAsIGFyZzEpIHtcbiAgICBsZXQgdmFyZzAgPSBnZXRTdHJpbmdGcm9tV2FzbShhcmcwLCBhcmcxKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXF1aXJlKHZhcmcwKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19yYW5kb21GaWxsU3luY19mOWNiNzUzMWQ5YzBiMTQ0KGFyZzAsIGFyZzEsIGFyZzIpIHtcbiAgICBsZXQgdmFyZzEgPSBnZXRBcnJheVU4RnJvbVdhc20oYXJnMSwgYXJnMik7XG4gICAgZ2V0T2JqZWN0KGFyZzApLnJhbmRvbUZpbGxTeW5jKHZhcmcxKTtcbn1cblxuZnVuY3Rpb24gZHJvcE9iamVjdChpZHgpIHtcbiAgICBpZiAoaWR4IDwgMzYpIHJldHVybjtcbiAgICBoZWFwW2lkeF0gPSBoZWFwX25leHQ7XG4gICAgaGVhcF9uZXh0ID0gaWR4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl9vYmplY3RfZHJvcF9yZWYoaSkgeyBkcm9wT2JqZWN0KGkpOyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX2lzX3VuZGVmaW5lZChpZHgpIHtcbiAgICByZXR1cm4gZ2V0T2JqZWN0KGlkeCkgPT09IHVuZGVmaW5lZCA/IDEgOiAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl9qc3ZhbF9lcShhLCBiKSB7XG4gICAgcmV0dXJuIGdldE9iamVjdChhKSA9PT0gZ2V0T2JqZWN0KGIpID8gMSA6IDA7XG59XG5cbmZ1bmN0aW9uIGZyZWVHZW5lcmF0b3IocHRyKSB7XG5cbiAgICB3YXNtLl9fd2JnX2dlbmVyYXRvcl9mcmVlKHB0cik7XG59XG4vKipcbiogUmVwcmVzZW50cyByYW5kb20gbWFwIGdlbmVyYXRvci4gSW4gY29udHJhc3QgdG8gYGdlbjo6UmFuZG9tQm9hcmRHZW5gLCBpdCBvbmx5IHByb3ZpZGVzIGxpbWl0ZWRcbiogZnVuY3Rpb25hbGl0eS4gSXQgY2Fubm90IGJlIGluaXRpYWxpemVkIHdpdGggc3BlY2lmaWMgc2VlZC4gQW5kIG1hcCByZXNvbHV0aW9uIGlzIGFsd2F5cyBkZXRlY3RlZFxuKiBmcm9tIGl0cyBzaXplLlxuKi9cbmV4cG9ydCBjbGFzcyBHZW5lcmF0b3Ige1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShHZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG4gICAgICAgIGZyZWVHZW5lcmF0b3IocHRyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtHZW5lcmF0b3J9XG4gICAgKi9cbiAgICBzdGF0aWMgbmV3KCkge1xuICAgICAgICByZXR1cm4gR2VuZXJhdG9yLl9fd3JhcCh3YXNtLmdlbmVyYXRvcl9uZXcoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogR2VuZXJhdGVzIHJhbmRvbSBtYXAgYm9hcmQgd2l0aCBnaXZlbiB3aWR0aCBhbmQgaGVpZ2h0LiBQYXJhbWV0ZXJzIGFyZSBpbiBudW1iZXIgb2YgY2VsbHMuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYXJnMFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFyZzFcbiAgICAqIEByZXR1cm5zIHtCb2FyZH1cbiAgICAqL1xuICAgIGdlbl9hdXRvKGFyZzAsIGFyZzEpIHtcbiAgICAgICAgcmV0dXJuIEJvYXJkLl9fd3JhcCh3YXNtLmdlbmVyYXRvcl9nZW5fYXV0byh0aGlzLnB0ciwgYXJnMCwgYXJnMSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEdlbmVyYXRlcyByYW5kb20gbWFwIGJvYXJkIHdpdGggZ2l2ZW4gcmVzb2x1dGlvbiwgd2lkdGggYW5kIGhlaWdodC4gV2lkdGggYW5kIGhlaWdodCBhcmVcbiAgICAqIGluIG51bWJlciBvZiBjZWxscy5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhcmcwXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYXJnMVxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFyZzJcbiAgICAqIEByZXR1cm5zIHtCb2FyZH1cbiAgICAqL1xuICAgIGdlbihhcmcwLCBhcmcxLCBhcmcyKSB7XG4gICAgICAgIHJldHVybiBCb2FyZC5fX3dyYXAod2FzbS5nZW5lcmF0b3JfZ2VuKHRoaXMucHRyLCBhcmcwLCBhcmcxLCBhcmcyKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmcmVlQm9hcmQocHRyKSB7XG5cbiAgICB3YXNtLl9fd2JnX2JvYXJkX2ZyZWUocHRyKTtcbn1cbi8qKlxuKiBSZXByZXNlbnRzIG9uZSBib2FyZCBnZW5lcmF0ZWQgYnkgcmFuZG9tIG1hcCBnZW5lcmF0b3IuXG4qL1xuZXhwb3J0IGNsYXNzIEJvYXJkIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoQm9hcmQucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG4gICAgICAgIGZyZWVCb2FyZChwdHIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogUmV0dXJucyB3aWR0aCBhcyBudW1iZXIgb2YgY2VsbHMgaW4gbnVtYmVyXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB3YXNtLmJvYXJkX3dpZHRoKHRoaXMucHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIGhlaWdodCBhcyBudW1iZXIgb2YgY2VsbHMgaW4gbnVtYmVyXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgaGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gd2FzbS5ib2FyZF9oZWlnaHQodGhpcy5wdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgY2VsbCBhdCBwb3NpdGlvbiAoeCwgeSkuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYXJnMFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFyZzFcbiAgICAqIEByZXR1cm5zIHtDZWxsfVxuICAgICovXG4gICAgYXQoYXJnMCwgYXJnMSkge1xuICAgICAgICByZXR1cm4gQ2VsbC5fX3dyYXAod2FzbS5ib2FyZF9hdCh0aGlzLnB0ciwgYXJnMCwgYXJnMSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgYSBib2FyZCBieSBzZXJpYWxpemluZyBhcyBKU09OLiBPbiBmYWlsdXJlLCBpdCByZXR1cm5zIGBOb25lYCAoYHVuZGVmaW5lZGAgaW5cbiAgICAqIEphdmFTY3JpcHQpXG4gICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICovXG4gICAgYXNfanNvbigpIHtcbiAgICAgICAgY29uc3QgcmV0cHRyID0gZ2xvYmFsQXJndW1lbnRQdHIoKTtcbiAgICAgICAgd2FzbS5ib2FyZF9hc19qc29uKHJldHB0ciwgdGhpcy5wdHIpO1xuICAgICAgICBjb25zdCBtZW0gPSBnZXRVaW50MzJNZW1vcnkoKTtcbiAgICAgICAgY29uc3QgcnVzdHB0ciA9IG1lbVtyZXRwdHIgLyA0XTtcbiAgICAgICAgY29uc3QgcnVzdGxlbiA9IG1lbVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgIGlmIChydXN0cHRyID09PSAwKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlYWxSZXQgPSBnZXRTdHJpbmdGcm9tV2FzbShydXN0cHRyLCBydXN0bGVuKS5zbGljZSgpO1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShydXN0cHRyLCBydXN0bGVuICogMSk7XG4gICAgICAgIHJldHVybiByZWFsUmV0O1xuXG4gICAgfVxufVxuXG5mdW5jdGlvbiBmcmVlQ2VsbChwdHIpIHtcblxuICAgIHdhc20uX193YmdfY2VsbF9mcmVlKHB0cik7XG59XG4vKipcbiogUmVwcmVzZW50cyBvbmUgY2VsbCBpbiBib2FyZC4gSW4gY29udHJhc3QgdG8gYGxhbmQ6OkxhbmRgLCBpdCBvbmx5IGNvbnRhaW5zIGl0cyBsYW5kIGtpbmQgYW5kXG4qIGFsdGl0dWRlIGluIG9yZGVyIHRvIHJlZHVjZSB0b3RhbCBtZW1vcnkgc2l6ZS5cbiovXG5leHBvcnQgY2xhc3MgQ2VsbCB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKENlbGwucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG4gICAgICAgIGZyZWVDZWxsKHB0cik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgZ2V0IGtpbmQoKSB7XG4gICAgICAgIHJldHVybiB3YXNtLl9fd2JnX2dldF9jZWxsX2tpbmQodGhpcy5wdHIpO1xuICAgIH1cbiAgICBzZXQga2luZChhcmcwKSB7XG4gICAgICAgIHJldHVybiB3YXNtLl9fd2JnX3NldF9jZWxsX2tpbmQodGhpcy5wdHIsIGFyZzApO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgYWx0aXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB3YXNtLl9fd2JnX2dldF9jZWxsX2FsdGl0dWRlKHRoaXMucHRyKTtcbiAgICB9XG4gICAgc2V0IGFsdGl0dWRlKGFyZzApIHtcbiAgICAgICAgcmV0dXJuIHdhc20uX193Ymdfc2V0X2NlbGxfYWx0aXR1ZGUodGhpcy5wdHIsIGFyZzApO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgY29sb3IgY29kZSBvZiBsYW5kIGFzIGAjcnJnZ2JiYCBmb3JtYXQgc3RyaW5nIGZyb20gbGFuZCBraW5kLlxuICAgICogV2hlbiBubyBjb2xvciBpcyBzZXQsIHJldHVybnMgYE5vbmVgLiBJdCBtZWFucyBgdW5kZWZpbmVkYCBpbiBKYXZhU2NyaXB0IHNpZGUuXG4gICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICovXG4gICAgY29sb3JfY29kZSgpIHtcbiAgICAgICAgY29uc3QgcmV0cHRyID0gZ2xvYmFsQXJndW1lbnRQdHIoKTtcbiAgICAgICAgd2FzbS5jZWxsX2NvbG9yX2NvZGUocmV0cHRyLCB0aGlzLnB0cik7XG4gICAgICAgIGNvbnN0IG1lbSA9IGdldFVpbnQzMk1lbW9yeSgpO1xuICAgICAgICBjb25zdCBydXN0cHRyID0gbWVtW3JldHB0ciAvIDRdO1xuICAgICAgICBjb25zdCBydXN0bGVuID0gbWVtW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgaWYgKHJ1c3RwdHIgPT09IDApIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVhbFJldCA9IGdldFN0cmluZ0Zyb21XYXNtKHJ1c3RwdHIsIHJ1c3RsZW4pLnNsaWNlKCk7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHJ1c3RwdHIsIHJ1c3RsZW4gKiAxKTtcbiAgICAgICAgcmV0dXJuIHJlYWxSZXQ7XG5cbiAgICB9XG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIFJHQiBjb2xvciBhcyB1MzIuIDB+OCBiaXRzIGZvciBCLCA5fjE2IGJpdHMgZm9yIEcsIDE3fjI0IGJpdHMgZm9yIFIuXG4gICAgKiBXaGVuIG5vIGNvbG9yIGlzIHNldCwgcmV0dXJucyBgTm9uZWAuIEl0IG1lYW5zIGB1bmRlZmluZWRgIGluIEphdmFTY3JpcHQgc2lkZS5cbiAgICAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICByZ2JfY29sb3IoKSB7XG4gICAgICAgIGNvbnN0IHJldHB0ciA9IGdsb2JhbEFyZ3VtZW50UHRyKCk7XG5cbiAgICAgICAgd2FzbS5jZWxsX3JnYl9jb2xvcihyZXRwdHIsIHRoaXMucHRyKTtcbiAgICAgICAgY29uc3QgcHJlc2VudCA9IGdldFVpbnQzMk1lbW9yeSgpW3JldHB0ciAvIDRdO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGdldFVpbnQzMk1lbW9yeSgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgcmV0dXJuIHByZXNlbnQgPT09IDAgPyB1bmRlZmluZWQgOiB2YWx1ZTtcblxuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgbGVnZW5kIG9mIGxhbmQgYXMgc3RyaW5nIGZyb20gbGFuZCBraW5kLlxuICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAqL1xuICAgIGxlZ2VuZCgpIHtcbiAgICAgICAgY29uc3QgcmV0cHRyID0gZ2xvYmFsQXJndW1lbnRQdHIoKTtcbiAgICAgICAgd2FzbS5jZWxsX2xlZ2VuZChyZXRwdHIsIHRoaXMucHRyKTtcbiAgICAgICAgY29uc3QgbWVtID0gZ2V0VWludDMyTWVtb3J5KCk7XG4gICAgICAgIGNvbnN0IHJ1c3RwdHIgPSBtZW1bcmV0cHRyIC8gNF07XG4gICAgICAgIGNvbnN0IHJ1c3RsZW4gPSBtZW1bcmV0cHRyIC8gNCArIDFdO1xuXG4gICAgICAgIGNvbnN0IHJlYWxSZXQgPSBnZXRTdHJpbmdGcm9tV2FzbShydXN0cHRyLCBydXN0bGVuKS5zbGljZSgpO1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShydXN0cHRyLCBydXN0bGVuICogMSk7XG4gICAgICAgIHJldHVybiByZWFsUmV0O1xuXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl90aHJvdyhwdHIsIGxlbikge1xuICAgIHRocm93IG5ldyBFcnJvcihnZXRTdHJpbmdGcm9tV2FzbShwdHIsIGxlbikpO1xufVxuXG4iLCJmdW5jdGlvbiB3ZWJwYWNrRW1wdHlDb250ZXh0KHJlcSkge1xuXHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0dGhyb3cgZTtcbn1cbndlYnBhY2tFbXB0eUNvbnRleHQua2V5cyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gW107IH07XG53ZWJwYWNrRW1wdHlDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrRW1wdHlDb250ZXh0O1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrRW1wdHlDb250ZXh0O1xud2VicGFja0VtcHR5Q29udGV4dC5pZCA9IDQ2OyJdLCJzb3VyY2VSb290IjoiIn0=