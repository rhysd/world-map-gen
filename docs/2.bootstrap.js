(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1:function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(30);class o{constructor(t){this.canvas=document.createElement("canvas"),this.canvas.className="screen",t.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d")}render(t){const e=window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect();this.canvas.width=n.width*e,this.canvas.height=n.height*e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath();const r=t.width(),i=t.height(),o=this.canvas.width/r,s=this.canvas.height/i,c=new Map,a=new Map;for(let e=0;e<r;e++)for(let n=0;n<i;n++){const r=t.at(e,n),i=r.kind;let u=c.get(i);if(void 0===u&&void 0!==(u=r.color_code())&&c.set(i,u),this.ctx.fillStyle=u,this.ctx.fillRect(e*o,n*s,o,s),!a.has(i)){const t=r.legend();a.set(i,{text:t,color:u})}}return this.ctx.stroke(),{legends:a}}}var s=n(32);class c{constructor(t){this.canvas=document.createElement("canvas"),this.canvas.className="screen",t.appendChild(this.canvas)}determineCellSize(t,e){const n=e+t,r=(this.canvas.height-200)/n*2,i=this.canvas.width/n*2/Math.sqrt(3);let o=Math.floor(r>i?i:r);return o%2==1&&o--,o>6?o:6}render(t){const e=window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect();this.canvas.width=n.width*e,this.canvas.height=n.height*e;const i=t.width(),o=t.height(),c=this.determineCellSize(i,o),a=new s.Point(this.canvas.width/2,c+198),u=new s.PixelView(this.canvas,a),d=new Map,h=new Map,l=new Map;function f(t,e,n){const r=function(t,e){const n=h.get(t);if(void 0!==n)return n;let r=e.rgb_color();void 0===r&&(r=16777215);const i=(new s.CubeColor).getByHorizontalColor(r);return h.set(t,i),l.set(t,{text:e.legend(),color:e.color_code()}),i}(t,n),i=c+2*e,o=new s.CubeDimension(c,c,i);return new s.Cube(o,r,!1)}function w(t){const e=t.kind,n=t.altitude;if(l.has(e)||l.set(e,{text:t.legend(),color:t.color_code()}),e===r.b.Town||e===r.b.Path)return f(e,n,t);const i=d.get(n);if(void 0!==i)return i;const o=f(e,n,t);return d.set(n,o),o}for(let e=0;e<i;e++)for(let n=0;n<o;n++){const r=w(t.at(e,n)),i=new s.Point3D(e*c,n*c,0);u.renderObject(r,i)}return{legends:l}}}(new class{constructor(){this.generator=r.a.new(),this.currentBoard=null;const t=document.getElementById("dimension-selector"),e=t[t.selectedIndex];this.dim=e.value,t.addEventListener("change",this.onVisualizationChange.bind(this)),this.widthInput=document.getElementById("width-input"),this.heightInput=document.getElementById("height-input"),this.screenRoot=document.getElementById("screen-root"),this.initRenderer(),this.paintButton=document.getElementById("paint-button"),this.paintButton.addEventListener("click",()=>{this.render()}),this.legends=document.getElementById("legends"),this.downloadJSONButton=document.getElementById("download-json-button"),this.downloadJSONButton.addEventListener("click",this.onDownloadJSON.bind(this))}getSize(){const t=parseInt(this.widthInput.value,10),e=parseInt(this.heightInput.value,10);if(!isNaN(t)&&!isNaN(e))return[t,e];if("3d"===this.dim)return[120,120];const n=this.screenRoot.getBoundingClientRect();if(isNaN(t)){if(isNaN(e)){const t=(n.height>n.width?n.height:n.width)/200;return[Math.floor(n.width/t),Math.floor(n.height/t)]}{const t=n.height/e;return[Math.floor(n.width/t),e]}}{const e=n.width/t;return[t,Math.floor(n.height/e)]}}initRenderer(){const t=this.screenRoot.firstChild;switch(null!==t&&this.screenRoot.removeChild(t),this.currentBoard=null,this.dim){case"2d":this.renderer=new o(this.screenRoot);break;case"3d":this.renderer=new c(this.screenRoot);break;default:throw new Error(`Unknown context ${this.dim}`)}}onDownloadJSON(t){if(null===this.currentBoard)return;const e=new Blob([this.currentBoard.as_json()],{type:"text/plain;charset=utf-8"});Object(i.saveAs)(e,"board.json")}onVisualizationChange(t){const e=t.target,n=e[e.selectedIndex].value;this.dim!==n&&(this.dim=n,this.initRenderer(),this.render())}render(){this.paintButton.textContent="Painting...",this.paintButton.classList.add("disabled"),this.downloadJSONButton.classList.add("disabled"),window.setTimeout(()=>{const t=Date.now(),[e,n]=this.getSize(),r=this.generator.gen_auto(e,n),i=this.renderer.render(r);this.legends.innerHTML="";for(const t of i.legends.values()){const e=document.createElement("div");e.className="legend";const n=document.createElement("div");n.className="legend-color",n.style.backgroundColor=t.color||"none",e.appendChild(n);const r=document.createElement("div");r.className="legend-name",r.textContent=t.text,e.appendChild(r),this.legends.appendChild(e)}this.currentBoard=r,this.paintButton.classList.remove("disabled"),this.paintButton.textContent="Generate",this.downloadJSONButton.classList.remove("disabled"),console.log("Consumed:",Date.now()-t)},0)}}).render()},2:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"g",function(){return g}),n.d(e,"c",function(){return m}),n.d(e,"j",function(){return b}),n.d(e,"d",function(){return B}),n.d(e,"e",function(){return C}),n.d(e,"f",function(){return x}),n.d(e,"i",function(){return y}),n.d(e,"h",function(){return N}),n.d(e,"m",function(){return E}),n.d(e,"k",function(){return R}),n.d(e,"l",function(){return k}),n.d(e,"a",function(){return O}),n.d(e,"n",function(){return S});var r=n(45);let i=new TextDecoder("utf-8"),o=null;function s(){return null!==o&&o.buffer===r.t.buffer||(o=new Uint8Array(r.t.buffer)),o}function c(t,e){return i.decode(s().subarray(t,t+e))}let a=null;function u(){return null===a&&(a=r.i()),a}let d=null;function h(){return null!==d&&d.buffer===r.t.buffer||(d=new Uint32Array(r.t.buffer)),d}Object.freeze({Low:0,Middle:1,High:2});const l=Object.freeze({Sea:0,Mountain:1,Forest:2,Plain:3,Town:4,Top:5,Highland:6,DeepSea:7,Path:8}),f=new Array(32);f.fill(void 0),f.push(void 0,null,!0,!1);let w=f.length;function p(t){w===f.length&&f.push(f.length+1);const e=w;return w=f[e],f[e]=t,e}function g(t,e){let n=c(t,e);return p(new Function(n))}function v(t){return f[t]}function m(t,e){return p(v(t).call(v(e)))}function b(t){return p(v(t).self)}function B(t){return p(v(t).crypto)}function C(t){return p(v(t).getRandomValues)}function _(t,e){return s().subarray(t/1,t/1+e)}function x(t,e,n){let r=_(e,n);v(t).getRandomValues(r)}function y(t,e){let r=c(t,e);return p(n(46)(r))}function N(t,e,n){let r=_(e,n);v(t).randomFillSync(r)}function E(t){var e;(e=t)<36||(f[e]=w,w=e)}function R(t){return void 0===v(t)?1:0}function k(t,e){return v(t)===v(e)?1:0}class O{static __wrap(t){const e=Object.create(O.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,function(t){r.c(t)}(t)}static new(){return O.__wrap(r.s())}gen_auto(t,e){return I.__wrap(r.r(this.ptr,t,e))}gen(t,e,n){return I.__wrap(r.q(this.ptr,t,e,n))}}class I{static __wrap(t){const e=Object.create(I.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,function(t){r.a(t)}(t)}width(){return r.m(this.ptr)}height(){return r.l(this.ptr)}at(t,e){return M.__wrap(r.k(this.ptr,t,e))}as_json(){const t=u();r.j(t,this.ptr);const e=h(),n=e[t/4],i=e[t/4+1];if(0===n)return;const o=c(n,i).slice();return r.h(n,1*i),o}}class M{static __wrap(t){const e=Object.create(M.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,function(t){r.b(t)}(t)}get kind(){return r.e(this.ptr)}set kind(t){return r.g(this.ptr,t)}get altitude(){return r.d(this.ptr)}set altitude(t){return r.f(this.ptr,t)}color_code(){const t=u();r.n(t,this.ptr);const e=h(),n=e[t/4],i=e[t/4+1];if(0===n)return;const o=c(n,i).slice();return r.h(n,1*i),o}rgb_color(){const t=u();r.p(t,this.ptr);const e=h()[t/4],n=h()[t/4+1];return 0===e?void 0:n}legend(){const t=u();r.o(t,this.ptr);const e=h(),n=e[t/4],i=e[t/4+1],o=c(n,i).slice();return r.h(n,1*i),o}}function S(t,e){throw new Error(c(t,e))}},45:function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(2);r.u()},46:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=46}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi8yZC50cyIsIndlYnBhY2s6Ly8vLi8zZC50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi4vcGtnL3dvcmxkX21hcF9nZW4uanMiLCJ3ZWJwYWNrOi8vLy4uL3BrZyBzeW5jIl0sIm5hbWVzIjpbIlJlbmRlcmVyMkQiLCJbb2JqZWN0IE9iamVjdF0iLCJyb290IiwidGhpcyIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZENoaWxkIiwiY3R4IiwiZ2V0Q29udGV4dCIsImJvYXJkIiwiZHByIiwid2luZG93IiwiZGV2aWNlUGl4ZWxSYXRpbyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImNsZWFyUmVjdCIsImJlZ2luUGF0aCIsImNlbGxXaWR0aCIsImNlbGxIZWlnaHQiLCJjb2xvcnMiLCJNYXAiLCJsZWdlbmRzIiwieCIsInkiLCJjZWxsIiwiYXQiLCJraW5kIiwiY29sb3IiLCJnZXQiLCJ1bmRlZmluZWQiLCJjb2xvcl9jb2RlIiwic2V0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJoYXMiLCJ0ZXh0IiwibGVnZW5kIiwic3Ryb2tlIiwiXzNkX1JlbmRlcmVyM0QiLCJib3RoIiwiZnJvbUhlaWdodCIsImZyb21XaWR0aCIsIk1hdGgiLCJzcXJ0IiwiY2VsbFNpemUiLCJmbG9vciIsImRldGVybWluZUNlbGxTaXplIiwicG9pbnQiLCJvYmVsaXNrIiwicGl4ZWxWaWV3IiwiY2FjaGUiLCJjYWxjQ3ViZSIsImFsdCIsImNhY2hlZCIsInJnYiIsInJnYl9jb2xvciIsImdldEJ5SG9yaXpvbnRhbENvbG9yIiwia2luZENvbG9yIiwiZGltIiwiY3ViZUF0IiwiYWx0aXR1ZGUiLCJ3b3JsZF9tYXBfZ2VuIiwiVG93biIsIlBhdGgiLCJjdWJlIiwicHQiLCJyZW5kZXJPYmplY3QiLCJnZW5lcmF0b3IiLCJuZXciLCJjdXJyZW50Qm9hcmQiLCJzZWxlY3RvciIsImdldEVsZW1lbnRCeUlkIiwib3B0aW9uIiwic2VsZWN0ZWRJbmRleCIsInZhbHVlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uVmlzdWFsaXphdGlvbkNoYW5nZSIsImJpbmQiLCJ3aWR0aElucHV0IiwiaGVpZ2h0SW5wdXQiLCJzY3JlZW5Sb290IiwiaW5pdFJlbmRlcmVyIiwicGFpbnRCdXR0b24iLCJyZW5kZXIiLCJkb3dubG9hZEpTT05CdXR0b24iLCJvbkRvd25sb2FkSlNPTiIsInBhcnNlSW50IiwiaXNOYU4iLCJjZWxsUGl4IiwicHJldiIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInJlbmRlcmVyIiwiRXJyb3IiLCJfIiwiYmxvYiIsIkJsb2IiLCJhc19qc29uIiwidHlwZSIsIk9iamVjdCIsIkZpbGVTYXZlcl9taW4iLCJldmVudCIsInRhcmdldCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0VGltZW91dCIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsImdldFNpemUiLCJnZW5fYXV0byIsInJlbmRlcmVkIiwiaW5uZXJIVE1MIiwidmFsdWVzIiwiaXRlbSIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwibmFtZSIsInJlbW92ZSIsImNvbnNvbGUiLCJsb2ciLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZCIsIl9fd2VicGFja19leHBvcnRzX18iLCJMYW5kS2luZCIsIl9fd2JnX25ld19iYzg5MGRmM2U1ZTZhOTFkIiwiX193YmdfY2FsbF9lMTViNmFhMGM2ZDNjOTNmIiwiX193Ymdfc2VsZl85NWFkM2YxY2RkZDVhY2NjIiwiX193YmdfY3J5cHRvX2M5M2NjNWExNDdlMzU0MjIiLCJfX3diZ19nZXRSYW5kb21WYWx1ZXNfNThiNDY0MTZlYTdhMzNhMiIsIl9fd2JnX2dldFJhbmRvbVZhbHVlc19hM2EzYzJkZDU0OTRmZDM5IiwiX193YmdfcmVxdWlyZV8zNmE4OTVmMGE0ZWEwNTI5IiwiX193YmdfcmFuZG9tRmlsbFN5bmNfZjljYjc1MzFkOWMwYjE0NCIsIl9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmIiwiX193YmluZGdlbl9pc191bmRlZmluZWQiLCJfX3diaW5kZ2VuX2pzdmFsX2VxIiwiR2VuZXJhdG9yIiwiX193YmluZGdlbl90aHJvdyIsIl93b3JsZF9tYXBfZ2VuX2JnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJjYWNoZWRUZXh0RGVjb2RlciIsIlRleHREZWNvZGVyIiwiY2FjaGVnZXRVaW50OE1lbW9yeSIsImdldFVpbnQ4TWVtb3J5IiwiYnVmZmVyIiwiVWludDhBcnJheSIsImdldFN0cmluZ0Zyb21XYXNtIiwicHRyIiwibGVuIiwiZGVjb2RlIiwic3ViYXJyYXkiLCJjYWNoZWRHbG9iYWxBcmd1bWVudFB0ciIsImdsb2JhbEFyZ3VtZW50UHRyIiwiY2FjaGVnZXRVaW50MzJNZW1vcnkiLCJnZXRVaW50MzJNZW1vcnkiLCJVaW50MzJBcnJheSIsImZyZWV6ZSIsIkxvdyIsIk1pZGRsZSIsIkhpZ2giLCJTZWEiLCJNb3VudGFpbiIsIkZvcmVzdCIsIlBsYWluIiwiVG9wIiwiSGlnaGxhbmQiLCJEZWVwU2VhIiwiaGVhcCIsIkFycmF5IiwiZmlsbCIsInB1c2giLCJoZWFwX25leHQiLCJsZW5ndGgiLCJhZGRIZWFwT2JqZWN0Iiwib2JqIiwiaWR4IiwiYXJnMCIsImFyZzEiLCJ2YXJnMCIsIkZ1bmN0aW9uIiwiZ2V0T2JqZWN0IiwiY2FsbCIsInNlbGYiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJnZXRBcnJheVU4RnJvbVdhc20iLCJhcmcyIiwidmFyZzEiLCJyYW5kb21GaWxsU3luYyIsImkiLCJhIiwiYiIsImNyZWF0ZSIsInByb3RvdHlwZSIsImZyZWVHZW5lcmF0b3IiLCJfX3dyYXAiLCJCb2FyZCIsImZyZWVCb2FyZCIsIkNlbGwiLCJyZXRwdHIiLCJtZW0iLCJydXN0cHRyIiwicnVzdGxlbiIsInJlYWxSZXQiLCJzbGljZSIsImZyZWVDZWxsIiwicHJlc2VudCIsIndlYnBhY2tFbXB0eUNvbnRleHQiLCJyZXEiLCJlIiwiY29kZSIsImtleXMiLCJyZXNvbHZlIiwibW9kdWxlIiwiZXhwb3J0cyIsImlkIl0sIm1hcHBpbmdzIjoia0hBR2UsTUFBTUEsRUFJakJDLFlBQVlDLEdBQ1JDLEtBQUtDLE9BQVNDLFNBQVNDLGNBQWMsVUFDckNILEtBQUtDLE9BQU9HLFVBQVksU0FDeEJMLEVBQUtNLFlBQVlMLEtBQUtDLFFBRXRCRCxLQUFLTSxJQUFNTixLQUFLQyxPQUFPTSxXQUFXLE1BR3RDVCxPQUFPVSxHQUNILE1BQU1DLEVBQU1DLE9BQU9DLGtCQUFvQixFQUNqQ0MsRUFBT1osS0FBS0MsT0FBT1ksd0JBQ3pCYixLQUFLQyxPQUFPYSxNQUFRRixFQUFLRSxNQUFRTCxFQUNqQ1QsS0FBS0MsT0FBT2MsT0FBU0gsRUFBS0csT0FBU04sRUFHbkNULEtBQUtNLElBQUlVLFVBQVUsRUFBRyxFQUFHaEIsS0FBS0MsT0FBT2EsTUFBT2QsS0FBS0MsT0FBT2MsUUFFeERmLEtBQUtNLElBQUlXLFlBRVQsTUFBTUgsRUFBUU4sRUFBTU0sUUFDZEMsRUFBU1AsRUFBTU8sU0FDZkcsRUFBWWxCLEtBQUtDLE9BQU9hLE1BQVFBLEVBQ2hDSyxFQUFhbkIsS0FBS0MsT0FBT2MsT0FBU0EsRUFFbENLLEVBQVMsSUFBSUMsSUFDYkMsRUFBVSxJQUFJRCxJQUNwQixJQUFLLElBQUlFLEVBQUksRUFBR0EsRUFBSVQsRUFBT1MsSUFDdkIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlULEVBQVFTLElBQUssQ0FDN0IsTUFBTUMsRUFBT2pCLEVBQU1rQixHQUFHSCxFQUFHQyxHQUNuQkcsRUFBT0YsRUFBS0UsS0FDbEIsSUFBSUMsRUFBUVIsRUFBT1MsSUFBSUYsR0FTdkIsUUFSY0csSUFBVkYsUUFFY0UsS0FEZEYsRUFBUUgsRUFBS00sZUFFVFgsRUFBT1ksSUFBSUwsRUFBTUMsR0FHekI1QixLQUFLTSxJQUFJMkIsVUFBWUwsRUFDckI1QixLQUFLTSxJQUFJNEIsU0FBU1gsRUFBSUwsRUFBV00sRUFBSUws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QUNBN0gsRUFBQWdGLElBQUE2QyxFQUFBLEtBQ0EsV0FBQU8sT0FBQWpMLEVBQUE2QyxFQU9BN0UsU0FDQSxNQUFBME0sRUFBQS9DLElBQ1FiLEVBQUEsRUFBZ0I0RCxFQUFBeE0sS0FBQW9KLEtBQ3hCLE1BQUFxRCxFQUFBOUMsSUFDQStDLEVBQUFELEVBQUFELEVBQUEsR0FDQUcsRUFBQUYsRUFBQUQsRUFBQSxLQUVBSSxFQUFBekQsRUFBQXVELEVBQUFDLEdBQUFFLFFBRUEsT0FEUWpFLEVBQUEsRUFBb0I4RCxFQUFBLEVBQUFDLEdBQzVCQyxHQUtPLFNBQUFqRSxFQUFBUyxFQUFBQyxHQUNQLFVBQUF2RCxNQUFBcUQsRUFBQUMsRUFBQUMsOEZDcFVBLFNBQUEyRCxFQUFBQyxHQUNBLElBQUFDLEVBQUEsSUFBQXBILE1BQUEsdUJBQUFtSCxFQUFBLEtBRUEsTUFEQUMsRUFBQUMsS0FBQSxtQkFDQUQsRUFFQUYsRUFBQUksS0FBQSxXQUF1QyxVQUN2Q0osRUFBQUssUUFBQUwsRUFDQU0sRUFBQUMsUUFBQVAsRUFDQUEsRUFBQVEsR0FBQSIsImZpbGUiOiIyLmJvb3RzdHJhcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvYXJkIH0gZnJvbSAnd29ybGQtbWFwLWdlbic7XG5pbXBvcnQgeyBSZW5kZXJlciwgUmVuZGVyZWQsIExlZ2VuZCB9IGZyb20gJy4vcmVuZGVyZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgUmVuZGVyZXIge1xuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihyb290OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB0aGlzLmNhbnZhcy5jbGFzc05hbWUgPSAnc2NyZWVuJztcbiAgICAgICAgcm9vdC5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XG5cbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcbiAgICB9XG5cbiAgICByZW5kZXIoYm9hcmQ6IEJvYXJkKTogUmVuZGVyZWQge1xuICAgICAgICBjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIGRwcjtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKiBkcHI7XG5cbiAgICAgICAgLy8gQ2xlYXIgYXQgZmlyc3RcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gYm9hcmQud2lkdGgoKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gYm9hcmQuaGVpZ2h0KCk7XG4gICAgICAgIGNvbnN0IGNlbGxXaWR0aCA9IHRoaXMuY2FudmFzLndpZHRoIC8gd2lkdGg7XG4gICAgICAgIGNvbnN0IGNlbGxIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyBoZWlnaHQ7XG5cbiAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IE1hcDxudW1iZXIsIHN0cmluZz4oKTtcbiAgICAgICAgY29uc3QgbGVnZW5kcyA9IG5ldyBNYXA8bnVtYmVyLCBMZWdlbmQ+KCk7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBib2FyZC5hdCh4LCB5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBraW5kID0gY2VsbC5raW5kO1xuICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IGNvbG9ycy5nZXQoa2luZCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBjZWxsLmNvbG9yX2NvZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9ycy5zZXQoa2luZCwgY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KHggKiBjZWxsV2lkdGgsIHkgKiBjZWxsSGVpZ2h0LCBjZWxsV2lkdGgsIGNlbGxIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGlmICghbGVnZW5kcy5oYXMoa2luZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGNlbGwubGVnZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZHMuc2V0KGtpbmQsIHsgdGV4dCwgY29sb3IgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgcmV0dXJuIHsgbGVnZW5kcyB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFBvaW50M0QsIFBvaW50LCBDdWJlRGltZW5zaW9uLCBDdWJlQ29sb3IsIEN1YmUsIFBpeGVsVmlldyB9IGZyb20gJ29iZWxpc2suanMnO1xuaW1wb3J0IHsgTGFuZEtpbmQsIEJvYXJkLCBDZWxsIH0gZnJvbSAnd29ybGQtbWFwLWdlbic7XG5pbXBvcnQgeyBSZW5kZXJlciwgUmVuZGVyZWQsIExlZ2VuZCB9IGZyb20gJy4vcmVuZGVyZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlcjNEIGltcGxlbWVudHMgUmVuZGVyZXIge1xuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihyb290OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB0aGlzLmNhbnZhcy5jbGFzc05hbWUgPSAnc2NyZWVuJztcbiAgICAgICAgcm9vdC5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5lQ2VsbFNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgYm90aCA9IGhlaWdodCArIHdpZHRoO1xuICAgICAgICBjb25zdCBmcm9tSGVpZ2h0ID0gKCh0aGlzLmNhbnZhcy5oZWlnaHQgLSAyMDApIC8gYm90aCkgKiAyO1xuICAgICAgICBjb25zdCBmcm9tV2lkdGggPSAoKHRoaXMuY2FudmFzLndpZHRoIC8gYm90aCkgKiAyKSAvIE1hdGguc3FydCgzKTtcbiAgICAgICAgbGV0IGNlbGxTaXplID0gTWF0aC5mbG9vcihmcm9tSGVpZ2h0ID4gZnJvbVdpZHRoID8gZnJvbVdpZHRoIDogZnJvbUhlaWdodCk7XG4gICAgICAgIGlmIChjZWxsU2l6ZSAlIDIgPT09IDEpIHtcbiAgICAgICAgICAgIGNlbGxTaXplLS07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNlbGxTaXplID4gNiA/IGNlbGxTaXplIDogNjtcbiAgICB9XG5cbiAgICByZW5kZXIoYm9hcmQ6IEJvYXJkKTogUmVuZGVyZWQge1xuICAgICAgICBjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIGRwcjtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKiBkcHI7XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBib2FyZC53aWR0aCgpO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBib2FyZC5oZWlnaHQoKTtcbiAgICAgICAgY29uc3QgY2VsbFNpemUgPSB0aGlzLmRldGVybWluZUNlbGxTaXplKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHRoaXMuY2FudmFzLndpZHRoIC8gMiwgY2VsbFNpemUgKyA5OSAqIDIpO1xuICAgICAgICBjb25zdCBwaXhlbFZpZXcgPSBuZXcgUGl4ZWxWaWV3KHRoaXMuY2FudmFzLCBwb2ludCk7XG5cbiAgICAgICAgY29uc3QgY2FjaGUgPSBuZXcgTWFwPG51bWJlciwgQ3ViZT4oKTsgLy8gQWx0aXR1ZGUgLT4gQ3ViZVxuICAgICAgICBjb25zdCBjb2xvcnMgPSBuZXcgTWFwPG51bWJlciwgQ3ViZUNvbG9yPigpOyAvLyBraW5kIC0+IEN1YmVDb2xvclxuICAgICAgICBjb25zdCBsZWdlbmRzID0gbmV3IE1hcDxudW1iZXIsIExlZ2VuZD4oKTsgLy8ga2luZCAtPiBMZWdlbmRcblxuICAgICAgICBmdW5jdGlvbiBraW5kQ29sb3Ioa2luZDogTGFuZEtpbmQsIGNlbGw6IENlbGwpOiBDdWJlQ29sb3Ige1xuICAgICAgICAgICAgY29uc3QgY2FjaGVkID0gY29sb3JzLmdldChraW5kKTtcbiAgICAgICAgICAgIGlmIChjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmdiID0gY2VsbC5yZ2JfY29sb3IoKTtcbiAgICAgICAgICAgIGlmIChyZ2IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJnYiA9IDB4ZmZmZmZmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29sb3IgPSBuZXcgQ3ViZUNvbG9yKCkuZ2V0QnlIb3Jpem9udGFsQ29sb3IocmdiKTtcbiAgICAgICAgICAgIGNvbG9ycy5zZXQoa2luZCwgY29sb3IpO1xuXG4gICAgICAgICAgICAvLyBSZW1lbWJlciBsZWdlbmQgb2YgdGhlIGtpbmQgYWxzb1xuICAgICAgICAgICAgbGVnZW5kcy5zZXQoa2luZCwgeyB0ZXh0OiBjZWxsLmxlZ2VuZCgpLCBjb2xvcjogY2VsbC5jb2xvcl9jb2RlKCkgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNhbGNDdWJlKGtpbmQ6IExhbmRLaW5kLCBhbHQ6IG51bWJlciwgY2VsbDogQ2VsbCk6IEN1YmUge1xuICAgICAgICAgICAgY29uc3QgY29sb3IgPSBraW5kQ29sb3Ioa2luZCwgY2VsbCk7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBjZWxsU2l6ZSArIGFsdCAqIDI7XG4gICAgICAgICAgICBjb25zdCBkaW0gPSBuZXcgQ3ViZURpbWVuc2lvbihjZWxsU2l6ZSwgY2VsbFNpemUsIGhlaWdodCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEN1YmUoZGltLCBjb2xvciwgLypib3JkZXI6Ki8gZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3ViZUF0KGNlbGw6IENlbGwpOiBDdWJlIHtcbiAgICAgICAgICAgIGNvbnN0IGtpbmQgPSBjZWxsLmtpbmQ7XG4gICAgICAgICAgICBjb25zdCBhbHQgPSBjZWxsLmFsdGl0dWRlO1xuXG4gICAgICAgICAgICBpZiAoIWxlZ2VuZHMuaGFzKGtpbmQpKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtZW1iZXIgbGVnZW5kIG9mIHRoZSBraW5kIGFsc29cbiAgICAgICAgICAgICAgICBsZWdlbmRzLnNldChraW5kLCB7IHRleHQ6IGNlbGwubGVnZW5kKCksIGNvbG9yOiBjZWxsLmNvbG9yX2NvZGUoKSB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGtpbmQgPT09IExhbmRLaW5kLlRvd24gfHwga2luZCA9PT0gTGFuZEtpbmQuUGF0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxjQ3ViZShraW5kLCBhbHQsIGNlbGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoYWx0KTtcbiAgICAgICAgICAgIGlmIChjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGN1YmUgPSBjYWxjQ3ViZShraW5kLCBhbHQsIGNlbGwpO1xuICAgICAgICAgICAgY2FjaGUuc2V0KGFsdCwgY3ViZSk7XG4gICAgICAgICAgICByZXR1cm4gY3ViZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1YmUgPSBjdWJlQXQoYm9hcmQuYXQoeCwgeSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB0ID0gbmV3IFBvaW50M0QoeCAqIGNlbGxTaXplLCB5ICogY2VsbFNpemUsIDApO1xuICAgICAgICAgICAgICAgIHBpeGVsVmlldy5yZW5kZXJPYmplY3QoY3ViZSwgcHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlZ2VuZHMsXG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgR2VuZXJhdG9yLCBCb2FyZCB9IGZyb20gJ3dvcmxkLW1hcC1nZW4nO1xuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5pbXBvcnQgUmVuZGVyZXIyRCBmcm9tICcuLzJkJztcbmltcG9ydCBSZW5kZXJlcjNEIGZyb20gJy4vM2QnO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVyJztcblxuY29uc3QgYXBwID0gbmV3IGNsYXNzIHtcbiAgICBwcml2YXRlIGdlbmVyYXRvcjogR2VuZXJhdG9yO1xuICAgIHByaXZhdGUgZGltOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjdXJyZW50Qm9hcmQ6IEJvYXJkIHwgbnVsbDtcbiAgICBwcml2YXRlIHdpZHRoSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBoZWlnaHRJbnB1dDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwcml2YXRlIHNjcmVlblJvb3Q6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgcGFpbnRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgbGVnZW5kczogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXI7XG4gICAgcHJpdmF0ZSBkb3dubG9hZEpTT05CdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gR2VuZXJhdG9yLm5ldygpO1xuICAgICAgICB0aGlzLmN1cnJlbnRCb2FyZCA9IG51bGw7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGltZW5zaW9uLXNlbGVjdG9yJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdG9yW3NlbGVjdG9yLnNlbGVjdGVkSW5kZXhdIGFzIEhUTUxPcHRpb25FbGVtZW50O1xuICAgICAgICB0aGlzLmRpbSA9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgc2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vblZpc3VhbGl6YXRpb25DaGFuZ2UuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy53aWR0aElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZHRoLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgdGhpcy5oZWlnaHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWlnaHQtaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLnNjcmVlblJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuLXJvb3QnKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICB0aGlzLmluaXRSZW5kZXJlcigpO1xuXG4gICAgICAgIHRoaXMucGFpbnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFpbnQtYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHRoaXMucGFpbnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmxlZ2VuZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVnZW5kcycpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIHRoaXMuZG93bmxvYWRKU09OQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLWpzb24tYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZG93bmxvYWRKU09OQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkRvd25sb2FkSlNPTi5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBnZXRTaXplKCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHBhcnNlSW50KHRoaXMud2lkdGhJbnB1dC52YWx1ZSwgMTApO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBwYXJzZUludCh0aGlzLmhlaWdodElucHV0LnZhbHVlLCAxMCk7XG4gICAgICAgIGlmICghaXNOYU4od2lkdGgpICYmICFpc05hTihoZWlnaHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGltID09PSAnM2QnKSB7XG4gICAgICAgICAgICByZXR1cm4gWzEyMCwgMTIwXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnNjcmVlblJvb3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgaWYgKCFpc05hTih3aWR0aCkpIHtcbiAgICAgICAgICAgIC8vIE5vdGU6IGhlaWdodCBpcyBOYU5cbiAgICAgICAgICAgIGNvbnN0IGNlbGxQaXggPSByZWN0LndpZHRoIC8gd2lkdGg7XG4gICAgICAgICAgICByZXR1cm4gW3dpZHRoLCBNYXRoLmZsb29yKHJlY3QuaGVpZ2h0IC8gY2VsbFBpeCldO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihoZWlnaHQpKSB7XG4gICAgICAgICAgICAvLyBOb3RlOiB3aWR0aCBpcyBOYU5cbiAgICAgICAgICAgIGNvbnN0IGNlbGxQaXggPSByZWN0LmhlaWdodCAvIGhlaWdodDtcbiAgICAgICAgICAgIHJldHVybiBbTWF0aC5mbG9vcihyZWN0LndpZHRoIC8gY2VsbFBpeCksIGhlaWdodF07XG4gICAgICAgIH0gLyogbG9uZ2VyIHNpZGUgbGVuZ3RoIGlzIDIwMCBjZWxscyBieSBkZWZhdWx0ICovIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbWF4ID0gcmVjdC5oZWlnaHQgPiByZWN0LndpZHRoID8gcmVjdC5oZWlnaHQgOiByZWN0LndpZHRoO1xuICAgICAgICAgICAgY29uc3QgY2VsbFBpeCA9IG1heCAvIDIwMDtcbiAgICAgICAgICAgIHJldHVybiBbTWF0aC5mbG9vcihyZWN0LndpZHRoIC8gY2VsbFBpeCksIE1hdGguZmxvb3IocmVjdC5oZWlnaHQgLyBjZWxsUGl4KV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbml0UmVuZGVyZXIoKSB7XG4gICAgICAgIGNvbnN0IHByZXYgPSB0aGlzLnNjcmVlblJvb3QuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKHByZXYgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuUm9vdC5yZW1vdmVDaGlsZChwcmV2KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRCb2FyZCA9IG51bGw7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLmRpbSkge1xuICAgICAgICAgICAgY2FzZSAnMmQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIyRCh0aGlzLnNjcmVlblJvb3QpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnM2QnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIzRCh0aGlzLnNjcmVlblJvb3QpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY29udGV4dCAke3RoaXMuZGltfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Eb3dubG9hZEpTT04oXzogRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJvYXJkID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt0aGlzLmN1cnJlbnRCb2FyZC5hc19qc29uKCldLCB7IHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnIH0pO1xuICAgICAgICBzYXZlQXMoYmxvYiwgJ2JvYXJkLmpzb24nKTtcbiAgICB9XG5cbiAgICBvblZpc3VhbGl6YXRpb25DaGFuZ2UoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RvcltzZWxlY3Rvci5zZWxlY3RlZEluZGV4XSBhcyBIVE1MT3B0aW9uRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGltID0gb3B0aW9uLnZhbHVlO1xuICAgICAgICBpZiAodGhpcy5kaW0gPT09IGRpbSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGltID0gZGltO1xuICAgICAgICB0aGlzLmluaXRSZW5kZXJlcigpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgLy8gVE9ETzogTG9hZGluZyBpbmRpY2F0b3IgY2Fubm90IGJlIGRpc3BsYXllZCBzaW5jZSBtYXAgZ2VuZXJhdGlvbiBpcyBydW4gaW4gbWFpbiB0aHJlYWQuXG4gICAgICAgIC8vIFdoZW4gbWFwIHNpemUgaXMgdmVyeSBsYXJnZSBhbmQgaXQgY29uc3VtZXMgdGltZSwgQ1BVIGNvcmUgaXMgYWxzbyBjb25zdW1lZCBmb3IgbWFpbiB0aHJlYWQuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlLCBubyBhbmltYXRpb24gaXMgYWN0dWFsbHkgcmVuZGVyZWQuXG4gICAgICAgIC8vIFRvIHByZXZlbnQgdGhpcywgbWFwIGdlbmVyYXRpb24gbXVzdCBiZSBydW4gaW4gYW5vdGhlciB0aHJlYWQgYW5kIFJ1c3QgY2FuIGRvIGl0LlxuXG4gICAgICAgIC8vIHRoaXMucGFpbnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuICAgICAgICB0aGlzLnBhaW50QnV0dG9uLnRleHRDb250ZW50ID0gJ1BhaW50aW5nLi4uJztcbiAgICAgICAgdGhpcy5wYWludEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICB0aGlzLmRvd25sb2FkSlNPTkJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICAvLyBXYWl0IG5leHQgdGljayB0byBjaGFuZ2UgdGV4dFxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPSB0aGlzLmdldFNpemUoKTtcbiAgICAgICAgICAgIGNvbnN0IGJvYXJkID0gdGhpcy5nZW5lcmF0b3IuZ2VuX2F1dG8od2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBjb25zdCByZW5kZXJlZCA9IHRoaXMucmVuZGVyZXIucmVuZGVyKGJvYXJkKTtcblxuICAgICAgICAgICAgdGhpcy5sZWdlbmRzLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsZWdlbmQgb2YgcmVuZGVyZWQubGVnZW5kcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTmFtZSA9ICdsZWdlbmQnO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb2xvci5jbGFzc05hbWUgPSAnbGVnZW5kLWNvbG9yJztcbiAgICAgICAgICAgICAgICBjb2xvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBsZWdlbmQuY29sb3IgfHwgJ25vbmUnO1xuICAgICAgICAgICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoY29sb3IpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIG5hbWUuY2xhc3NOYW1lID0gJ2xlZ2VuZC1uYW1lJztcbiAgICAgICAgICAgICAgICBuYW1lLnRleHRDb250ZW50ID0gbGVnZW5kLnRleHQ7XG4gICAgICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChuYW1lKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubGVnZW5kcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJvYXJkID0gYm9hcmQ7XG5cbiAgICAgICAgICAgIC8vIHRoaXMucGFpbnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuICAgICAgICAgICAgdGhpcy5wYWludEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgdGhpcy5wYWludEJ1dHRvbi50ZXh0Q29udGVudCA9ICdHZW5lcmF0ZSc7XG4gICAgICAgICAgICB0aGlzLmRvd25sb2FkSlNPTkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbnN1bWVkOicsIERhdGUubm93KCkgLSBzdGFydCk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cbn0oKTtcblxuYXBwLnJlbmRlcigpO1xuIiwiLyogdHNsaW50OmRpc2FibGUgKi9cbmltcG9ydCAqIGFzIHdhc20gZnJvbSAnLi93b3JsZF9tYXBfZ2VuX2JnJztcblxubGV0IGNhY2hlZFRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpO1xuXG5sZXQgY2FjaGVnZXRVaW50OE1lbW9yeSA9IG51bGw7XG5mdW5jdGlvbiBnZXRVaW50OE1lbW9yeSgpIHtcbiAgICBpZiAoY2FjaGVnZXRVaW50OE1lbW9yeSA9PT0gbnVsbCB8fCBjYWNoZWdldFVpbnQ4TWVtb3J5LmJ1ZmZlciAhPT0gd2FzbS5tZW1vcnkuYnVmZmVyKSB7XG4gICAgICAgIGNhY2hlZ2V0VWludDhNZW1vcnkgPSBuZXcgVWludDhBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVnZXRVaW50OE1lbW9yeTtcbn1cblxuZnVuY3Rpb24gZ2V0U3RyaW5nRnJvbVdhc20ocHRyLCBsZW4pIHtcbiAgICByZXR1cm4gY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKGdldFVpbnQ4TWVtb3J5KCkuc3ViYXJyYXkocHRyLCBwdHIgKyBsZW4pKTtcbn1cblxubGV0IGNhY2hlZEdsb2JhbEFyZ3VtZW50UHRyID0gbnVsbDtcbmZ1bmN0aW9uIGdsb2JhbEFyZ3VtZW50UHRyKCkge1xuICAgIGlmIChjYWNoZWRHbG9iYWxBcmd1bWVudFB0ciA9PT0gbnVsbCkge1xuICAgICAgICBjYWNoZWRHbG9iYWxBcmd1bWVudFB0ciA9IHdhc20uX193YmluZGdlbl9nbG9iYWxfYXJndW1lbnRfcHRyKCk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWRHbG9iYWxBcmd1bWVudFB0cjtcbn1cblxubGV0IGNhY2hlZ2V0VWludDMyTWVtb3J5ID0gbnVsbDtcbmZ1bmN0aW9uIGdldFVpbnQzMk1lbW9yeSgpIHtcbiAgICBpZiAoY2FjaGVnZXRVaW50MzJNZW1vcnkgPT09IG51bGwgfHwgY2FjaGVnZXRVaW50MzJNZW1vcnkuYnVmZmVyICE9PSB3YXNtLm1lbW9yeS5idWZmZXIpIHtcbiAgICAgICAgY2FjaGVnZXRVaW50MzJNZW1vcnkgPSBuZXcgVWludDMyQXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZ2V0VWludDMyTWVtb3J5O1xufVxuLyoqXG4qIFJlc29sdXRpb24gb2YgdGhlIGJvYXJkLlxuKi9cbmV4cG9ydCBjb25zdCBSZXNvbHV0aW9uID0gT2JqZWN0LmZyZWV6ZSh7IExvdzowLE1pZGRsZToxLEhpZ2g6MiwgfSk7XG4vKipcbiogUmVwcmVzZW50cyB0aGUga2luZCBvZiBjZWxsLiBgcHJlc2V0KClgIG1ldGhvZCByZXR1cm5zIGEgcHJlc2V0IGNlbGwgY29uc3RhbnRzIGZvclxuKiB0aGUga2luZC5cbiovXG5leHBvcnQgY29uc3QgTGFuZEtpbmQgPSBPYmplY3QuZnJlZXplKHsgU2VhOjAsTW91bnRhaW46MSxGb3Jlc3Q6MixQbGFpbjozLFRvd246NCxUb3A6NSxIaWdobGFuZDo2LERlZXBTZWE6NyxQYXRoOjgsIH0pO1xuXG5jb25zdCBoZWFwID0gbmV3IEFycmF5KDMyKTtcblxuaGVhcC5maWxsKHVuZGVmaW5lZCk7XG5cbmhlYXAucHVzaCh1bmRlZmluZWQsIG51bGwsIHRydWUsIGZhbHNlKTtcblxubGV0IGhlYXBfbmV4dCA9IGhlYXAubGVuZ3RoO1xuXG5mdW5jdGlvbiBhZGRIZWFwT2JqZWN0KG9iaikge1xuICAgIGlmIChoZWFwX25leHQgPT09IGhlYXAubGVuZ3RoKSBoZWFwLnB1c2goaGVhcC5sZW5ndGggKyAxKTtcbiAgICBjb25zdCBpZHggPSBoZWFwX25leHQ7XG4gICAgaGVhcF9uZXh0ID0gaGVhcFtpZHhdO1xuXG4gICAgaGVhcFtpZHhdID0gb2JqO1xuICAgIHJldHVybiBpZHg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19uZXdfYmM4OTBkZjNlNWU2YTkxZChhcmcwLCBhcmcxKSB7XG4gICAgbGV0IHZhcmcwID0gZ2V0U3RyaW5nRnJvbVdhc20oYXJnMCwgYXJnMSk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QobmV3IEZ1bmN0aW9uKHZhcmcwKSk7XG59XG5cbmZ1bmN0aW9uIGdldE9iamVjdChpZHgpIHsgcmV0dXJuIGhlYXBbaWR4XTsgfVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfY2FsbF9lMTViNmFhMGM2ZDNjOTNmKGFyZzAsIGFyZzEpIHtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChnZXRPYmplY3QoYXJnMCkuY2FsbChnZXRPYmplY3QoYXJnMSkpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX3NlbGZfOTVhZDNmMWNkZGQ1YWNjYyhhcmcwKSB7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QoZ2V0T2JqZWN0KGFyZzApLnNlbGYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfY3J5cHRvX2M5M2NjNWExNDdlMzU0MjIoYXJnMCkge1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KGdldE9iamVjdChhcmcwKS5jcnlwdG8pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfZ2V0UmFuZG9tVmFsdWVzXzU4YjQ2NDE2ZWE3YTMzYTIoYXJnMCkge1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KGdldE9iamVjdChhcmcwKS5nZXRSYW5kb21WYWx1ZXMpO1xufVxuXG5mdW5jdGlvbiBnZXRBcnJheVU4RnJvbVdhc20ocHRyLCBsZW4pIHtcbiAgICByZXR1cm4gZ2V0VWludDhNZW1vcnkoKS5zdWJhcnJheShwdHIgLyAxLCBwdHIgLyAxICsgbGVuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX2dldFJhbmRvbVZhbHVlc19hM2EzYzJkZDU0OTRmZDM5KGFyZzAsIGFyZzEsIGFyZzIpIHtcbiAgICBsZXQgdmFyZzEgPSBnZXRBcnJheVU4RnJvbVdhc20oYXJnMSwgYXJnMik7XG4gICAgZ2V0T2JqZWN0KGFyZzApLmdldFJhbmRvbVZhbHVlcyh2YXJnMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19yZXF1aXJlXzM2YTg5NWYwYTRlYTA1MjkoYXJnMCwgYXJnMSkge1xuICAgIGxldCB2YXJnMCA9IGdldFN0cmluZ0Zyb21XYXNtKGFyZzAsIGFyZzEpO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJlcXVpcmUodmFyZzApKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX3JhbmRvbUZpbGxTeW5jX2Y5Y2I3NTMxZDljMGIxNDQoYXJnMCwgYXJnMSwgYXJnMikge1xuICAgIGxldCB2YXJnMSA9IGdldEFycmF5VThGcm9tV2FzbShhcmcxLCBhcmcyKTtcbiAgICBnZXRPYmplY3QoYXJnMCkucmFuZG9tRmlsbFN5bmModmFyZzEpO1xufVxuXG5mdW5jdGlvbiBkcm9wT2JqZWN0KGlkeCkge1xuICAgIGlmIChpZHggPCAzNikgcmV0dXJuO1xuICAgIGhlYXBbaWR4XSA9IGhlYXBfbmV4dDtcbiAgICBoZWFwX25leHQgPSBpZHg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZihpKSB7IGRyb3BPYmplY3QoaSk7IH1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5faXNfdW5kZWZpbmVkKGlkeCkge1xuICAgIHJldHVybiBnZXRPYmplY3QoaWR4KSA9PT0gdW5kZWZpbmVkID8gMSA6IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX2pzdmFsX2VxKGEsIGIpIHtcbiAgICByZXR1cm4gZ2V0T2JqZWN0KGEpID09PSBnZXRPYmplY3QoYikgPyAxIDogMDtcbn1cblxuZnVuY3Rpb24gZnJlZUdlbmVyYXRvcihwdHIpIHtcblxuICAgIHdhc20uX193YmdfZ2VuZXJhdG9yX2ZyZWUocHRyKTtcbn1cbi8qKlxuKiBSZXByZXNlbnRzIHJhbmRvbSBtYXAgZ2VuZXJhdG9yLiBJbiBjb250cmFzdCB0byBgZ2VuOjpSYW5kb21Cb2FyZEdlbmAsIGl0IG9ubHkgcHJvdmlkZXMgbGltaXRlZFxuKiBmdW5jdGlvbmFsaXR5LiBJdCBjYW5ub3QgYmUgaW5pdGlhbGl6ZWQgd2l0aCBzcGVjaWZpYyBzZWVkLiBBbmQgbWFwIHJlc29sdXRpb24gaXMgYWx3YXlzIGRldGVjdGVkXG4qIGZyb20gaXRzIHNpemUuXG4qL1xuZXhwb3J0IGNsYXNzIEdlbmVyYXRvciB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKEdlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcbiAgICAgICAgZnJlZUdlbmVyYXRvcihwdHIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogQHJldHVybnMge0dlbmVyYXRvcn1cbiAgICAqL1xuICAgIHN0YXRpYyBuZXcoKSB7XG4gICAgICAgIHJldHVybiBHZW5lcmF0b3IuX193cmFwKHdhc20uZ2VuZXJhdG9yX25ldygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBHZW5lcmF0ZXMgcmFuZG9tIG1hcCBib2FyZCB3aXRoIGdpdmVuIHdpZHRoIGFuZCBoZWlnaHQuIFBhcmFtZXRlcnMgYXJlIGluIG51bWJlciBvZiBjZWxscy5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhcmcwXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYXJnMVxuICAgICogQHJldHVybnMge0JvYXJkfVxuICAgICovXG4gICAgZ2VuX2F1dG8oYXJnMCwgYXJnMSkge1xuICAgICAgICByZXR1cm4gQm9hcmQuX193cmFwKHdhc20uZ2VuZXJhdG9yX2dlbl9hdXRvKHRoaXMucHRyLCBhcmcwLCBhcmcxKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogR2VuZXJhdGVzIHJhbmRvbSBtYXAgYm9hcmQgd2l0aCBnaXZlbiByZXNvbHV0aW9uLCB3aWR0aCBhbmQgaGVpZ2h0LiBXaWR0aCBhbmQgaGVpZ2h0IGFyZVxuICAgICogaW4gbnVtYmVyIG9mIGNlbGxzLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFyZzBcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhcmcxXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYXJnMlxuICAgICogQHJldHVybnMge0JvYXJkfVxuICAgICovXG4gICAgZ2VuKGFyZzAsIGFyZzEsIGFyZzIpIHtcbiAgICAgICAgcmV0dXJuIEJvYXJkLl9fd3JhcCh3YXNtLmdlbmVyYXRvcl9nZW4odGhpcy5wdHIsIGFyZzAsIGFyZzEsIGFyZzIpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZyZWVCb2FyZChwdHIpIHtcblxuICAgIHdhc20uX193YmdfYm9hcmRfZnJlZShwdHIpO1xufVxuLyoqXG4qIFJlcHJlc2VudHMgb25lIGJvYXJkIGdlbmVyYXRlZCBieSByYW5kb20gbWFwIGdlbmVyYXRvci5cbiovXG5leHBvcnQgY2xhc3MgQm9hcmQge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShCb2FyZC5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcbiAgICAgICAgZnJlZUJvYXJkKHB0cik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIHdpZHRoIGFzIG51bWJlciBvZiBjZWxscyBpbiBudW1iZXJcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICB3aWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHdhc20uYm9hcmRfd2lkdGgodGhpcy5wdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgaGVpZ2h0IGFzIG51bWJlciBvZiBjZWxscyBpbiBudW1iZXJcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBoZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB3YXNtLmJvYXJkX2hlaWdodCh0aGlzLnB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICogUmV0dXJucyBjZWxsIGF0IHBvc2l0aW9uICh4LCB5KS5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhcmcwXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYXJnMVxuICAgICogQHJldHVybnMge0NlbGx9XG4gICAgKi9cbiAgICBhdChhcmcwLCBhcmcxKSB7XG4gICAgICAgIHJldHVybiBDZWxsLl9fd3JhcCh3YXNtLmJvYXJkX2F0KHRoaXMucHRyLCBhcmcwLCBhcmcxKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogUmV0dXJucyBhIGJvYXJkIGJ5IHNlcmlhbGl6aW5nIGFzIEpTT04uIE9uIGZhaWx1cmUsIGl0IHJldHVybnMgYE5vbmVgIChgdW5kZWZpbmVkYCBpblxuICAgICogSmF2YVNjcmlwdClcbiAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgKi9cbiAgICBhc19qc29uKCkge1xuICAgICAgICBjb25zdCByZXRwdHIgPSBnbG9iYWxBcmd1bWVudFB0cigpO1xuICAgICAgICB3YXNtLmJvYXJkX2FzX2pzb24ocmV0cHRyLCB0aGlzLnB0cik7XG4gICAgICAgIGNvbnN0IG1lbSA9IGdldFVpbnQzMk1lbW9yeSgpO1xuICAgICAgICBjb25zdCBydXN0cHRyID0gbWVtW3JldHB0ciAvIDRdO1xuICAgICAgICBjb25zdCBydXN0bGVuID0gbWVtW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgaWYgKHJ1c3RwdHIgPT09IDApIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVhbFJldCA9IGdldFN0cmluZ0Zyb21XYXNtKHJ1c3RwdHIsIHJ1c3RsZW4pLnNsaWNlKCk7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHJ1c3RwdHIsIHJ1c3RsZW4gKiAxKTtcbiAgICAgICAgcmV0dXJuIHJlYWxSZXQ7XG5cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZyZWVDZWxsKHB0cikge1xuXG4gICAgd2FzbS5fX3diZ19jZWxsX2ZyZWUocHRyKTtcbn1cbi8qKlxuKiBSZXByZXNlbnRzIG9uZSBjZWxsIGluIGJvYXJkLiBJbiBjb250cmFzdCB0byBgbGFuZDo6TGFuZGAsIGl0IG9ubHkgY29udGFpbnMgaXRzIGxhbmQga2luZCBhbmRcbiogYWx0aXR1ZGUgaW4gb3JkZXIgdG8gcmVkdWNlIHRvdGFsIG1lbW9yeSBzaXplLlxuKi9cbmV4cG9ydCBjbGFzcyBDZWxsIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoQ2VsbC5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcbiAgICAgICAgZnJlZUNlbGwocHRyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgcmV0dXJuIHdhc20uX193YmdfZ2V0X2NlbGxfa2luZCh0aGlzLnB0cik7XG4gICAgfVxuICAgIHNldCBraW5kKGFyZzApIHtcbiAgICAgICAgcmV0dXJuIHdhc20uX193Ymdfc2V0X2NlbGxfa2luZCh0aGlzLnB0ciwgYXJnMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGdldCBhbHRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHdhc20uX193YmdfZ2V0X2NlbGxfYWx0aXR1ZGUodGhpcy5wdHIpO1xuICAgIH1cbiAgICBzZXQgYWx0aXR1ZGUoYXJnMCkge1xuICAgICAgICByZXR1cm4gd2FzbS5fX3diZ19zZXRfY2VsbF9hbHRpdHVkZSh0aGlzLnB0ciwgYXJnMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogUmV0dXJucyBjb2xvciBjb2RlIG9mIGxhbmQgYXMgYCNycmdnYmJgIGZvcm1hdCBzdHJpbmcgZnJvbSBsYW5kIGtpbmQuXG4gICAgKiBXaGVuIG5vIGNvbG9yIGlzIHNldCwgcmV0dXJucyBgTm9uZWAuIEl0IG1lYW5zIGB1bmRlZmluZWRgIGluIEphdmFTY3JpcHQgc2lkZS5cbiAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgKi9cbiAgICBjb2xvcl9jb2RlKCkge1xuICAgICAgICBjb25zdCByZXRwdHIgPSBnbG9iYWxBcmd1bWVudFB0cigpO1xuICAgICAgICB3YXNtLmNlbGxfY29sb3JfY29kZShyZXRwdHIsIHRoaXMucHRyKTtcbiAgICAgICAgY29uc3QgbWVtID0gZ2V0VWludDMyTWVtb3J5KCk7XG4gICAgICAgIGNvbnN0IHJ1c3RwdHIgPSBtZW1bcmV0cHRyIC8gNF07XG4gICAgICAgIGNvbnN0IHJ1c3RsZW4gPSBtZW1bcmV0cHRyIC8gNCArIDFdO1xuICAgICAgICBpZiAocnVzdHB0ciA9PT0gMCkgcmV0dXJuO1xuICAgICAgICBjb25zdCByZWFsUmV0ID0gZ2V0U3RyaW5nRnJvbVdhc20ocnVzdHB0ciwgcnVzdGxlbikuc2xpY2UoKTtcbiAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2ZyZWUocnVzdHB0ciwgcnVzdGxlbiAqIDEpO1xuICAgICAgICByZXR1cm4gcmVhbFJldDtcblxuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgUkdCIGNvbG9yIGFzIHUzMi4gMH44IGJpdHMgZm9yIEIsIDl+MTYgYml0cyBmb3IgRywgMTd+MjQgYml0cyBmb3IgUi5cbiAgICAqIFdoZW4gbm8gY29sb3IgaXMgc2V0LCByZXR1cm5zIGBOb25lYC4gSXQgbWVhbnMgYHVuZGVmaW5lZGAgaW4gSmF2YVNjcmlwdCBzaWRlLlxuICAgICogQHJldHVybnMge251bWJlciB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIHJnYl9jb2xvcigpIHtcbiAgICAgICAgY29uc3QgcmV0cHRyID0gZ2xvYmFsQXJndW1lbnRQdHIoKTtcblxuICAgICAgICB3YXNtLmNlbGxfcmdiX2NvbG9yKHJldHB0ciwgdGhpcy5wdHIpO1xuICAgICAgICBjb25zdCBwcmVzZW50ID0gZ2V0VWludDMyTWVtb3J5KClbcmV0cHRyIC8gNF07XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0VWludDMyTWVtb3J5KClbcmV0cHRyIC8gNCArIDFdO1xuICAgICAgICByZXR1cm4gcHJlc2VudCA9PT0gMCA/IHVuZGVmaW5lZCA6IHZhbHVlO1xuXG4gICAgfVxuICAgIC8qKlxuICAgICogUmV0dXJucyBsZWdlbmQgb2YgbGFuZCBhcyBzdHJpbmcgZnJvbSBsYW5kIGtpbmQuXG4gICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICovXG4gICAgbGVnZW5kKCkge1xuICAgICAgICBjb25zdCByZXRwdHIgPSBnbG9iYWxBcmd1bWVudFB0cigpO1xuICAgICAgICB3YXNtLmNlbGxfbGVnZW5kKHJldHB0ciwgdGhpcy5wdHIpO1xuICAgICAgICBjb25zdCBtZW0gPSBnZXRVaW50MzJNZW1vcnkoKTtcbiAgICAgICAgY29uc3QgcnVzdHB0ciA9IG1lbVtyZXRwdHIgLyA0XTtcbiAgICAgICAgY29uc3QgcnVzdGxlbiA9IG1lbVtyZXRwdHIgLyA0ICsgMV07XG5cbiAgICAgICAgY29uc3QgcmVhbFJldCA9IGdldFN0cmluZ0Zyb21XYXNtKHJ1c3RwdHIsIHJ1c3RsZW4pLnNsaWNlKCk7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHJ1c3RwdHIsIHJ1c3RsZW4gKiAxKTtcbiAgICAgICAgcmV0dXJuIHJlYWxSZXQ7XG5cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX3Rocm93KHB0ciwgbGVuKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGdldFN0cmluZ0Zyb21XYXNtKHB0ciwgbGVuKSk7XG59XG5cbiIsImZ1bmN0aW9uIHdlYnBhY2tFbXB0eUNvbnRleHQocmVxKSB7XG5cdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHR0aHJvdyBlO1xufVxud2VicGFja0VtcHR5Q29udGV4dC5rZXlzID0gZnVuY3Rpb24oKSB7IHJldHVybiBbXTsgfTtcbndlYnBhY2tFbXB0eUNvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG53ZWJwYWNrRW1wdHlDb250ZXh0LmlkID0gNDY7Il0sInNvdXJjZVJvb3QiOiIifQ==