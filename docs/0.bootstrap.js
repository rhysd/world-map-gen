(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../pkg sync recursive":
/*!*******************!*\
  !*** ../pkg sync ***!
  \*******************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"../pkg sync recursive\";\n\n//# sourceURL=webpack:///../pkg_sync?");

/***/ }),

/***/ "../pkg/world_map_gen.js":
/*!*******************************!*\
  !*** ../pkg/world_map_gen.js ***!
  \*******************************/
/*! exports provided: LandKind, __wbg_new_bc890df3e5e6a91d, __wbg_call_e15b6aa0c6d3c93f, __wbg_self_95ad3f1cddd5accc, __wbg_crypto_c93cc5a147e35422, __wbg_getRandomValues_58b46416ea7a33a2, __wbg_getRandomValues_a3a3c2dd5494fd39, __wbg_require_36a895f0a4ea0529, __wbg_randomFillSync_f9cb7531d9c0b144, __wbindgen_object_drop_ref, __wbindgen_is_undefined, __wbindgen_jsval_eq, Board, Generator, Cell, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LandKind\", function() { return LandKind; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_new_bc890df3e5e6a91d\", function() { return __wbg_new_bc890df3e5e6a91d; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_call_e15b6aa0c6d3c93f\", function() { return __wbg_call_e15b6aa0c6d3c93f; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_self_95ad3f1cddd5accc\", function() { return __wbg_self_95ad3f1cddd5accc; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_crypto_c93cc5a147e35422\", function() { return __wbg_crypto_c93cc5a147e35422; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_getRandomValues_58b46416ea7a33a2\", function() { return __wbg_getRandomValues_58b46416ea7a33a2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_getRandomValues_a3a3c2dd5494fd39\", function() { return __wbg_getRandomValues_a3a3c2dd5494fd39; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_require_36a895f0a4ea0529\", function() { return __wbg_require_36a895f0a4ea0529; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_randomFillSync_f9cb7531d9c0b144\", function() { return __wbg_randomFillSync_f9cb7531d9c0b144; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_object_drop_ref\", function() { return __wbindgen_object_drop_ref; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_is_undefined\", function() { return __wbindgen_is_undefined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_jsval_eq\", function() { return __wbindgen_jsval_eq; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Board\", function() { return Board; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Generator\", function() { return Generator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Cell\", function() { return Cell; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return __wbindgen_throw; });\n/* harmony import */ var _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./world_map_gen_bg */ \"../pkg/world_map_gen_bg.wasm\");\n/* tslint:disable */\n\n\nlet cachedTextDecoder = new TextDecoder('utf-8');\n\nlet cachegetUint8Memory = null;\nfunction getUint8Memory() {\n    if (cachegetUint8Memory === null || cachegetUint8Memory.buffer !== _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint8Memory = new Uint8Array(_world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint8Memory;\n}\n\nfunction getStringFromWasm(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory().subarray(ptr, ptr + len));\n}\n\nlet cachedGlobalArgumentPtr = null;\nfunction globalArgumentPtr() {\n    if (cachedGlobalArgumentPtr === null) {\n        cachedGlobalArgumentPtr = _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_global_argument_ptr\"]();\n    }\n    return cachedGlobalArgumentPtr;\n}\n\nlet cachegetUint32Memory = null;\nfunction getUint32Memory() {\n    if (cachegetUint32Memory === null || cachegetUint32Memory.buffer !== _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint32Memory = new Uint32Array(_world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint32Memory;\n}\n/**\n* Represents the kind of cell. `preset()` method returns a preset cell constants for\n* the kind.\n*/\nconst LandKind = Object.freeze({ Sea:0,Mountain:1,Forest:2,Plain:3,Town:4,Top:5,Highland:6,DeepSea:7,Path:8, });\n\nconst heap = new Array(32);\n\nheap.fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction __wbg_new_bc890df3e5e6a91d(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n    return addHeapObject(new Function(varg0));\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nfunction __wbg_call_e15b6aa0c6d3c93f(arg0, arg1) {\n    return addHeapObject(getObject(arg0).call(getObject(arg1)));\n}\n\nfunction __wbg_self_95ad3f1cddd5accc(arg0) {\n    return addHeapObject(getObject(arg0).self);\n}\n\nfunction __wbg_crypto_c93cc5a147e35422(arg0) {\n    return addHeapObject(getObject(arg0).crypto);\n}\n\nfunction __wbg_getRandomValues_58b46416ea7a33a2(arg0) {\n    return addHeapObject(getObject(arg0).getRandomValues);\n}\n\nfunction getArrayU8FromWasm(ptr, len) {\n    return getUint8Memory().subarray(ptr / 1, ptr / 1 + len);\n}\n\nfunction __wbg_getRandomValues_a3a3c2dd5494fd39(arg0, arg1, arg2) {\n    let varg1 = getArrayU8FromWasm(arg1, arg2);\n    getObject(arg0).getRandomValues(varg1);\n}\n\nfunction __wbg_require_36a895f0a4ea0529(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n    return addHeapObject(__webpack_require__(\"../pkg sync recursive\")(varg0));\n}\n\nfunction __wbg_randomFillSync_f9cb7531d9c0b144(arg0, arg1, arg2) {\n    let varg1 = getArrayU8FromWasm(arg1, arg2);\n    getObject(arg0).randomFillSync(varg1);\n}\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction __wbindgen_object_drop_ref(i) { dropObject(i); }\n\nfunction __wbindgen_is_undefined(idx) {\n    return getObject(idx) === undefined ? 1 : 0;\n}\n\nfunction __wbindgen_jsval_eq(a, b) {\n    return getObject(a) === getObject(b) ? 1 : 0;\n}\n\nfunction freeBoard(ptr) {\n\n    _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_board_free\"](ptr);\n}\n/**\n* Represents one board generated by random map generator.\n*/\nclass Board {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Board.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n        freeBoard(ptr);\n    }\n\n    /**\n    * @returns {number}\n    */\n    get width() {\n        return _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_get_board_width\"](this.ptr);\n    }\n    set width(arg0) {\n        return _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_set_board_width\"](this.ptr, arg0);\n    }\n    /**\n    * @returns {number}\n    */\n    get height() {\n        return _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_get_board_height\"](this.ptr);\n    }\n    set height(arg0) {\n        return _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_set_board_height\"](this.ptr, arg0);\n    }\n    /**\n    * Returns cell at position (x, y).\n    * @param {number} arg0\n    * @param {number} arg1\n    * @returns {Cell}\n    */\n    at(arg0, arg1) {\n        return Cell.__wrap(_world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"board_at\"](this.ptr, arg0, arg1));\n    }\n    /**\n    * Returns color of land as `#rrggbb` format string from land kind.\n    * @param {number} arg0\n    * @returns {string}\n    */\n    land_color(arg0) {\n        const retptr = globalArgumentPtr();\n        _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"board_land_color\"](retptr, this.ptr, arg0);\n        const mem = getUint32Memory();\n        const rustptr = mem[retptr / 4];\n        const rustlen = mem[retptr / 4 + 1];\n\n        const realRet = getStringFromWasm(rustptr, rustlen).slice();\n        _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_free\"](rustptr, rustlen * 1);\n        return realRet;\n\n    }\n    /**\n    * Returns legend of land as string from land kind.\n    * @param {number} arg0\n    * @returns {string}\n    */\n    land_legend(arg0) {\n        const retptr = globalArgumentPtr();\n        _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"board_land_legend\"](retptr, this.ptr, arg0);\n        const mem = getUint32Memory();\n        const rustptr = mem[retptr / 4];\n        const rustlen = mem[retptr / 4 + 1];\n\n        const realRet = getStringFromWasm(rustptr, rustlen).slice();\n        _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_free\"](rustptr, rustlen * 1);\n        return realRet;\n\n    }\n}\n\nfunction freeGenerator(ptr) {\n\n    _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_generator_free\"](ptr);\n}\n/**\n* Represents random map generator. In contrast to `gen::RandomBoardGen`, it only provides limited\n* functionality. It cannot be initialized with specific seed. And map resolution is always detected\n* from its size.\n*/\nclass Generator {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Generator.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n        freeGenerator(ptr);\n    }\n\n    /**\n    * @returns {Generator}\n    */\n    static new() {\n        return Generator.__wrap(_world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"generator_new\"]());\n    }\n    /**\n    * Generates random map board with given width and height. Parameters are in number of cells.\n    * @param {number} arg0\n    * @param {number} arg1\n    * @returns {Board}\n    */\n    gen(arg0, arg1) {\n        return Board.__wrap(_world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"generator_gen\"](this.ptr, arg0, arg1));\n    }\n}\n\nfunction freeCell(ptr) {\n\n    _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_cell_free\"](ptr);\n}\n/**\n* Represents one cell in board. In contrast to `land::Land`, it only contains its land kind and\n* altitude in order to reduce total memory size.\n*/\nclass Cell {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Cell.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n        freeCell(ptr);\n    }\n\n    /**\n    * @returns {number}\n    */\n    get kind() {\n        return _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_get_cell_kind\"](this.ptr);\n    }\n    set kind(arg0) {\n        return _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_set_cell_kind\"](this.ptr, arg0);\n    }\n    /**\n    * @returns {number}\n    */\n    get altitude() {\n        return _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_get_cell_altitude\"](this.ptr);\n    }\n    set altitude(arg0) {\n        return _world_map_gen_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_set_cell_altitude\"](this.ptr, arg0);\n    }\n}\n\nfunction __wbindgen_throw(ptr, len) {\n    throw new Error(getStringFromWasm(ptr, len));\n}\n\n\n\n//# sourceURL=webpack:///../pkg/world_map_gen.js?");

/***/ }),

/***/ "../pkg/world_map_gen_bg.wasm":
/*!************************************!*\
  !*** ../pkg/world_map_gen_bg.wasm ***!
  \************************************/
/*! exports provided: memory, __wbg_cell_free, __wbg_get_cell_kind, __wbg_set_cell_kind, __wbg_get_cell_altitude, __wbg_set_cell_altitude, __wbg_board_free, __wbg_get_board_width, __wbg_set_board_width, __wbg_get_board_height, __wbg_set_board_height, board_at, board_land_color, board_land_legend, generator_new, generator_gen, __wbg_generator_free, __wbindgen_global_argument_ptr, __wbindgen_free */
/***/ (function(module, exports, __webpack_require__) {

eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.i];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name != \"__webpack_init__\") exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./world_map_gen */ \"../pkg/world_map_gen.js\");\n\n\n// exec wasm module\nwasmExports[\"__webpack_init__\"]()\n\n//# sourceURL=webpack:///../pkg/world_map_gen_bg.wasm?");

/***/ }),

/***/ "./2d.js":
/*!***************!*\
  !*** ./2d.js ***!
  \***************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nclass Renderer2D {\n    constructor(root) {\n        const prev = root.firstChild;\n        if (prev !== null) {\n            root.removeChild(prev);\n        }\n\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'screen';\n        root.appendChild(this.canvas);\n\n        this.ctx = this.canvas.getContext('2d');\n    }\n\n    render(board) {\n        const dpr = window.devicePixelRatio || 1;\n        const rect = this.canvas.getBoundingClientRect();\n        this.canvas.width = rect.width * dpr;\n        this.canvas.height = rect.height * dpr;\n\n        // Clear at first\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n        this.ctx.beginPath();\n\n        const width = board.width;\n        const height = board.height;\n        const cellWidth = this.canvas.width / width;\n        const cellHeight = this.canvas.height / height;\n\n        const colors = new Map();\n        for (let x = 0; x < width; x++) {\n            for (let y = 0; y < height; y++) {\n                const cell = board.at(x, y);\n                const kind = cell.kind;\n                let color = colors.get(kind);\n                if (color === undefined) {\n                    color = board.land_color(kind);\n                    colors.set(kind, color);\n                }\n                this.ctx.fillStyle = color;\n                this.ctx.fillRect(x * cellWidth, y * cellHeight, cellWidth, cellHeight);\n            }\n        }\n\n        this.ctx.stroke();\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Renderer2D);\n\n\n//# sourceURL=webpack:///./2d.js?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var world_map_gen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! world-map-gen */ \"../pkg/world_map_gen.js\");\n/* harmony import */ var _2d__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./2d */ \"./2d.js\");\n\n\n\nconst app = new class {\n    constructor() {\n        this.generator = world_map_gen__WEBPACK_IMPORTED_MODULE_0__[\"Generator\"].new();\n\n        const selector = document.getElementById('dimension-selector');\n        this.dimSelIdx = selector.selectedIndex;\n        selector.addEventListener('change', this.onVisualizationChange.bind(this));\n\n        this.widthInput = document.getElementById('width-input');\n        this.heightInput = document.getElementById('height-input');\n        this.screenRoot = document.getElementById('screen-root');\n\n        this.initRenderer('2d');\n\n        const paintButton = document.getElementById('paint-button');\n        paintButton.addEventListener('click', () => {\n            this.render();\n        });\n    }\n\n    getSize() {\n        const width = parseInt(this.widthInput.value, 10);\n        const height = parseInt(this.heightInput.value, 10);\n        if (!isNaN(width) && !isNaN(height)) {\n            return [width, height];\n        }\n\n        const rect = this.screenRoot.getBoundingClientRect();\n\n        if (!isNaN(width)) {\n            // Note: height is NaN\n            const cellPix = rect.width / width;\n            return [width, Math.floor(rect.height / cellPix)];\n        } else if (!isNaN(height)) {\n            // Note: width is NaN\n            const cellPix = rect.height / height;\n            return [Math.floor(rect.width / cellPix), height];\n        } /* longer side length is 200 cells by default */ else {\n            const max = rect.height > rect.width ? rect.height : rect.width;\n            const cellPix = max / 200;\n            return [Math.floor(rect.width / cellPix), Math.floor(rect.height / cellPix)];\n        }\n    }\n\n    initRenderer(dim) {\n        switch (dim) {\n            case '2d':\n                this.renderer = new _2d__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.screenRoot);\n                break;\n            case '3d':\n                throw new Error('3D renderer is not yet implemented');\n            default:\n                throw new Error(`Unknown context ${dim}`);\n        }\n    }\n\n    onVisualizationChange(event) {\n        const idx = event.target.selectedIndex;\n        if (this.dimSelIdx === idx) {\n            return;\n        }\n        this.dimSelIdx = idx;\n        const dim = event.target[idx].value;\n        this.initRenderer(dim);\n        this.render();\n    }\n\n    render() {\n        const [width, height] = this.getSize();\n        const board = this.generator.gen(width, height);\n        this.renderer.render(board);\n    }\n}();\n\napp.render();\n\n\n//# sourceURL=webpack:///./index.js?");

/***/ })

}]);